/*!
 * typeahead.js 0.10.2
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(a){var b={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},noop:function(){}},c="0.10.2",d=function(){function a(a){return a.split(/\s+/)}function b(a){return a.split(/\W+/)}function c(a){return function(b){return function(c){return a(c[b])}}}return{nonword:b,whitespace:a,obj:{nonword:c(b),whitespace:c(a)}}}(),e=function(){function a(a){this.maxSize=a||100,this.size=0,this.hash={},this.list=new c}function c(){this.head=this.tail=null}function d(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(a.prototype,{set:function(a,b){var c,e=this.list.tail;this.size>=this.maxSize&&(this.list.remove(e),delete this.hash[e.key]),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new d(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0}}),b.mixin(c.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),a}(),f=function(){function a(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function c(){return(new Date).getTime()}function d(a){return JSON.stringify(b.isUndefined(a)?null:a)}function e(a){return JSON.parse(a)}var f,g;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(h){f=null}return g=f&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){return this.isExpired(a)&&this.remove(a),e(f.getItem(this._prefix(a)))},set:function(a,e,g){return b.isNumber(g)?f.setItem(this._ttlKey(a),d(c()+g)):f.removeItem(this._ttlKey(a)),f.setItem(this._prefix(a),d(e))},remove:function(a){return f.removeItem(this._ttlKey(a)),f.removeItem(this._prefix(a)),this},clear:function(){var a,b,c=[],d=f.length;for(a=0;d>a;a++)(b=f.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){var d=e(f.getItem(this._ttlKey(a)));return b.isNumber(d)&&c()>d?!0:!1}}:{get:b.noop,set:b.noop,remove:b.noop,clear:b.noop,isExpired:b.noop},b.mixin(a.prototype,g),a}(),g=function(){function c(b){b=b||{},this._send=b.transport?d(b.transport):a.ajax,this._get=b.rateLimiter?b.rateLimiter(this._get):this._get}function d(c){return function(d,e){function f(a){b.defer(function(){h.resolve(a)})}function g(a){b.defer(function(){h.reject(a)})}var h=a.Deferred();return c(d,e,f,g),h}}var f=0,g={},h=6,i=new e(10);return c.setMaxPendingRequests=function(a){h=a},c.resetCache=function(){i=new e(10)},b.mixin(c.prototype,{_get:function(a,b,c){function d(b){c&&c(null,b),i.set(a,b)}function e(){c&&c(!0)}function j(){f--,delete g[a],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var k,l=this;(k=g[a])?k.done(d).fail(e):h>f?(f++,g[a]=this._send(a,b).done(d).fail(e).always(j)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(a,c,d){var e;return b.isFunction(c)&&(d=c,c={}),(e=i.get(a))?b.defer(function(){d&&d(null,e)}):this._get(a,c,d),!!e}}),c}(),h=function(){function c(b){b=b||{},b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=b.datumTokenizer,this.queryTokenizer=b.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){return{ids:[],children:{}}}function f(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){function c(a,b){return a-b}var d=0,e=0,f=[];for(a=a.sort(c),b=b.sort(c);d<a.length&&e<b.length;)a[d]<b[e]?d++:a[d]>b[e]?e++:(f.push(a[d]),d++,e++);return f}return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;f=c.datums.push(a)-1,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b.children[g]||(b.children[g]=e()),b.ids.push(f)})})},get:function(a){var c,e,h=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=h.trie,c=a.split("");b&&(d=c.shift());)b=b.children[d];return b&&0===c.length?(f=b.ids.slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return h.datums[a]}):[]},reset:function(){this.datums=[],this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){function d(a){return a.local||null}function e(d){var e,f;return f={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(e=d.prefetch||null)&&(e=b.isString(e)?{url:e}:e,e=b.mixin(f,e),e.thumbprint=c+e.thumbprint,e.ajax.type=e.ajax.type||"GET",e.ajax.dataType=e.ajax.dataType||"json",!e.url&&a.error("prefetch requires url to be set")),e}function f(c){function d(a){return function(c){return b.debounce(c,a)}}function e(a){return function(c){return b.throttle(c,a)}}var f,g;return g={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(f=c.remote||null)&&(f=b.isString(f)?{url:f}:f,f=b.mixin(g,f),f.rateLimiter=/^throttle$/i.test(f.rateLimitBy)?e(f.rateLimitWait):d(f.rateLimitWait),f.ajax.type=f.ajax.type||"GET",f.ajax.dataType=f.ajax.dataType||"json",delete f.rateLimitBy,delete f.rateLimitWait,!f.url&&a.error("remote requires url to be set")),f}return{local:d,prefetch:e,remote:f}}();!function(c){function e(b){b&&(b.local||b.prefetch||b.remote)||a.error("one of local, prefetch, or remote is required"),this.limit=b.limit||5,this.sorter=j(b.sorter),this.dupDetector=b.dupDetector||k,this.local=i.local(b),this.prefetch=i.prefetch(b),this.remote=i.remote(b),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new h({datumTokenizer:b.datumTokenizer,queryTokenizer:b.queryTokenizer}),this.storage=this.cacheKey?new f(this.cacheKey):null}function j(a){function c(b){return b.sort(a)}function d(a){return a}return b.isFunction(a)?c:d}function k(){return!1}var l,m;return l=c.Bloodhound,m={data:"data",protocol:"protocol",thumbprint:"thumbprint"},c.Bloodhound=e,e.noConflict=function(){return c.Bloodhound=l,e},e.tokenizers=d,b.mixin(e.prototype,{_loadPrefetch:function(b){function c(a){f.clear(),f.add(b.filter?b.filter(a):a),f._saveToStorage(f.index.serialize(),b.thumbprint,b.ttl)}var d,e,f=this;return(d=this._readFromStorage(b.thumbprint))?(this.index.bootstrap(d),e=a.Deferred().resolve()):e=a.ajax(b.url,b.ajax).done(c),e},_getFromRemote:function(a,b){function c(a,c){b(a?[]:f.remote.filter?f.remote.filter(c):c)}var d,e,f=this;return a=a||"",e=encodeURIComponent(a),d=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,e),this.transport.get(d,this.remote.ajax,c)},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set(m.data,a,c),this.storage.set(m.protocol,location.protocol,c),this.storage.set(m.thumbprint,b,c))},_readFromStorage:function(a){var b,c={};return this.storage&&(c.data=this.storage.get(m.data),c.protocol=this.storage.get(m.protocol),c.thumbprint=this.storage.get(m.thumbprint)),b=c.thumbprint!==a||c.protocol!==location.protocol,c.data&&!b?c.data:null},_initialize:function(){function c(){e.add(b.isFunction(f)?f():f)}var d,e=this,f=this.local;return d=this.prefetch?this._loadPrefetch(this.prefetch):a.Deferred().resolve(),f&&d.done(c),this.transport=this.remote?new g(this.remote):null,this.initPromise=d.promise()},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a)},get:function(a,c){function d(a){var d=f.slice(0);b.each(a,function(a){var c;return c=b.some(d,function(b){return e.dupDetector(a,b)}),!c&&d.push(a),d.length<e.limit}),c&&c(e.sorter(d))}var e=this,f=[],g=!1;f=this.index.get(a),f=this.sorter(f).slice(0,this.limit),f.length<this.limit&&this.transport&&(g=this._getFromRemote(a,d)),g||(f.length>0||!this.transport)&&c&&c(f)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&g.resetCache()},ttAdapter:function(){return b.bind(this.get,this)}}),e}(this)}(window.jQuery);(function($){var _={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return typeof obj==="string"},isNumber:function(obj){return typeof obj==="number"},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return typeof obj==="undefined"},bind:$.proxy,each:function(collection,cb){$.each(collection,reverseArgs);function reverseArgs(index,value){return cb(value,index)}},map:$.map,filter:$.grep,every:function(obj,test){var result=true;if(!obj){return result}$.each(obj,function(key,val){if(!(result=test.call(null,val,key,obj))){return false}});return!!result},some:function(obj,test){var result=false;if(!obj){return result}$.each(obj,function(key,val){if(result=test.call(null,val,key,obj)){return false}});return!!result},mixin:$.extend,getUniqueId:function(){var counter=0;return function(){return counter++}}(),templatify:function templatify(obj){return $.isFunction(obj)?obj:template;function template(){return String(obj)}},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments,later,callNow;later=function(){timeout=null;if(!immediate){result=func.apply(context,args)}};callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args)}return result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;previous=0;later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date,remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}},noop:function(){}};var html={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'};var css={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(_.isMsie()){_.mixin(css.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(_.isMsie()&&_.isMsie()<=7){_.mixin(css.input,{marginTop:"-1px"})}var EventBus=function(){var namespace="typeahead:";function EventBus(o){if(!o||!o.el){$.error("EventBus initialized without el")}this.$el=$(o.el)}_.mixin(EventBus.prototype,{trigger:function(type){var args=[].slice.call(arguments,1);this.$el.trigger(namespace+type,args)}});return EventBus}();var EventEmitter=function(){var splitter=/\s+/,nextTick=getNextTick();return{onSync:onSync,onAsync:onAsync,off:off,trigger:trigger};function on(method,types,cb,context){var type;if(!cb){return this}types=types.split(splitter);cb=context?bindContext(cb,context):cb;this._callbacks=this._callbacks||{};while(type=types.shift()){this._callbacks[type]=this._callbacks[type]||{sync:[],async:[]};this._callbacks[type][method].push(cb)}return this}function onAsync(types,cb,context){return on.call(this,"async",types,cb,context)}function onSync(types,cb,context){return on.call(this,"sync",types,cb,context)}function off(types){var type;if(!this._callbacks){return this}types=types.split(splitter);while(type=types.shift()){delete this._callbacks[type]}return this}function trigger(types){var type,callbacks,args,syncFlush,asyncFlush;if(!this._callbacks){return this}types=types.split(splitter);args=[].slice.call(arguments,1);while((type=types.shift())&&(callbacks=this._callbacks[type])){syncFlush=getFlush(callbacks.sync,this,[type].concat(args));asyncFlush=getFlush(callbacks.async,this,[type].concat(args));syncFlush()&&nextTick(asyncFlush)}return this}function getFlush(callbacks,context,args){return flush;function flush(){var cancelled;for(var i=0;!cancelled&&i<callbacks.length;i+=1){cancelled=callbacks[i].apply(context,args)===false}return!cancelled}}function getNextTick(){var nextTickFn;if(window.setImmediate){nextTickFn=function nextTickSetImmediate(fn){setImmediate(function(){fn()})}}else{nextTickFn=function nextTickSetTimeout(fn){setTimeout(function(){fn()},0)}}return nextTickFn}function bindContext(fn,context){return fn.bind?fn.bind(context):function(){fn.apply(context,[].slice.call(arguments,0))}}}();var highlight=function(doc){var defaults={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function hightlight(o){var regex;o=_.mixin({},defaults,o);if(!o.node||!o.pattern){return}o.pattern=_.isArray(o.pattern)?o.pattern:[o.pattern];regex=getRegex(o.pattern,o.caseSensitive,o.wordsOnly);traverse(o.node,hightlightTextNode);function hightlightTextNode(textNode){var match,patternNode;if(match=regex.exec(textNode.data)){wrapperNode=doc.createElement(o.tagName);o.className&&(wrapperNode.className=o.className);patternNode=textNode.splitText(match.index);patternNode.splitText(match[0].length);wrapperNode.appendChild(patternNode.cloneNode(true));textNode.parentNode.replaceChild(wrapperNode,patternNode)}return!!match}function traverse(el,hightlightTextNode){var childNode,TEXT_NODE_TYPE=3;for(var i=0;i<el.childNodes.length;i++){childNode=el.childNodes[i];if(childNode.nodeType===TEXT_NODE_TYPE){i+=hightlightTextNode(childNode)?1:0}else{traverse(childNode,hightlightTextNode)}}}};function getRegex(patterns,caseSensitive,wordsOnly){var escapedPatterns=[],regexStr;for(var i=0;i<patterns.length;i++){escapedPatterns.push(_.escapeRegExChars(patterns[i]))}regexStr=wordsOnly?"\\b("+escapedPatterns.join("|")+")\\b":"("+escapedPatterns.join("|")+")";return caseSensitive?new RegExp(regexStr):new RegExp(regexStr,"i")}}(window.document);var Input=function(){var specialKeyCodeMap;specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function Input(o){var that=this,onBlur,onFocus,onKeydown,onInput;o=o||{};if(!o.input){$.error("input is missing")}onBlur=_.bind(this._onBlur,this);onFocus=_.bind(this._onFocus,this);onKeydown=_.bind(this._onKeydown,this);onInput=_.bind(this._onInput,this);this.$hint=$(o.hint);this.$input=$(o.input).on("blur.tt",onBlur).on("focus.tt",onFocus).on("keydown.tt",onKeydown);if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=_.noop}if(!_.isMsie()){this.$input.on("input.tt",onInput)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){if(specialKeyCodeMap[$e.which||$e.keyCode]){return}_.defer(_.bind(that._onInput,that,$e))})}this.query=this.$input.val();this.$overflowHelper=buildOverflowHelper(this.$input)}Input.normalizeQuery=function(str){return(str||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};_.mixin(Input.prototype,EventEmitter,{_onBlur:function onBlur(){this.resetInputValue();this.trigger("blurred")},_onFocus:function onFocus(){this.trigger("focused")},_onKeydown:function onKeydown($e){var keyName=specialKeyCodeMap[$e.which||$e.keyCode];this._managePreventDefault(keyName,$e);if(keyName&&this._shouldTrigger(keyName,$e)){this.trigger(keyName+"Keyed",$e)}},_onInput:function onInput(){this._checkInputValue()},_managePreventDefault:function managePreventDefault(keyName,$e){var preventDefault,hintValue,inputValue;switch(keyName){case"tab":hintValue=this.getHint();inputValue=this.getInputValue();preventDefault=hintValue&&hintValue!==inputValue&&!withModifier($e);break;case"up":case"down":preventDefault=!withModifier($e);break;default:preventDefault=false}preventDefault&&$e.preventDefault()},_shouldTrigger:function shouldTrigger(keyName,$e){var trigger;switch(keyName){case"tab":trigger=!withModifier($e);break;default:trigger=true}return trigger},_checkInputValue:function checkInputValue(){var inputValue,areEquivalent,hasDifferentWhitespace;inputValue=this.getInputValue();areEquivalent=areQueriesEquivalent(inputValue,this.query);hasDifferentWhitespace=areEquivalent?this.query.length!==inputValue.length:false;if(!areEquivalent){if(LI&&LI.RUM&&LI.RUM.userTiming){LI.RUM.userTiming.startMeasure("linkedin_desktop_federated_time_result_1_time")}this.trigger("queryChanged",this.query=inputValue)}else if(hasDifferentWhitespace){this.trigger("whitespaceChanged",this.query)}},focus:function focus(){this.$input.focus()},blur:function blur(){this.$input.blur()},getQuery:function getQuery(){return this.query},setQuery:function setQuery(query){this.query=query},getInputValue:function getInputValue(){return this.$input.val()},setInputValue:function setInputValue(value,silent){this.$input.val(value);silent?this.clearHint():this._checkInputValue()},resetInputValue:function resetInputValue(){this.setInputValue(this.query,true)},getHint:function getHint(){return this.$hint.val()},setHint:function setHint(value){this.$hint.val(value)},clearHint:function clearHint(){this.setHint("")},clearHintIfInvalid:function clearHintIfInvalid(){var val,hint,valIsPrefixOfHint,isValid;val=this.getInputValue();hint=this.getHint();valIsPrefixOfHint=val!==hint&&hint.indexOf(val)===0;isValid=val!==""&&valIsPrefixOfHint&&!this.hasOverflow();!isValid&&this.clearHint()},getLanguageDirection:function getLanguageDirection(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function hasOverflow(){var constraint=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=constraint},isCursorAtEnd:function(){var valueLength,selectionStart,range;valueLength=this.$input.val().length;selectionStart=this.$input[0].selectionStart;if(_.isNumber(selectionStart)){return selectionStart===valueLength}else if(document.selection){range=document.selection.createRange();range.moveStart("character",-valueLength);return valueLength===range.text.length}return true},destroy:function destroy(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return Input;function buildOverflowHelper($input){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input)}function areQueriesEquivalent(a,b){return Input.normalizeQuery(a)===Input.normalizeQuery(b)}function withModifier($e){return $e.altKey||$e.ctrlKey||$e.metaKey||$e.shiftKey}}();var Dataset=function(){var datasetKey="ttDataset",valueKey="ttValue",datumKey="ttDatum";function Dataset(o){o=o||{};o.templates=o.templates||{};if(!o.source){$.error("missing source")}if(o.name&&!isValidName(o.name)){$.error("invalid dataset name: "+o.name)}this.query=null;this.highlight=!!o.highlight;this.name=o.name||_.getUniqueId();this.source=o.source;this.displayFn=getDisplayFn(o.display||o.displayKey);this.templates=getTemplates(o.templates,this.displayFn);this.$el=$(html.dataset.replace("%CLASS%",this.name))}Dataset.extractDatasetName=function extractDatasetName(el){return $(el).data(datasetKey)};Dataset.extractValue=function extractDatum(el){return $(el).data(valueKey)};Dataset.extractDatum=function extractDatum(el){return $(el).data(datumKey)};_.mixin(Dataset.prototype,EventEmitter,{_render:function render(query,suggestions){if(!this.$el){return}var that=this,hasSuggestions;this.$el.empty();hasSuggestions=suggestions&&suggestions.length;if(!hasSuggestions&&this.templates.empty){this.$el.html(getEmptyHtml()).prepend(that.templates.header?getHeaderHtml():null).append(that.templates.footer?getFooterHtml():null)}else if(hasSuggestions){this.$el.html(getSuggestionsHtml()).prepend(that.templates.header?getHeaderHtml():null).append(that.templates.footer?getFooterHtml():null)}if(LI&&LI.RUM&&LI.RUM.userTiming){LI.RUM.userTiming.endMeasure("linkedin_desktop_federated_time_result_1_time")}this.trigger("rendered");function getEmptyHtml(){return that.templates.empty({query:query,isEmpty:true})}function getSuggestionsHtml(){var $suggestions,nodes;$suggestions=$(html.suggestions).css(css.suggestions);nodes=_.map(suggestions,getSuggestionNode);$suggestions.append.apply($suggestions,nodes);that.highlight&&highlight({node:$suggestions[0],pattern:query});return $suggestions;function getSuggestionNode(suggestion){var $el;$el=$(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey,that.name).data(valueKey,that.displayFn(suggestion)).data(datumKey,suggestion);$el.children().each(function(){$(this).css(css.suggestionChild)});return $el}}function getHeaderHtml(){return that.templates.header({query:query,isEmpty:!hasSuggestions})}function getFooterHtml(){return that.templates.footer({query:query,isEmpty:!hasSuggestions})}},getRoot:function getRoot(){return this.$el},update:function update(query){var that=this;this.query=query;this.canceled=false;this.source(query,render);function render(suggestions){if(!that.canceled&&query===that.query){that._render(query,suggestions)}}},cancel:function cancel(){this.canceled=true},clear:function clear(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function isEmpty(){return this.$el.is(":empty")},destroy:function destroy(){this.$el=null}});return Dataset;function getDisplayFn(display){display=display||"value";return _.isFunction(display)?display:displayFn;function displayFn(obj){return obj[display]}}function getTemplates(templates,displayFn){return{empty:templates.empty&&_.templatify(templates.empty),header:templates.header&&_.templatify(templates.header),footer:templates.footer&&_.templatify(templates.footer),suggestion:templates.suggestion||suggestionTemplate};function suggestionTemplate(context){return"<p>"+displayFn(context)+"</p>"}}function isValidName(str){return/^[_a-zA-Z0-9-]+$/.test(str)}}();var Dropdown=function(){function Dropdown(o){var that=this,onSuggestionClick,onSuggestionMouseEnter,onSuggestionMouseLeave;o=o||{};if(!o.menu){$.error("menu is required")}this.isOpen=false;this.isEmpty=true;this.datasets=_.map(o.datasets,initializeDataset);onSuggestionClick=_.bind(this._onSuggestionClick,this);onSuggestionMouseEnter=_.bind(this._onSuggestionMouseEnter,this);onSuggestionMouseLeave=_.bind(this._onSuggestionMouseLeave,this);this.$menu=$(o.menu).on("click.tt",".tt-suggestion",onSuggestionClick).on("mouseenter.tt",".tt-suggestion",onSuggestionMouseEnter).on("mouseleave.tt",".tt-suggestion",onSuggestionMouseLeave);_.each(this.datasets,function(dataset){that.$menu.append(dataset.getRoot());dataset.onSync("rendered",that._onRendered,that)})}_.mixin(Dropdown.prototype,EventEmitter,{_onSuggestionClick:function onSuggestionClick($e){this.trigger("suggestionClicked",$($e.currentTarget))},_onSuggestionMouseEnter:function onSuggestionMouseEnter($e){this._removeCursor();this._setCursor($($e.currentTarget),true)},_onSuggestionMouseLeave:function onSuggestionMouseLeave(){this._removeCursor()},_onRendered:function onRendered(){this.isEmpty=_.every(this.datasets,isDatasetEmpty);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered");function isDatasetEmpty(dataset){return dataset.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function getSuggestions(){return this.$menu.find(".tt-suggestion")},_getCursor:function getCursor(){return this.$menu.find(".tt-cursor").first()},_setCursor:function setCursor($el,silent){$el.first().addClass("tt-cursor");!silent&&this.trigger("cursorMoved")},_removeCursor:function removeCursor(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function moveCursor(increment){var $suggestions,$oldCursor,newCursorIndex,$newCursor;if(!this.isOpen){return}$oldCursor=this._getCursor();$suggestions=this._getSuggestions();this._removeCursor();newCursorIndex=$suggestions.index($oldCursor)+increment;newCursorIndex=(newCursorIndex+1)%($suggestions.length+1)-1;if(newCursorIndex===-1){this.trigger("cursorRemoved");return}else if(newCursorIndex<-1){newCursorIndex=$suggestions.length-1}this._setCursor($newCursor=$suggestions.eq(newCursorIndex));this._ensureVisible($newCursor)},_ensureVisible:function ensureVisible($el){var elTop,elBottom,menuScrollTop,menuHeight;elTop=$el.position().top;elBottom=elTop+$el.outerHeight(true);menuScrollTop=this.$menu.scrollTop();menuHeight=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(elTop<0){this.$menu.scrollTop(menuScrollTop+elTop)}else if(menuHeight<elBottom){this.$menu.scrollTop(menuScrollTop+(elBottom-menuHeight))}},close:function close(){if(this.isOpen){this.isOpen=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function open(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function setLanguageDirection(dir){this.$menu.css(dir==="ltr"?css.ltr:css.rtl)},moveCursorUp:function moveCursorUp(){this._moveCursor(-1)},moveCursorDown:function moveCursorDown(){this._moveCursor(+1)},getDatumForSuggestion:function getDatumForSuggestion($el){var datum=null;if($el.length){datum={raw:Dataset.extractDatum($el),value:Dataset.extractValue($el),datasetName:Dataset.extractDatasetName($el)}}return datum},getDatumForCursor:function getDatumForCursor(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function getDatumForTopSuggestion(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function update(query){_.each(this.datasets,updateDataset);function updateDataset(dataset){dataset.update(query)}},empty:function empty(){_.each(this.datasets,clearDataset);this.isEmpty=true;function clearDataset(dataset){dataset.clear()}},isVisible:function isVisible(){return this.isOpen&&!this.isEmpty},destroy:function destroy(){this.$menu.off(".tt");this.$menu=null;_.each(this.datasets,destroyDataset);function destroyDataset(dataset){dataset.destroy()}}});return Dropdown;function initializeDataset(oDataset){return new Dataset(oDataset)}}();var Typeahead=function(){var attrsKey="ttAttrs";function Typeahead(o){var $menu,$input,$hint;o=o||{};if(!o.input){$.error("missing input")}this.isActivated=false;this.autoselect=!!o.autoselect;this.minLength=_.isNumber(o.minLength)?o.minLength:1;this.$node=buildDomStructure(o.input,o.withHint);$menu=this.$node.find(".tt-dropdown-menu");$input=this.$node.find(".tt-input");$hint=this.$node.find(".tt-hint");$input.on("blur.tt",function($e){var active,isActive,hasActive;active=document.activeElement;isActive=$menu.is(active);hasActive=$menu.has(active).length>0;if(_.isMsie()&&(isActive||hasActive)){$e.preventDefault();$e.stopImmediatePropagation();_.defer(function(){$input.focus()})}});$menu.on("mousedown.tt",function($e){$e.preventDefault()});this.eventBus=o.eventBus||new EventBus({el:$input});this.dropdown=new Dropdown({menu:$menu,datasets:o.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=new Input({input:$input,hint:$hint}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}_.mixin(Typeahead.prototype,{_onSuggestionClicked:function onSuggestionClicked(type,$el){var datum;if(datum=this.dropdown.getDatumForSuggestion($el)){this._select(datum)}},_onCursorMoved:function onCursorMoved(){var datum=this.dropdown.getDatumForCursor();this.input.setInputValue(datum.value,true);this.eventBus.trigger("cursorchanged",datum.raw,datum.datasetName)},_onCursorRemoved:function onCursorRemoved(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function onDatasetRendered(){this._updateHint()},_onOpened:function onOpened(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function onClosed(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function onFocused(){this.isActivated=true;this.dropdown.open()},_onBlurred:function onBlurred(){this.isActivated=false;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function onEnterKeyed(type,$e){var cursorDatum,topSuggestionDatum;cursorDatum=this.dropdown.getDatumForCursor();topSuggestionDatum=this.dropdown.getDatumForTopSuggestion();if(cursorDatum){this._select(cursorDatum);$e.preventDefault()}else if(this.autoselect&&topSuggestionDatum){this._select(topSuggestionDatum);$e.preventDefault()}},_onTabKeyed:function onTabKeyed(type,$e){var datum;if(datum=this.dropdown.getDatumForCursor()){this._select(datum);$e.preventDefault()}else{this._autocomplete(true)}},_onEscKeyed:function onEscKeyed(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function onUpKeyed(){var query=this.input.getQuery();this.dropdown.isEmpty&&query.length>=this.minLength?this.dropdown.update(query):this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function onDownKeyed(){var query=this.input.getQuery();this.dropdown.isEmpty&&query.length>=this.minLength?this.dropdown.update(query):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function onLeftKeyed(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function onRightKeyed(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function onQueryChanged(e,query){this.input.clearHintIfInvalid();query.length>=this.minLength?this.dropdown.update(query):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function onWhitespaceChanged(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function setLanguageDirection(){var dir;if(this.dir!==(dir=this.input.getLanguageDirection())){this.dir=dir;this.$node.css("direction",dir);this.dropdown.setLanguageDirection(dir)}},_updateHint:function updateHint(){var datum,val,query,escapedQuery,frontMatchRegEx,match;datum=this.dropdown.getDatumForTopSuggestion();if(datum&&this.dropdown.isVisible()&&!this.input.hasOverflow()){val=this.input.getInputValue();query=Input.normalizeQuery(val);escapedQuery=_.escapeRegExChars(query);frontMatchRegEx=new RegExp("^(?:"+escapedQuery+")(.+$)","i");match=frontMatchRegEx.exec(datum.value);match?this.input.setHint(val+match[1]):this.input.clearHint()}else{this.input.clearHint()}},_autocomplete:function autocomplete(laxCursor){var hint,query,isCursorAtEnd,datum;hint=this.input.getHint();query=this.input.getQuery();isCursorAtEnd=laxCursor||this.input.isCursorAtEnd();if(hint&&query!==hint&&isCursorAtEnd){datum=this.dropdown.getDatumForTopSuggestion();datum&&this.input.setInputValue(datum.value);this.eventBus.trigger("autocompleted",datum.raw,datum.datasetName)}},_select:function select(datum){this.input.setQuery(datum.value);this.input.setInputValue(datum.value,true);this._setLanguageDirection();this.eventBus.trigger("selected",datum.raw,datum.datasetName);this.dropdown.close();_.defer(_.bind(this.dropdown.empty,this.dropdown))},open:function open(){this.dropdown.open()},close:function close(){this.dropdown.close()},setVal:function setVal(val){if(this.isActivated){this.input.setInputValue(val)}else{this.input.setQuery(val);this.input.setInputValue(val,true)}this._setLanguageDirection()},getVal:function getVal(){return this.input.getQuery()},destroy:function destroy(){this.input.destroy();this.dropdown.destroy();destroyDomStructure(this.$node);this.$node=null}});return Typeahead;function buildDomStructure(input,withHint){var $input,$wrapper,$dropdown,$hint;$input=$(input);$wrapper=$(html.wrapper).css(css.wrapper);$dropdown=$(html.dropdown).css(css.dropdown);$hint=$input.clone().css(css.hint).css(getBackgroundStyles($input));$hint.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",true).attr({autocomplete:"off",spellcheck:"false"});$input.data(attrsKey,{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")});$input.addClass("tt-input").attr({autocomplete:"off",spellcheck:false}).css(withHint?css.input:css.inputWithNoHint);try{!$input.attr("dir")&&$input.attr("dir","auto")}catch(e){}return $input.wrap($wrapper).parent().prepend(withHint?$hint:null).append($dropdown)}function getBackgroundStyles($el){return{backgroundAttachment:$el.css("background-attachment"),backgroundClip:$el.css("background-clip"),backgroundColor:$el.css("background-color"),backgroundImage:$el.css("background-image"),backgroundOrigin:$el.css("background-origin"),backgroundPosition:$el.css("background-position"),backgroundRepeat:$el.css("background-repeat"),backgroundSize:$el.css("background-size")}}function destroyDomStructure($node){var $input=$node.find(".tt-input");_.each($input.data(attrsKey),function(val,key){_.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val)});$input.detach().removeData(attrsKey).removeClass("tt-input").insertAfter($node);$node.remove()}}();(function(){var old,typeaheadKey,methods;old=$.fn.typeahead;typeaheadKey="ttTypeahead";methods={initialize:function initialize(o,datasets){datasets=_.isArray(datasets)?datasets:[].slice.call(arguments,1);o=o||{};return this.each(attach);function attach(){var $input=$(this),eventBus,typeahead;_.each(datasets,function(d){d.highlight=!!o.highlight});typeahead=new Typeahead({input:$input,eventBus:eventBus=new EventBus({el:$input}),withHint:_.isUndefined(o.hint)?true:!!o.hint,minLength:o.minLength,autoselect:o.autoselect,datasets:datasets});$input.data(typeaheadKey,typeahead)}},open:function open(){return this.each(openTypeahead);function openTypeahead(){var $input=$(this),typeahead;if(typeahead=$input.data(typeaheadKey)){typeahead.open()}}},close:function close(){return this.each(closeTypeahead);function closeTypeahead(){var $input=$(this),typeahead;if(typeahead=$input.data(typeaheadKey)){typeahead.close()}}},val:function val(newVal){return!arguments.length?getVal(this.first()):this.each(setVal);function setVal(){var $input=$(this),typeahead;if(typeahead=$input.data(typeaheadKey)){typeahead.setVal(newVal)}}function getVal($input){var typeahead,query;if(typeahead=$input.data(typeaheadKey)){query=typeahead.getVal()}return query}},destroy:function destroy(){return this.each(unattach);function unattach(){var $input=$(this),typeahead;if(typeahead=$input.data(typeaheadKey)){typeahead.destroy();$input.removeData(typeaheadKey)}}}};$.fn.typeahead=function(method){if(methods[method]){return methods[method].apply(this,[].slice.call(arguments,1))}else{return methods.initialize.apply(this,arguments)}};$.fn.typeahead.noConflict=function noConflict(){$.fn.typeahead=old;return this}})()})(window.jQuery);
(function(c){function q(b){return m.filter(b,function(a){return 0<=a.index&&a.length})}function n(b,a){this.config=m.defaults(a||{},{highlightClass:"highlight"});this.el=b;this.$el=r(b)}var r=c.requires("jquery"),m=c.requires("underscore"),p=c.imports("jSecure"),e=p&&p.text||c.requires("htmlEncode"),s=/\r?\n/gm,t=/\S/;n.prototype={render:function(b,a){var c,d,f,k,g=[],h,l=0;if(void 0!==b&&void 0!==a&&t.test(b))if(a=q(a),c=a.length){a.sort(function(a,b){return a.index-b.index});for(d=0;d<c;d++)h=a[d],
f=h.index,k=f+h.length,f&&g.push(e(b.substr(l,f-l))),g.push(['\x3cspan class\x3d"',e(this.config.highlightClass),'"\x3e',e(h.token),"\x3c/span\x3e"].join("")),d===c-1&&g.push(e(b.substr(k))),l=k;this.$el.html(g.join("").replace(s,"\x3cbr /\x3e")+"\x26nbsp;")}else this.$el.text(b);else this.el.innerHTML=""}};c.exports("TokenHighlighter",n)})(window.LIModules);(function(){var r=LIModules.requires("jquery");LIModules.exports("TokenMatcher",function(d){var k=r(d),c=[],n,a="^\\s\\.\\,";c.push({trigger:"@",includeInSearch:!1,regExp:/(?:(?:(?:[\s]|^)\@$)|(?:(?:[\s]|^)\@([\S]+(?:[\u0020]+[^\s\@]+){0,2})))/gim});a+="\\@";c.push({trigger:"+",includeInSearch:!1,regExp:/(?:(?:(?:[\s]|^)\+$)|(?:(?:[\s]|^)\+([\S]+(?:[\u0020]+[^\s\+]+){0,2})))/gim});a+="\\+";c.push({trigger:"tripleUpper",includeInSearch:!0,regExp:RegExp("(?:[\\s]|^)([A-Z\\u00C0-\\u00D6\\u00D8-\\u00DE]["+
a+"]{2,}[^\\S\\n\\r][A-Z\\u00C0-\\u00D6\\u00D8-\\u00DE]["+a+"]*[^\\S\\n\\r][A-Z\\u00C0-\\u00D6\\u00D8-\\u00DE]["+a+"]*)","gm")});c.push({trigger:"upper",includeInSearch:!0,regExp:RegExp("((?:[\\s]|^)[A-Z\\u00C0-\\u00D6\\u00D8-\\u00DE](?:(?:["+a+"]{3,}(?:[^\\S\\n\\r]?)(?:["+a+"]+)?)|(?:["+a+"]{1}[^\\S\\n\\r]["+a+"]{2,})|(?:["+a+"]{2}[^\\S\\n\\r]["+a+"]+)))","gm")});n=c.length;k.on("change",function(){var a;a=0;document.selection?(a=document.selection.createRange(),a.moveStart("character",-d.value.length),
a=a.text.length):0<=d.selectionStart&&(a=d.selectionStart);var l=d.value.substr(0,a),e,f,m=!1,g,b,h,p,q;for(g=0;g<n;g++){f=c[g];e=f.regExp;if(l.match(e))for(e.lastIndex=0,b=e.exec(l);b;){q=f.trigger;p=b[1]?b[1].replace(/^\s+|\s+$/,""):"";h=b.index;b=h+b[0].length;if(a>h&&a<=b){k.trigger("match",{match:{caretPosition:a,end:b,start:h,token:p||"a",trigger:q,triggerIncluded:f.includeInSearch}});m=!0;break}b=e.exec(l)}if(m)break}m||k.trigger("typeaheadHide")})})})();(function(g){function h(){var a=window.navigator.userAgent,c=a.indexOf("MSIE ");return 0<c||navigator.userAgent.match(/Trident.*rv\:11\./)?parseInt(a.substring(c+5,a.indexOf(".",c)),10):0}var k=g.requires("jquery");g.exports("RealTimeChangeObserver",function(a){function c(){d.trigger("change")}function b(a){a?setTimeout(c,50):c()}var f=h(),e=!1,d=k(a);if(f&&10>=f)e=9===f,a.attachEvent("onpropertychange",function(a){"value"===a.propertyName.toLowerCase()&&b()}),d.on("keyup",function(a){switch(a.keyCode){case 8:e&&
b();break;case 46:e&&b();break;case 35:case 36:case 37:case 38:case 39:case 40:b()}}),e&&a.attachEvent("oncut",function(){b(!0)},!1);else d.on("input",b);d.on("click",b)})})(window.LIModules);(function(h){var p=h.requires("jquery"),g=h.requires("underscore"),k=h.imports("jSecure"),m=k&&k.htmlUnencode||h.requires("htmlUnencode"),s=h.requires("RealTimeChangeObserver"),t=h.requires("TokenMatcher"),u=h.requires("TokenHighlighter"),v=g.values({up:38,down:40,enter:13,escape:27}),k=function(a,b){this.el=a;this.$el=p(this.el);this.mentionsData=[];this.useOonMentions=!1;this.$mentionsInput=this.$el.find(".mentions-input");this.$mentionsTypeahead=this.$el.find(".mentions-typeahead");this.$mentionsEntities=
this.$el.find(".mentions-entities");this.$mentionsHighlighter=this.$el.find(".mentions-highlighter");this.tokenMatcher=this.changeObserver=null;this.useAdjustOffset=!0;this.currentMentionTokens=this.previousEditedMentionTokens=null;this.inputValue=this.inputValueOld="";this.lastMatch=null;this.config=g.defaults(b||{},{isInfluencer:!1,oonMentions:!1,ieVersion:0,discussionId:0,posterId:0,mentionsTL:"tl/shared/mentions/mentions-play",isMegaphone:!1,limits:{mynetwork:5,my1stnetwork:5,company:5,school:0}});
this.$el.data("is-connections-only")||!this.config.isInfluencer&&!this.config.oonMentions||(this.useOonMentions=!0);this.discussionId=this.config.discussionId;this.posterId=this.config.posterId;this.init()};k.prototype={attachEventEmitters:function(){this.changeObserver=new s(this.$mentionsInput.get(0));this.tokenMatcher=new t(this.$mentionsInput.get(0))},attachEventListeners:function(){this.$mentionsInput.on("keyup keydown keypress",this.events.proxyTypeahead).on("change",this.events.handleUpdates).on("change",
this.events.syncMentionsHighlighterScroll).on("typeaheadHide blur",this.events.hideTypeahead).on("match",this.events.tokenMatched).on("scroll",this.events.syncMentionsHighlighterScroll);this.$mentionsTypeahead.on("typeahead:opened",this.events.typeaheadOpened).on("typeahead:closed",this.events.typeaheadClosed).on("typeahead:selected",this.events.typeaheadSelected)},bindAllEvents:function(){var a={},b=this;g.each(this.events,function(c,d){a[d]=g.bind(c,b)});this.events=a},clearMentions:function(){this.mentionsData=
[];this.updateMentionsEntitiesInput();this.tokenHighlighter.render("",[])},updateMentionsEntitiesInput:function(){this.$mentionsEntities.val(JSON.stringify(this.generateMentions())).trigger("change")},generateMentions:function(){return g.map(this.mentionsData,function(a){return g.pick(a,"id","index","length","type","isFirstDegree","token")})},init:function(){this.bindAllEvents();this.loadTemplates();this.loadi18n();this.initBloodhound();this.initTypeahead();this.tokenHighlighter=new u(this.$mentionsHighlighter.get(0));
this.attachEventEmitters();this.attachEventListeners();this.highlightMentions()},initBloodhound:function(){var a=this.useOonMentions?"mynetwork":"my1stnetwork",b=this.config.limits,c,d,e;c="/ta/discussionparticipants?"+p.param({"ta-updateId":this.discussionId,"ta-posterId":this.posterId,"ta-isMegaphone":this.config.isMegaphone,query:(new Date).getTime()});d=this.buildBloodhound({limit:b.company},{url:"/ta/federator?query\x3d%QUERY\x26types\x3dcompany"},"company","companies");e=this.buildBloodhound({limit:b.school},
{url:"/ta/federator?query\x3d%QUERY\x26types\x3dschool"},"school","universities");this.bloodhound={people:this.discussionId?this.buildBloodhound({prefetch:{url:c,filter:function(a){g.isObject(a)&&a.resultList&&(a=a.resultList);return a}},dupDetector:function(a,b){return a.id===b.id},limit:b[a]},{url:"/ta/federator?query\x3d%QUERY\x26types\x3d"+a},a,"people"):this.buildBloodhound({limit:b[a]},{url:"/ta/federator?query\x3d%QUERY\x26types\x3d"+a},a,"people"),universities:e,companies:d};g.invoke(this.bloodhound,
"initialize")},buildBloodhound:function(a,b,c,d){var e={datumTokenizer:Bloodhound.tokenizers.obj.whitespace("displayName"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{rateLimitBy:"debounce",rateLimitWait:250,filter:g.bind(function(a){a=a[c]&&a[c].resultList?a[c].resultList:[];this.bloodhound[d].isEmpty=!a.length;return a},this)}};g.extend(e,a);g.extend(e.remote,b);return g.extend(new Bloodhound(e),{isEmpty:!0})},initTypeahead:function(){var a=this,b=this.config.mentionsTL,c,d,e,f;c={name:"People",
displayKey:"displayName",source:this.bloodhound.people.ttAdapter(),templates:{header:function(a){return a.isEmpty?"":dust.i18n.cache[b].i18n_people},empty:function(){a.events.typeaheadEmpty("people")},suggestion:this.templates.suggestion}};d={name:"Participants",displayKey:"displayName",source:this.bloodhound.people.ttAdapter(),templates:{header:function(a){return a.isEmpty?"":dust.i18n.cache[b].i18n_participants},empty:function(){a.events.typeaheadEmpty("participants")},suggestion:this.templates.suggestion}};
e={name:"Companies",displayKey:"displayName",source:this.bloodhound.companies.ttAdapter(),templates:{header:function(a){return a.isEmpty?"":dust.i18n.cache[b].i18n_companies},empty:function(){a.events.typeaheadEmpty("companies")},suggestion:this.templates.suggestion}};f={name:"Universities",displayKey:"displayName",source:this.bloodhound.universities.ttAdapter(),templates:{header:function(a){return a.isEmpty?"":dust.i18n.cache[b].i18n_universities},empty:function(){a.events.typeaheadEmpty("universities")},
suggestion:this.templates.suggestion}};c=[c,e];this.discussionId&&c.unshift(d);this.config.schoolMentions&&c.push(f);this.$mentionsTypeahead.typeahead({minLength:1,highlight:!1,hint:!1},c)},loadi18n:function(){},loadTemplates:function(){var a=this.config.mentionsTL;this.templates={suggestion:function(b){var c="";dust.render(a,b,function(a,b){if(a)throw Error("Template for Mentions could not be loaded.");c=b});return c}}},events:{hideTypeahead:function(){this.$mentionsTypeahead.typeahead("close")},
handleUpdates:function(){this.inputValueOld=this.inputValue;this.inputValue=this.$mentionsInput.val();this.adjustMentions()},tokenMatched:function(a,b){var c=b.match;this.$mentionsInput.is(":focus")&&(this.validateMentionPosition(c)&&!this._isEditingExistingMention())&&(this.lastMatch=b,this.$mentionsTypeahead.val(c.token).trigger("input").trigger("keydown").typeahead("open"))},typeaheadEmpty:function(){var a=this.lastMatch,b=/([A-Z\u00C0-\u00D6\u00D8-\u00DE]\S+)( [A-Z\u00C0-\u00D6\u00D8-\u00DE].+)/.exec(a.match.token),
c=g.every(g.pluck(this.bloodhound,"isEmpty"),g.identity);b&&c&&(a.match.start&&a.match.start++,a.match.start+=b[1].length,a.match.token=b[2],4<=a.match.token.length&&this.events.tokenMatched(null,a))},typeaheadOpened:function(){this.$mentionsTypeahead.open=!0},typeaheadClosed:function(){this.$mentionsTypeahead.open=!1},typeaheadSelected:function(a,b,c){var d=this.$mentionsInput.val();a=this.lastMatch.match;var e=a.start,f=m(b.displayName),h=b.misc&&b.misc.degree?!0:!1,w=f.length,k=a.triggerIncluded;
g.extend(a,b);e&&e++;b={Companies:"company",People:"member",Universities:"school"}[c];c=[d.substr(0,e),f,d.substr(a.end)].join("");e&&(c=this.checkTripleUpperStart(f,e,c),e=c[0],c=c[1]);this.$mentionsInput.val(c);this.addMention({id:a.id,index:e,length:w,type:b,token:f,isFirstDegree:h,triggerIncluded:k,caretPosition:a.caretPosition})},proxyTypeahead:function(a){if(this.$mentionsTypeahead.open&&!a.charCode&&0<=g.indexOf(v,a.which))return a.preventDefault(),this.$mentionsTypeahead.trigger(a),!1},syncMentionsHighlighterScroll:function(){this.$mentionsHighlighter.scrollTop(this.$mentionsInput.scrollTop())}},
addMention:function(a){this.mentionsData.push(a);this.sortMentions();this.events.handleUpdates();this.updateMentionsEntitiesInput();this.$mentionsInput.focus();this.setCursorPosition(this.$mentionsInput.get(0),a.index+a.length+(a.index&&!a.triggerIncluded?1:0));this.highlightMentions()},highlightMentions:function(){this.tokenHighlighter.render(this.$mentionsInput.val(),this.mentionsData)},checkTripleUpperStart:function(a,b,c){var d,e,f,g,h=a.length;d=a.indexOf(" ");-1!==d&&(e=m(a.substr(0,d)),""!==
e&&(d=b-(e.length+1),f=b+h,g=c.substr(d,f).toLowerCase(),e=[e,a].join(" ").toLowerCase(),e===g&&this.validateMentionPosition({start:d,end:d+h})&&(c=[c.substr(0,d),a,c.substr(f)].join(""),b=d)));return[b,c]},_isEditingExistingMention:function(){var a=this.previousEditedMentionTokens,b=this.currentMentionTokens,c,d;return a&&b&&(this.currentMentionTokens=this.previousEditedMentionTokens=null,a.length===b.length&&(c=a[a.length-1],d=b[b.length-1],c.length>d.length||a[0].length>b[0].length))?!0:!1},adjustMentions:function(){var a,
b=[],c,d,e,f,h=!1,k,p=this.mentionsData.length,q=[],l,n,r,m=this.ieVersion&&9>=this.ieVersion;this.inputValue=this.$mentionsInput.val();l=m&&this.useAdjustOffset?-1:0;e=this.inputValue.length-this.inputValueOld.length;for(f=0;f<p;f++)c=this.mentionsData[f],d=c.token,a=c.index,d=d.replace(/\u0000$/,""),b=this.inputValue.indexOf(d),(k=this.inputValueOld.indexOf(d)===this.inputValueOld.lastIndexOf(d)&&b===this.inputValue.lastIndexOf(d))&&b!==a&&-1!==b?this.mentionsData[f].index=this.inputValue.indexOf(d):
(k=d.length,b=this.inputValue.substr(a,k),b!==d&&(a=a+e+l,n=this.inputValue.substr(a,k),n===d?this.mentionsData[f].index=a:(l=d.split(" "),d=RegExp("[^"+d.replace(/\s/g,"").replace(/([\-\[\]])/g,"\\$1")+"\\s]","gi"),d=b.replace(d,"").split(" "),b=g.intersection(l,d),b.length?(h=!0,r=b.join(" "),b=c.index,n=r.length,a=b+n,this.previousEditedMentionTokens=l,this.currentMentionTokens=d,c.token=r,c.length=n,c.end=a,this.mentionsData[f]=c,c=this.inputValue.substr(0,b)+r+""+this.inputValue.substr(b-1+k),
this.$mentionsInput.val(c),m?(e=this.inputValue.length-this.$mentionsInput.value.length,g.defer(this.setCursorPosition,this.$mentionsInput,a)):this.setCursorPosition(this.$mentionsInput,a)):q.push(f),l=0)));e=q.length;q.sort().reverse();if(e)for(f=0;f<e;f++)this.mentionsData.splice(q[f],1);this.sortMentions();h&&this.adjustMentions();this.updateMentionsEntitiesInput();this.highlightMentions();this.useAdjustOffset=!1},sortMentions:function(){this.mentionsData.sort(function(a,b){return a.index-b.index})},
setCursorPosition:function(a,b){var c;a.setSelectionRange?a.setSelectionRange(b,b):a.createTextRange&&(c=a.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select())},validateMentionPosition:function(a){var b=a.start;a=a.end;for(var c,d,e=this.mentionsData,f=e.length;f--;)if(c=e[f],d=c.index-1,c=d+c.length,b>=d&&b<c||a>=d&&a<=c)return!1;return!0}};h.exports("Mentions",k)})(window.LIModules);(function(f){var g=f.requires("jquery"),d=f.requires("underscore"),h=f.requires("Mentions"),b=function(a,b){var e=g(a);this.el=a;this.config=d.defaults(b||{},{entitlementUrl:"/nhome/influencer-entitlement",oonMentions:e.data("oon-mentions")||!1,schoolMentions:e.data("school-mentions")||!1,limits:e.data("mentions-limits")||{mynetwork:5,my1stnetwork:5,company:5,school:0},isInfluencer:null,mentionsTL:null});this.init()};d.extend(b,{cache:{},count:0,ieVersion:function(){var a=window.navigator.userAgent,
b=a.indexOf("MSIE ");return 0<b||navigator.userAgent.match(/Trident.*rv\:11\./)?parseInt(a.substring(b+5,a.indexOf(".",b)),10):0}(),containerClass:".mentions-container",idAttr:"data-li-mentionsid",discussionIdAttr:"data-li-discussionid",hasDelegatorSelector:".hasMentionsDelegator",getEntitlementResult:d.memoize(function(a){return g.ajax({url:a,beforeSend:function(a){a.setRequestHeader("X-IsAJAXForm","1")}})})});b.prototype={setInstance:function(a){a=g(a.target).closest(b.containerClass);var c=a.attr(b.discussionIdAttr)||
0,e=this.config.isInfluencer,d=this.config.isMegaphone||!1,f=this.config.oonMentions,k=this.config.schoolMentions,l=this.config.limits,m=this.config.mentionsTL;a.attr(b.idAttr)||(c=new h(a.get(0),{isInfluencer:null!==e?e:b.isInfluencer,ieVersion:b.ieVersion,discussionId:c,memberId:this.memberId,oonMentions:f,isMegaphone:d,schoolMentions:k,limits:l,mentionsTL:m}),a.attr(b.idAttr,b.count),b.cache[b.count]={el:a,instance:c},b.count++)},getInstance:function(a){a=g(a).closest(b.containerClass).attr(b.idAttr);
if(void 0===a)throw Error("Undefined -- no Mentions instance is associated with that element. Make sure to pass in the .mentions-container element");return b.cache[a].instance},checkInfluencer:function(){var a;void 0===b.isInfluencer&&(a=d.bind(function(a){try{this.isInfluencer=a.content?a.content.influencer_entitlement.result.isInfluencer:a.isInfluencer}catch(b){}},b),b.getEntitlementResult(this.config.entitlementUrl).success(a))},init:function(){var a=g(this.el),c=b.hasDelegatorSelector;if(a.is(c))throw Error("Mentions Delegator cannot be instantiated twice on the same element");
if(a.find(c).length)throw Error("Mentions Delegator cannot be nested (a Delegator already exists within that DOM scope)");if(a.parents(c).length)throw Error("Mentions Delegator cannot be nested (tried to instantiate a Delegator within a Delegator");this.checkInfluencer();d.bindAll(this,"setInstance");a.addClass(c.substr(1));a.on("focus",".mentions-input",this.setInstance)}};h.Delegator=b})(window.LIModules);(function(d){var c=d.requires("underscore"),k=d.requires("jquery"),e=d.requires("BaseControl"),g=d.requires("asyncRequest"),h=d.requires("Events");d.exports("scripts.FollowToggler",e.extend(function(d){var e={urlAttribute:"href",toggleClass:"is-following",toggleContainerClass:"",actionClassSuffix:"",globalEventSuffix:"",selectedClass:"",loadingClass:"loading",requestMethod:"GET"};return{init:function(a,b){c.defaults(b,e);d.init.call(this,a,b)},beforeDecoration:function(){var a=this._config;this._globalEventSuffix=
a.globalEventSuffix.length?":"+a.globalEventSuffix:"";this._followButtonClass=".action-follow"+a.actionClassSuffix;this._unfollowButtonClass=".action-unfollow"+a.actionClassSuffix},attachEventListeners:function(){var a=function(a,c){c.preventDefault();a(c)};this._$el.on("click",this._followButtonClass,c.bind(a,this,c.bind(this.follow,this)));this._$el.on("click",this._unfollowButtonClass,c.bind(a,this,c.bind(this.unfollow,this)))},_makeRequest:function(a,b,c){LI&&LI.asyncRequest?g(this._config.requestMethod,
a,{scope:this,success:b,failure:c,custom:{exception:c,error:c}}):g({url:a,type:this._config.requestMethod,success:b,error:c})},_doAction:function(a,b,d){var e,f;f=c.bind(function(b){a._$toggleContainer.removeClass(this._config.loadingClass);b(a)},this);e=c.wrap(c.bind(this._triggerFailureEvent,this,a,b),f);d=c.wrap(c.bind(d,this),f);switch(b){case "follow":b=a._followUrl;break;case "unfollow":b=a._unfollowUrl;break;default:throw Error("Unrecognized action");}a._$toggleContainer.addClass(this._config.loadingClass);
this._makeRequest(b,d,e)},_triggerFailureEvent:function(a,b){h.trigger("follow-toggler:"+b+":failure"+this._globalEventSuffix,a._id,this)},_triggerSuccessEvent:function(a,b){h.trigger("follow-toggler:"+b+":success"+this._globalEventSuffix,a._id,this)},_afterFollowSuccess:function(a){a._$toggleContainer.addClass(this._config.toggleClass);a._$unfollowEl.addClass(this._config.selectedClass);a._$followEl.removeClass(this._config.selectedClass)},follow:function(a){a=this._getFollowObj(a);this._doAction(a,
"follow",function(a){this._afterFollowSuccess(a);c.isFunction(this._followCB)&&this._followCB();this._triggerSuccessEvent(a,"follow")})},_followCB:null,_afterUnfollowSuccess:function(a){a._$toggleContainer.removeClass(this._config.toggleClass);a._$unfollowEl.removeClass(this._config.selectedClass);a._$followEl.addClass(this._config.selectedClass)},unfollow:function(a){a=this._getFollowObj(a);this._doAction(a,"unfollow",function(a){this._afterUnfollowSuccess(a);c.isFunction(this._unfollowCB)&&this._unfollowCB();
this._triggerSuccessEvent(a,"unfollow")})},_unfollowCB:null,_getFollowObj:function(a){var b={};a=k(a.target);b._$toggleContainer=this._config.toggleContainerClass?a.closest("."+this._config.toggleContainerClass):this._$el;b._$followEl=b._$toggleContainer.find(this._followButtonClass);b._followUrl=b._$followEl.attr(this._config.urlAttribute);b._$unfollowEl=b._$toggleContainer.find(this._unfollowButtonClass);b._unfollowUrl=b._$unfollowEl.attr(this._config.urlAttribute);(a=b._followUrl.match(/(followee|memberId|channels)[=|\/](\d+)/i))&&
3<=a.length&&(b._id=a[2]);return b}}}))})(window.LIModules);(function(){var d=LIModules.requires("jquery"),g=LIModules.requires("underscore"),e=LIModules.requires("ModalDialogBox");LIModules.requires("i18n");var r=LIModules.requires("log"),m,q,e=e.extend(function(e){function p(){function a(){}return(q=q||LIModules.imports("Spinner"))||{showSpinner:a,hideSpinner:a}}var l={},n=!1;return{beforeDecoration:function(){window.liTrackClient?m=window.liTrackClient:"function"===typeof require&&require.ensure(["liTrackClient"],function(a){try{m=a("liTrackClient")}catch(c){}});
this._config.title=this._config.title||this._$el.data("first-message");this._config=g.defaults(this._config,{customClassName:"dialog-v2",cssPreloaded:!1,dialogTemplate:(this._config.tlPathPrefix||"tl/shared")+"/"+("davinci"===this._config.style?"spam_report_dialog":"spam_report_dialog_art_deco"),successTemplate:(this._config.tlPathPrefix||"tl/shared")+"/"+("davinci"===this._config.style?"spam_report_dialog_success":"spam_report_dialog_success_art_deco"),callbacks:{submitSuccess:this._config.callbacks&&
this._config.callbacks.submitSuccess?this._config.callbacks.submitSuccess:function(){}}});"davinci"!==this._config.style&&(this._config.width=this._config.width||552);this._config.callbacks.closeOnMaskClick=!0;this._config.callbacks.beforeClose=this._beforeCloseHandler.bind(this);this._config.callbacks.submitFailure=this._config.callbacks.submitFailure||function(a){a&&a.message&&r(a.message,"error")};e.beforeDecoration.call(this)},_loadContent:function(){var a;a=[this._config.dialogTemplate,this._config.successTemplate];
var c=[],b,h;p().showSpinner(this._$dialog.find(".dialog-body"));if(dust&&dust.cache)for(b=0,h=a.length;b<h;b++)dust.cache.hasOwnProperty(a[b])||c.push(a[b]);a=this.loadDependencies(c);return d.when(a,d.ajax({url:this._href}))},_loadContentSuccess:function(a,c){var b=c[0],h=b.numberOfSteps,d=[],f;for(f=1;f<=h;f+=1)d.push(f);b.pageIndices=d;this._stack.push(b);this._config.pageIndices=b.pageIndices;b.resultScreen&&(this._config.resultScreen=b.resultScreen);b.dialogTrackingCodes&&g.extend(l,b.dialogTrackingCodes);
this._track(l.dialogOpen);this._updateContent(this._config.dialogTemplate,g.extend({},this._state,this._config,b),this._dustRenderSuccess)},_dustRenderSuccess:function(a,c){a||(d("#dialog-mask").html(c),this._renderMarkUpSuccess("#dialog-mask","#dialog"),this._attachPostRenderHandler(),d("#dialog").attr("tabindex",-1).focus())},_renderReportSuccess:function(){var a=this._stack[this._stack.length-1];p().hideSpinner(this._$dialog.find(".dialog-body"));this._updateContent(this._config.successTemplate,
g.extend({},this._state,this._config,a),this._dustRenderSuccess);this._config.callbacks.submitSuccess()},_track:function(a,c){var b=c||{},d="unknown";document.body.id&&(d=document.body.id.substring(8));b={requestHeader:{pageKey:d},action:"CLICK",sponsoredFlag:"ORGANIC",moduleKey:a,customProperties:b};m&&m.trackUnifiedAction(b)},_updateContent:function(a,c,b){dust.render(a,c,b)},_optionSelected:function(a){var c=d(a.currentTarget),b=c.data("tracking-id")||c.parent().data("tracking-id"),h=c.data("option-index"),
e=c.attr("href")||c.data("option-url"),f=c.data("open-link-url"),k=this._stack[this._stack.length-1];a.preventDefault();b?(k.options&&(k=k.options[h].section||k.options[h].action,this._state.pageCount+=1,this._stack.push(k)),e?(n=!0,p().showSpinner(this._$dialog.find(".dialog-body")),a=c.parents().hasClass("additional-actions"),b={url:e,trackingId:b},a||(b.success=this._renderReportSuccess),this._postAndTrackUrl(b),a&&this.destroy()):f?(n=!0,this._openAndTrackUrl({url:f,trackingId:b}),this.close()):
(this._track(b),this._updateContent(this._config.dialogTemplate,g.extend({},this._state,this._config,k),this._dustRenderSuccess)),c.off("click",this._optionSelected),c.off("keypress",this._optionSelected)):this._config.callback.submitFailure(Error("trackingId is missing"))},_backButtonClickHandler:function(a){this._stack.pop();this._state.pageCount-=1;a=this._stack[this._stack.length-1];this._track(l.dialogBackButton);this._updateContent(this._config.dialogTemplate,g.extend({},this._state,this._config,
a),this._dustRenderSuccess)},_beforeCloseHandler:function(a){this._track(n?l.dialogClose:l.dialogCancel);this.detachEventListeners()},open:function(){var a=this._config.externalsPath||("davinci"===this._config.style?"scss/modules/dialog/spam_report_dialog":"scss/modules/dialog/_spam_report_dialog_art_deco");this._stack=[];this._state={pageCount:1};this._config.cssPreloaded?e.open.call(this):this.loadCss(["css!"+a]).then(g.bind(e.open,this));n=!1},_attachPostRenderHandler:function(){var a=this;d("#dialog .dialog-body dl.option").keypress(function(c){13!==
c.keyCode&&32!==c.keyCode||a._optionSelected(c)});d("#dialog .dialog-body dl.option").on("click",this._optionSelected);d("#dialog .back").on("click",this._backButtonClickHandler);d(".action-options .option a").on("click",this._optionSelected);this._attachEventListeners()},_postAndTrackUrl:function(a){var c;LI&&LI.readCookie&&(c=(LI.readCookie("JSESSIONID")||"").replace(/"/g,""));d.ajax({url:a.url,method:"POST",headers:{"X-IsAJAXForm":1},data:c,success:function(){this._track(a.trackingId);a.success&&
a.success()}.bind(this),error:function(b,c,d){(a.error||this._config.callbacks.submitFailure)(d)}.bind(this)})},_openAndTrackUrl:function(a){window.open(a.url,"_blank");this._track(a.trackingId)}}});LIModules.exports("SpamReportDialog",e)})();(function(b){var c=b.requires("jquery");b.exports("Spinner",{showSpinner:function(a){0===a.children(".spinner").length?a.append(c('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e')).children(".spinner").height(a.prop("scrollHeight")):a.children(".spinner").show().height(a.prop("scrollHeight"))},hideSpinner:function(a){a.children(".spinner").hide()}})})(window.LIModules);(function(){function h(a){if("[object Array]"!==Object.prototype.toString.call(a))if("string"===typeof a)a=[a];else throw Error("_normalizeToArray can only accept an Array or String");return a}function k(){var a;a:{var b=0;a=document.cookie.split(";");for(var c=a.length,d;b<c;b++){for(d=a[b];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf("lang\x3d")){a=d.substring(5,d.length);break a}}a=null}b={language:"en",country:"US"};a&&(a=a.replace(/.*lang=([^\&"']*).*/g,"$1"),(a=/^(.{2})[-_](.{2})$/i.exec(a))&&
3===a.length&&(b.language=a[1].toLowerCase(),b.country=a[2].toUpperCase()));b.value=b.language+"_"+b.country;return b}function l(){var a=k();return a&&a.language}function f(a){a=h(a);var b;b=l();var c=a;if(Array.prototype.indexOf)b=-1!==c.indexOf(b);else{for(var d=0,g=c.length,e=!1;d<g;d++)if(b===c[d]){e=!0;break}b=e}if(!b){b=0;c=!1;if(d=location.search)for(a=h(a),g=a.length;b<g;b++)if(e="_l\x3d"+a[b],-1!==d.indexOf("?"+e)||-1!==d.indexOf("\x26"+e))c=!0;b=c}return b}function m(){return f(["zh","ja",
"ko"])}function n(a,b){var c,d,e;for(c in b)b.hasOwnProperty(c)&&(d=r(b[c]),e="{"+c+"}",null!==c.match(/^\d+$/)&&(e="\\{:?"+c+"\\}"),e=RegExp(e,"g"),a=a.replace(e,d));return a}function r(a){var b;b={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;"};return null===a||void 0===a?null:a.toString().replace(/[&<>"']/g,function(a){return b[a]})}var p=LIModules.imports("i18n")||{},q={},e={},e=function(){var a=!1,b=!1,c=["ar"];return{init:function(){a=f(c);b=m()},readsRTL:function(){return a},
readsCJK:function(){return b}}}();e.init();e={register:function(a,b){q[a]=b},get:function(a,b){var c;(c=q[a])||(c=(c=window.__li__i18n_registry__)&&c[a]||"");if(!b)return c;b&&("object"!==typeof b&&"function"!==typeof b)&&(b={0:b});return n(c,b)},getLocale:k,isCJK:m,substitute:n,getLanguage:l,containsCurrentLang:f,page:e};(function(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])})(p,e);LIModules.exports("i18n",p)})();(function(){var c=LIModules.imports("i18n"),l=function(){function e(b){return"function"===typeof b}function g(){h=c&&c.page&&c.page.readsRTL()}var k={left:"right",right:"left",ltr:"rtl",rtl:"ltr"},h;g();return{init:g,flip:function(b,d){var a;h?void 0===d?(a=b,a=e(a)?a():a,!0===a||!1===a||"[object Boolean]"===Object.prototype.toString.call(a)?a=!a:a&&k[a]&&(a=k[a])):a=e(d)?d():d:a=e(b)?b():b;return a},applyWhenRTL:function(b){return this.flip(null,b)},isRtl:function(b){function d(a,b){if(null===a)return!1;
var c=Array.prototype.indexOf;return c&&a.indexOf===c?-1!==a.indexOf(b):Array.prototype.some(a,function(a){return a===b})}if(void 0===b||null===b)return!1;for(var a=0,f,c=b.length,e=" \n\r\t\f\u00a0\u2028\u2029".split("").concat("~!@#$%^\x26*()_+`1234567890-\x3d{}|[]\\:\";'\x3c\x3e?,./".split(""));a<c&&(f=b.charAt(a),d(e,f));a++);return a>=c?!1:"\u0590"<=f&&"\u06ff">=f?!0:!1}}}();LIModules.exports("Bidi",l)})();!function(a,b){function c(a){return function(){var b={method:a},c=Array.prototype.slice.call(arguments);/^get/.test(a)?(d.assert(c.length>0,"Get methods require a callback."),c.unshift(b)):(/^set/.test(a)&&(d.assert(0!==c.length,"Set methods require a value."),b.value=c[0]),c=[b]),this.send.apply(this,c)}}var d={};d.DEBUG=!1,d.VERSION="0.0.10",d.CONTEXT="player.js",d.POST_MESSAGE=!!a.postMessage,d.ENABLE_CONTEXT=!1,d.origin=function(b){return"//"===b.substr(0,2)&&(b=a.location.protocol+b),b.split("/").slice(0,3).join("/")},d.addEvent=function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)},d.log=function(){d.log.history=d.log.history||[],d.log.history.push(arguments),a.console&&d.DEBUG&&a.console.log(Array.prototype.slice.call(arguments))},d.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)},d.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},d.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},d.isNone=function(a){return null===a||void 0===a},d.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},d.indexOf=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(Array.prototype.IndexOf&&a.indexOf===Array.prototype.IndexOf)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1},d.assert=function(a,b){if(!a)throw b||"Player.js Assert Failed"},d.Keeper=function(){this.init()},d.Keeper.prototype.init=function(){this.data={}},d.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},d.Keeper.prototype.has=function(a,b){if(!this.data.hasOwnProperty(a))return!1;if(d.isNone(b))return!0;for(var c=this.data[a],e=0;e<c.length;e++)if(c[e].id===b)return!0;return!1},d.Keeper.prototype.add=function(a,b,c,d,e){var f={id:a,event:b,cb:c,ctx:d,one:e};this.has(b)?this.data[b].push(f):this.data[b]=[f]},d.Keeper.prototype.execute=function(a,b,c,e){if(!this.has(a,b))return!1;for(var f=[],g=[],h=0;h<this.data[a].length;h++){var i=this.data[a][h];d.isNone(b)||!d.isNone(b)&&i.id===b?(g.push({cb:i.cb,ctx:i.ctx?i.ctx:e,data:c}),i.one===!1&&f.push(i)):f.push(i)}0===f.length?delete this.data[a]:this.data[a]=f;for(var j=0;j<g.length;j++){var k=g[j];k.cb.call(k.ctx,k.data)}},d.Keeper.prototype.on=function(a,b,c,d){this.add(a,b,c,d,!1)},d.Keeper.prototype.one=function(a,b,c,d){this.add(a,b,c,d,!0)},d.Keeper.prototype.off=function(a,b){var c=[];if(!this.data.hasOwnProperty(a))return c;for(var e=[],f=0;f<this.data[a].length;f++){var g=this.data[a][f];d.isNone(b)||g.cb===b?d.isNone(g.id)||c.push(g.id):e.push(g)}return 0===e.length?delete this.data[a]:this.data[a]=e,c},d.Player=function(a,b){return this instanceof d.Player?void this.init(a,b):new d.Player(a,b)},d.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},d.EVENTS.all=function(){var a=[];for(var b in d.EVENTS)d.has(d.EVENTS,b)&&d.isString(d.EVENTS[b])&&a.push(d.EVENTS[b]);return a},d.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},d.METHODS.all=function(){var a=[];for(var b in d.METHODS)d.has(d.METHODS,b)&&d.isString(d.METHODS[b])&&a.push(d.METHODS[b]);return a},d.READIED=[],d.Player.prototype.init=function(c){var e=this;d.isString(c)&&(c=b.getElementById(c)),this.elem=c,this.origin=d.origin(c.src),this.keeper=new d.Keeper,this.isReady=!1,this.queue=[],this.events=d.EVENTS.all(),this.methods=d.METHODS.all(),d.POST_MESSAGE?d.addEvent(a,"message",function(a){e.receive(a)}):d.log("Post Message is not Available."),d.indexOf(d.READIED,c.src)>-1?e.loaded=!0:this.elem.onload=function(){e.loaded=!0}},d.Player.prototype.send=function(a,b,c){if(a.context=d.CONTEXT,a.version=d.VERSION,b){var e=this.keeper.getUUID();a.listener=e,this.keeper.one(e,a.method,b,c)}return this.isReady||"ready"===a.value?(d.log("Player.send",a,this.origin),this.loaded===!0&&this.elem.contentWindow.postMessage(JSON.stringify(a),this.origin),!0):(d.log("Player.queue",a),this.queue.push(a),!1)},d.Player.prototype.receive=function(a){if(d.log("Player.receive",a),a.origin!==this.origin)return!1;var b;try{b=JSON.parse(a.data)}catch(c){return!1}return d.ENABLE_CONTEXT&&b.context!==d.CONTEXT?!1:("ready"===b.event&&b.value&&b.value.src===this.elem.src&&this.ready(b),void(this.keeper.has(b.event,b.listener)&&this.keeper.execute(b.event,b.listener,b.value,this)))},d.Player.prototype.ready=function(a){if(this.isReady===!0)return!1;a.value.events&&(this.events=a.value.events),a.value.methods&&(this.methods=a.value.methods),this.isReady=!0,this.loaded=!0;for(var b=0;b<this.queue.length;b++){var c=this.queue[b];d.log("Player.dequeue",c),"ready"===a.event&&this.keeper.execute(c.event,c.listener,!0,this),this.send(c)}this.queue=[]},d.Player.prototype.on=function(a,b,c){var d=this.keeper.getUUID();return"ready"===a?this.keeper.one(d,a,b,c):this.keeper.on(d,a,b,c),this.send({method:"addEventListener",value:a,listener:d}),!0},d.Player.prototype.off=function(a,b){var c=this.keeper.off(a,b);if(d.log("Player.off",c),c.length>0)for(var e in c)return this.send({method:"removeEventListener",value:a,listener:c[e]}),!0;return!1},d.Player.prototype.supports=function(a,b){d.assert(d.indexOf(["method","event"],a)>-1,'evtOrMethod needs to be either "event" or "method" got '+a),b=d.isArray(b)?b:[b];for(var c="event"===a?this.events:this.methods,e=0;e<b.length;e++)if(-1===d.indexOf(c,b[e]))return!1;return!0};for(var e=0,f=d.METHODS.all().length;f>e;e++){var g=d.METHODS.all()[e];d.Player.prototype.hasOwnProperty(g)||(d.Player.prototype[g]=c(g))}a.playerjs=d,d.addEvent(a,"message",function(a){var b;try{b=JSON.parse(a.data)}catch(c){return!1}return d.ENABLE_CONTEXT&&b.context!==d.CONTEXT?!1:void("ready"===b.event&&b.value&&b.value.src&&d.READIED.push(b.value.src))}),d.Receiver=function(a,b){this.init(a,b)},d.Receiver.prototype.init=function(c,e){var f=this;this.isReady=!1,this.origin=d.origin(b.referrer),this.methods={},this.supported={events:c?c:d.EVENTS.all(),methods:e?e:d.METHODS.all()},this.eventListeners={},this.reject=!(a.self!==a.top&&d.POST_MESSAGE),this.reject||d.addEvent(a,"message",function(a){f.receive(a)})},d.Receiver.prototype.receive=function(b){if(b.origin!==this.origin)return!1;var c={};if(d.isObject(b.data))c=b.data;else try{c=a.JSON.parse(b.data)}catch(e){d.log("JSON Parse Error",e)}if(d.log("Receiver.receive",b,c),!c.method)return!1;if(d.ENABLE_CONTEXT&&c.context!==d.CONTEXT)return!1;if(-1===d.indexOf(d.METHODS.all(),c.method))return this.emit("error",{code:2,msg:'Invalid Method "'+c.method+'"'}),!1;var f=d.isNone(c.listener)?null:c.listener;if("addEventListener"===c.method)this.eventListeners.hasOwnProperty(c.value)?-1===d.indexOf(this.eventListeners[c.value],f)&&this.eventListeners[c.value].push(f):this.eventListeners[c.value]=[f],"ready"===c.value&&this.isReady&&this.ready();else if("removeEventListener"===c.method){if(this.eventListeners.hasOwnProperty(c.value)){var g=d.indexOf(this.eventListeners[c.value],f);g>-1&&this.eventListeners[c.value].splice(g,1),0===this.eventListeners[c.value].length&&delete this.eventListeners[c.value]}}else this.get(c.method,c.value,f)},d.Receiver.prototype.get=function(a,b,c){var d=this;if(!this.methods.hasOwnProperty(a))return this.emit("error",{code:3,msg:'Method Not Supported"'+a+'"'}),!1;var e=this.methods[a];if("get"===a.substr(0,3)){var f=function(b){d.send(a,b,c)};e.call(this,f)}else e.call(this,b)},d.Receiver.prototype.on=function(a,b){this.methods[a]=b},d.Receiver.prototype.send=function(b,c,e){if(d.log("Receiver.send",b,c,e),this.reject)return d.log("Receiver.send.reject",b,c,e),!1;var f={context:d.CONTEXT,version:d.VERSION,event:b};d.isNone(c)||(f.value=c),d.isNone(e)||(f.listener=e);var g=JSON.stringify(f);a.parent.postMessage(g,""===this.origin?"*":this.origin)},d.Receiver.prototype.emit=function(a,b){if(!this.eventListeners.hasOwnProperty(a))return!1;d.log("Instance.emit",a,b,this.eventListeners[a]);for(var c=0;c<this.eventListeners[a].length;c++){var e=this.eventListeners[a][c];this.send(a,b,e)}return!0},d.Receiver.prototype.ready=function(){d.log("Receiver.ready"),this.isReady=!0;var b={src:a.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",b)||this.send("ready",b)},d.HTML5Adapter=function(a){return this instanceof d.HTML5Adapter?void this.init(a):new d.HTML5Adapter(a)},d.HTML5Adapter.prototype.init=function(a){d.assert(a,"playerjs.VideoJSReceiver requires a video element");var b=this.receiver=new d.Receiver;a.addEventListener("playing",function(){b.emit("play")}),a.addEventListener("pause",function(){b.emit("pause")}),a.addEventListener("ended",function(){b.emit("ended")}),a.addEventListener("timeupdate",function(){b.emit("timeupdate",{seconds:a.currentTime,duration:a.duration})}),a.addEventListener("progress",function(){b.emit("buffered",{percent:a.buffered.length})}),b.on("play",function(){a.play()}),b.on("pause",function(){a.pause()}),b.on("getPaused",function(b){b(a.paused)}),b.on("getCurrentTime",function(b){b(a.currentTime)}),b.on("setCurrentTime",function(b){a.currentTime=b}),b.on("getDuration",function(b){b(a.duration)}),b.on("getVolume",function(b){b(100*a.volume)}),b.on("setVolume",function(b){a.volume=b/100}),b.on("mute",function(){a.muted=!0}),b.on("unmute",function(){a.muted=!1}),b.on("getMuted",function(b){b(a.muted)}),b.on("getLoop",function(b){b(a.loop)}),b.on("setLoop",function(b){a.loop=b})},d.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},d.JWPlayerAdapter=function(a){return this instanceof d.JWPlayerAdapter?void this.init(a):new d.JWPlayerAdapter(a)},d.JWPlayerAdapter.prototype.init=function(a){d.assert(a,"playerjs.JWPlayerAdapter requires a player object");var b=this.receiver=new d.Receiver;this.looped=!1,a.onPause(function(){b.emit("pause")}),a.onPlay(function(){b.emit("play")}),a.onTime(function(a){var c=a.position,d=a.duration;if(!c||!d)return!1;var e={seconds:c,duration:d};b.emit("timeupdate",e)});var c=this;a.onComplete(function(){c.looped===!0?a.seek(0):b.emit("ended")}),a.onError(function(){b.emit("error")}),b.on("play",function(){a.play(!0)}),b.on("pause",function(){a.pause(!0)}),b.on("getPaused",function(b){b("PLAYING"!==a.getState())}),b.on("getCurrentTime",function(b){b(a.getPosition())}),b.on("setCurrentTime",function(b){a.seek(b)}),b.on("getDuration",function(b){b(a.getDuration())}),b.on("getVolume",function(b){b(a.getVolume())}),b.on("setVolume",function(b){a.setVolume(b)}),b.on("mute",function(){a.setMute(!0)}),b.on("unmute",function(){a.setMute(!1)}),b.on("getMuted",function(b){b(a.getMute()===!0)}),b.on("getLoop",function(a){a(this.looped)},this),b.on("setLoop",function(a){this.looped=a},this)},d.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},d.MockAdapter=function(){return this instanceof d.MockAdapter?void this.init():new d.MockAdapter},d.MockAdapter.prototype.init=function(){var a={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){a.interval=setInterval(function(){a.currentTime+=.25,a.timeupdate({seconds:a.currentTime,duration:a.duration})},250),a.playing=!0},pause:function(){clearInterval(a.interval),a.playing=!1}},b=this.receiver=new d.Receiver;b.on("play",function(){var b=this;a.play(),this.emit("play"),a.timeupdate=function(a){b.emit("timeupdate",a)}}),b.on("pause",function(){a.pause(),this.emit("pause")}),b.on("getPaused",function(b){b(!a.playing)}),b.on("getCurrentTime",function(b){b(a.currentTime)}),b.on("setCurrentTime",function(b){a.currentTime=b}),b.on("getDuration",function(b){b(a.duration)}),b.on("getVolume",function(b){b(a.volume)}),b.on("setVolume",function(b){a.volume=b}),b.on("mute",function(){a.mute=!0}),b.on("unmute",function(){a.mute=!1}),b.on("getMuted",function(b){b(a.mute)}),b.on("getLoop",function(b){b(a.loop)}),b.on("setLoop",function(b){a.loop=b})},d.MockAdapter.prototype.ready=function(){this.receiver.ready()},d.SublimeAdapter=function(a){return this instanceof d.SublimeAdapter?void this.init(a):new d.SublimeAdapter(a)},d.SublimeAdapter.prototype.events=[d.EVENTS.READY,d.EVENTS.PLAY,d.EVENTS.PAUSE,d.EVENTS.ENDED,d.EVENTS.TIMEUPDATE,d.EVENTS.ERROR],d.SublimeAdapter.prototype.methods=[d.METHODS.PLAY,d.METHODS.PAUSE,d.METHODS.GETDURATION,d.METHODS.SETCURRENTTIME,d.METHODS.GETCURRENTTIME,d.METHODS.REMOVEEVENTLISTENER,d.METHODS.ADDEVENTLISTENER],d.SublimeAdapter.prototype.init=function(a){d.assert(a,"playerjs.SublimeAdapter requires a player object");var b=this.receiver=new d.Receiver(this.events,this.methods);a.on("pause",function(){b.emit("pause")}),a.on("play",function(){b.emit("play")}),a.on("timeUpdate",function(a,c){var d=a.duration();if(!c||!d)return!1;var e={seconds:c,duration:d};b.emit("timeupdate",e)}),a.on("end",function(){b.emit("ended")}),b.on("play",function(){a.play()}),b.on("pause",function(){a.pause()}),b.on("getCurrentTime",function(b){b(a.playbackTime())}),b.on("setCurrentTime",function(b){a.seekTo(b)}),b.on("getDuration",function(b){b(a.duration())})},d.SublimeAdapter.prototype.ready=function(){this.receiver.ready()},d.VideoJSAdapter=function(a){return this instanceof d.VideoJSAdapter?void this.init(a):new d.VideoJSAdapter(a)},d.VideoJSAdapter.prototype.init=function(a){d.assert(a,"playerjs.VideoJSReceiver requires a player object");var b=this.receiver=new d.Receiver;a.on("pause",function(){b.emit("pause")}),a.on("play",function(){b.emit("play")}),a.on("timeupdate",function(){var c=a.currentTime(),d=a.duration();if(!c||!d)return!1;var e={seconds:c,duration:d};b.emit("timeupdate",e)}),a.on("ended",function(){b.emit("ended")}),a.on("error",function(){b.emit("error")}),b.on("play",function(){a.play()}),b.on("pause",function(){a.pause()}),b.on("getPaused",function(b){b(a.paused())}),b.on("getCurrentTime",function(b){b(a.currentTime())}),b.on("setCurrentTime",function(b){a.currentTime(b)}),b.on("getDuration",function(b){b(a.duration())}),b.on("getVolume",function(b){b(100*a.volume())}),b.on("setVolume",function(b){a.volume(b/100)}),b.on("mute",function(){a.volume(0)}),b.on("unmute",function(){a.volume(1)}),b.on("getMuted",function(b){b(0===a.volume())}),b.on("getLoop",function(b){b(a.loop())}),b.on("setLoop",function(b){a.loop(b)})},d.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document);