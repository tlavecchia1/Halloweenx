(function(a,b){a("playerjs",b.requires("playerjs"));a("webTrackingTransport",require("liTrackClient"))})(define,LIModules);(function(){var a=LIModules.requires("BaseControl"),d=LIModules.requires("jquery"),f=LIModules.requires("underscore"),g=LIModules.requires("OzTooltip"),a=a.extend(function(a){var b;b={dataAttribute:"li-tooltip-id"};return{beforeDecoration:function(){this._config=f.defaults(this._config,b);this._tooltipList={}},attachEventListeners:function(){this._$el.on("mouseover focus",this._getSelectorString(),this._instantiateTooltip)},_getFullDataAttribute:function(){return"data-"+this._config.dataAttribute},
_getSelectorString:function(){return"["+this._getFullDataAttribute()+"]"},_instantiateTooltip:function(e){var a=e.target,c=d(a).attr(this._getFullDataAttribute()),b;b=jQuery.extend({},this._config,{tooltipContentID:c});c&&!this._tooltipList[c]&&(this._tooltipList[c]=new g(a,b),this._tooltipList[c].isReady.then(function(){d(a).triggerHandler(e.type)}))},detachEventListeners:function(){this._$el.off("mouseover focus",this._getSelectorString(),this._instantiateTooltip)},destroy:function(){this.detachEventListeners();
for(var a in this._tooltipList)this._tooltipList[a].destroy(),delete this._tooltipList[a]}}});LIModules.exports("OzTooltipFactory",a)})();function WebTrack(){function g(a){var b="",c=[],d;if("string"===typeof a)b=a;else if("object"===typeof a){for(d in a)c.push(d+":"+a[d]);b=c.join("|")}return b}this.createRequestData=function(a,b,c,d,f){var e=["pkey\x3d"+escape(LI.getPageKey())];e.push("tcode\x3d"+escape(a));e.push("plist\x3d"+escape(g(b)));"string"===typeof d&&e.push("cId\x3d"+escape(d));"undefined"!==typeof c&&c&&e.push("prefix\x3dfalse");"undefined"!==typeof f&&f&&e.push("evt\x3d"+escape(f));return e.join("\x26")};this.trackUserAction=
function(a,b,c,d,f){WebTracking.saveWebActionTrackURL&&(a=WebTracking.createRequestData(a,b,c,d,f),LI.asyncRequest("POST",WebTracking.saveWebActionTrackURL,{custom:{exception:function(){return!1}},timeout:3E3},a))};this.trackUserImpression=function(a,b,c,d){this.trackUserAction(a,b,c,d,"imp")};this.trackWithCallback=function(a,b,c,d,f,e){WebTracking.saveWebActionTrackURL?(a=this.createRequestData(a,b,f,e),b={custom:{exception:function(){return!1}},timeout:3E3},"undefined"!==typeof c&&null!==c&&(b.success=
c),"undefined"!==typeof d&&null!==d&&(b.failure=d,b.custom.exception=d),LI.asyncRequest("POST",WebTracking.saveWebActionTrackURL,b,a)):c&&c()};this.trackBeforeNavigation=function(a,b,c,d,f){var e;e=function(){window.location.href=b};WebTracking.saveWebActionTrackURL?(a=this.createRequestData(a,c,d,f),e={success:e,failure:e,custom:{exception:function(){return!1}},timeout:3E3},LI.asyncRequest("POST",WebTracking.saveWebActionTrackURL,e,a)):e()}}window.WebTracking=new WebTrack;(function(c,e){if("function"===typeof define&&define.amd)define("VideoTrackingAdaptor",["exports","webTrackingTransport"],e);else if("undefined"!==typeof exports)e(exports,require("webTrackingTransport"));else{var g={};e(g,c.webTrackingTransport);c.VideoTrackingAdaptor=g}})(this,function(c,e){Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function c(b,a){for(var f=0;f<a.length;f++){var d=a[f];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,
d.key,d)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),k=e&&e.__esModule?e:{"default":e},h="mediaUrn length mediaViewTrackingId volume timeElapsed isPlaying".split(" "),l=["objectUrn","trackingId"],m={ENTERED_VIEWPORT:"ENTERED_VIEWPORT",EXITED_VIEWPORT:"EXITED_VIEWPORT",USER_TRIGGERED:"USER_TRIGGERED",VIDEO_PRIORITY_CHANGED:"VIDEO_PRIORITY_CHANGED"};c.PLAYER_PLAY_PAUSE_EVENT="PlayerPlayPauseEvent";c.PLAYER_POSITION_CHANGED_EVENT="PlayerPositionChangedEvent";c.PLAYER_SEEK_EVENT=
"PlayerSeekEvent";c.PLAYER_VOLUME_CHANGED_EVENT="PlayerVolumeChangedEvent";c.PLAYER_QUALITY_EVENT="PlayerQualityEvent";c.PLAYER_FULLSCREEN_EVENT="PlayerFullscreenEvent";c.STATE_FIELDS=h;c.MEDIA_TRACKING_OBJECT_FIELDS=l;c.PLAYER_STATE_CHANGED_REASONS=m;var n=function(){function c(b,a,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");k["default"].setAppId(b);k["default"].maxQueueSize=3;this._state={};this._mediaTrackingObject={};this.requestHeader=a;this.mobileHeader=
f}g(c,[{key:"constructPlayerPositionChangedEvent",value:function(b){return{requestHeader:this.requestHeader,mobileHeader:this.mobileHeader,state:this.state,mediaTrackingObject:this.hasMediaTrackingId?this.mediaTrackingObject:null}}},{key:"constructPlayerPlayPauseEvent",value:function(b){var a=this.constructPlayerPositionChangedEvent();if(!m[b])throw Error("The reason for a player change event must be a valid PlayPauseChangedReason enum value.");a.reason=b;return a}},{key:"constructPlayerSeekEvent",
value:function(b){var a=this.constructPlayerPositionChangedEvent();a.previousTimeElapsed=b;return a}},{key:"constructPlayerVolumeChangedEvent",value:function(b){var a=this.constructPlayerPositionChangedEvent();a.previousVolume=b;return a}},{key:"_constructSchema",value:function(b,a){return{eventInfo:{eventName:b,appId:this.appId},eventBody:a}}},{key:"trackPlayerEvent",value:function(b){for(var a=arguments.length,c=Array(1<a?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];a=this._constructSchema(b,this["construct"+
b].apply(this,c));k["default"].track(a)}},{key:"state",set:function(b){for(var a in b)b.hasOwnProperty(a)&&-1<=h.indexOf(a)&&(this._state[a]=b[a])},get:function(){var b=this,a={};h.forEach(function(c){b._state.hasOwnProperty(c)&&-1<=h.indexOf(c)&&(a[c]=b._state[c])});return a}},{key:"mediaTrackingObject",set:function(b){for(var a in b)b.hasOwnProperty(a)&&-1<=l.indexOf(a)&&(this._mediaTrackingObject[a]=b[a])},get:function(){var b=this,a={};l.forEach(function(c){-1<=b._mediaTrackingObject.hasOwnProperty(c)&&
(a[c]=b._mediaTrackingObject[c])});return a}},{key:"hasMediaTrackingId",get:function(){return this._mediaTrackingObject&&this._mediaTrackingObject.trackingId}}]);return c}();c["default"]=n});(function(g,a){if("function"===typeof define&&define.amd)define("PlayerjsTrackingAdaptor",["exports","playerjs","VideoTrackingAdaptor"],a);else if("undefined"!==typeof exports)a(exports,require("playerjs"),require("VideoTrackingAdaptor"));else{var d={};a(d,g.playerjs,g.VideoTrackingAdaptor);g.PlayerjsTrackingAdaptor=d}})(this,function(g,a,d){Object.defineProperty(g,"__esModule",{value:!0});g["default"]=function(c,a){function g(l){b.state={volume:l};l!==m&&b.trackPlayerEvent(d.PLAYER_VOLUME_CHANGED_EVENT,
m);m=l}function w(){c.getMuted(function(b){b?g(0):c.getVolume(function(b){g(b)})})}function q(){h=setInterval(w,r);k=setInterval(function(){b.state.isPlaying&&b.trackPlayerEvent(d.PLAYER_POSITION_CHANGED_EVENT)},r)}function n(){h=clearInterval(h);k=clearInterval(k)}var e=this,x=a.mediaViewTrackingId,y=a.sessionTrackingId,s=a.mediaUrn,t=a.beaconFrequency,r=void 0===t?3E3:t,u=d.PLAYER_STATE_CHANGED_REASONS.USER_TRIGGERED,v=!1,m=0,p=0,b=new z["default"](a.appId,a.requestHeader,a.mobileRequestHeader),
h,k;this._trackingAdaptor=b;b.state={mediaUrn:s,mediaViewTrackingId:x};b.mediaTrackingObject={objectUrn:s,trackingId:y};c.getVolume(function(a){b.state={volume:a,isPlaying:!!b.state.isPlaying}});c.getDuration(function(a){b.state={length:a}});c.getCurrentTime(function(a){b.state={timeElapsed:a}});this.onSeeked=function(a){b.trackPlayerEvent(d.PLAYER_SEEK_EVENT,a)}.bind(this);this.onTimeUpdate=function(a){if("object"===typeof a){var c=a.seconds;b.state={timeElapsed:c,length:a.duration};if(!v&&3<=Math.abs(c-
p))this.onSeeked(p);p=c}}.bind(this);this.onPlay=function(){h&&k||(n(),q());b.state={isPlaying:!0};b.trackPlayerEvent(d.PLAYER_PLAY_PAUSE_EVENT,e.reason)}.bind(this);this.onPause=function(){b.state={isPlaying:!1};b.trackPlayerEvent(d.PLAYER_PLAY_PAUSE_EVENT,e.reason)}.bind(this);this.onEnded=function(){b.state={isPlaying:!1};n();b.trackPlayerEvent(d.PLAYER_POSITION_CHANGED_EVENT)}.bind(this);this.unbindEvents=function(){c.off(f.TIMEUPDATE,e.onTimeUpdate);c.off(f.PLAY,e.onPlay);c.off(f.PAUSE,e.onPause);
c.off(f.ENDED,e.onEnded);c.off(f.SEEKED,e.onSeeked)}.bind(this);this.destroy=function(){n();b=null;e.unbindEvents()}.bind(this);c.on(f.READY,function(){c.on(f.TIMEUPDATE,e.onTimeUpdate);c.on(f.PLAY,e.onPlay);c.on(f.PAUSE,e.onPause);c.on(f.ENDED,e.onEnded);c.supports("event",f.SEEKED)&&(v=!0,c.on(f.SEEKED,e.onSeeked));q()}.bind(this));Object.defineProperty(this,"reason",{set:function(a){u=a},get:function(){return u}})};a=a&&a.__esModule?a:{"default":a};var z=d&&d.__esModule?d:{"default":d};Object.defineProperty(g,
"PLAYER_STATE_CHANGED_REASONS",{enumerable:!0,get:function(){return d.PLAYER_STATE_CHANGED_REASONS}});var f=a["default"].EVENTS});/* Auto generated, hash = 62oid2b0hklwk4ep3h8ctgn79 */
LI.define("Slider");
LI.Slider=LI.BaseControl.extend(function(f){var b={max:100,min:0,increment:1,start:0};return{beforeDecoration:function(){this._config=_.defaults(this._config,b);this.$dial=this._$el.find("input[type\x3dimage]");this._$sliderBar=this.$dial.parent();this._sliderWidth=this._$sliderBar.innerWidth();this._dialWidth=this.$dial.innerWidth();this._$legend=this._$el.find("legend");this._legendText=LI.htmlEncode($(this._$legend).text());this.$highlightedRange=this._$el.find(".highlighted-range")},afterDecoration:function(){this._setUpOptionsAndCurrent();
this._setUpTickMarks()},attachEventListeners:function(){this._$el.on("click",this.handleClick);this._$el.on("keyup",this.handleKeyUp);this._$el.on("keydown",this.handleKeyDown);this.$dial.on("mousedown",this.handleMouseDown)},getDialWidth:function(){return this._dialWidth},removeClickListener:function(){this._$el.off("click",this.handleClick)},updateAriaMin:function(a){this.$dial.attr({"aria-valuemin":a})},updateAriaMax:function(a){this.$dial.attr({"aria-valuemax":a})},getOptions:function(){return this._options},
getLegendText:function(){return $(this._$legend).text()},getCurrentVal:function(){return this._currentVal},setCurrentValue:function(a){this._currentVal=a;this._setDialPosition()},_setUpOptionsAndCurrent:function(){var a=this._config.min,b=0;this._options=[];this._gap=(this._sliderWidth-this._dialWidth)/((this._config.max-this._config.min)/this._config.increment);this._currentVal=0;for(a;a<=this._config.max;a+=this._config.increment)this._config.start===a&&(this._currentVal=this._options.length),this._options.push({distance:b,
meaning:a}),b+=this._gap;this._numOptions=this._options.length;20<=this._numOptions&&(this.tenth=Math.floor(this._numOptions/10));this.$dial.attr({"aria-valuemin":this._config.min,"aria-valuemax":this._config.max})},_setUpTickMarks:function(){this._setDialPosition()},_setDialPosition:function(){this.$dial.css("left",this._options[this._currentVal].distance+"px");this._updateValues()},_updateValues:function(){var a=this._$el.find("input[type\x3dtext]"),b=this._options[this._currentVal].meaning,c=this._legendText+
" "+b;a&&a.val(b);this.$dial.val(b);this._$legend.text(c);this.$dial.attr({title:c,"aria-valuetext":c,"aria-valuenow":b})},handleClick:function(a){$(a.target).is(this._$sliderBar)&&this._goToClosestTickMark(a)},handleKeyDown:function(a){0<[37,39,36,35,33,34].indexOf(a.which)&&a.preventDefault()},handleKeyUp:function(a){if($(a.target).is(this.$dial))switch(a.which){case 37:this.handleLeftKey();break;case 39:this.handleRightKey();break;case 36:this.handleHomeKey();break;case 35:this.handleEndKey();
break;case 33:this.handlePageUpKey();break;case 34:this.handlePageDownKey()}},handleLeftKey:function(){0<this._currentVal&&(this._currentVal--,this._setDialPosition())},handleRightKey:function(){this._currentVal<this._numOptions-1&&(this._currentVal++,this._setDialPosition())},handleHomeKey:function(){this._currentVal=0;this._setDialPosition()},handleEndKey:function(){this._currentVal=this._numOptions-1;this._setDialPosition()},handlePageUpKey:function(){this.tenth&&this._currentVal+this.tenth<=this._numOptions-
1&&(this._currentVal+=this.tenth,this._setDialPosition())},handlePageDownKey:function(){this.tenth&&0<=this._currentVal-this.tenth&&(this._currentVal-=this.tenth,this._setDialPosition())},handleMouseDown:function(a){if(this._gap&&this._gap<this._dialWidth)$(document.body).on("mousemove",this.handleMouseMove);$(document).on("mouseup",this.handleMouseUp)},handleMouseMove:function(a){$(a.target);var b=a.pageX-this._dialWidth/2,c=b-this._$sliderBar.offset().left;a.preventDefault();b>this._$sliderBar.offset().left&&
b<this._$sliderBar.offset().left+this._$sliderBar.innerWidth()-this._dialWidth&&(this.$dial.css("left",c+"px"),c>=this._options[this._currentVal].distance+this._gap?(this._currentVal++,this._updateValues()):c<=this._options[this._currentVal].distance-this._gap&&(this._currentVal--,this._updateValues()))},handleMouseUp:function(a){$(document.body).off("mousemove",this.handleMouseMove);$(document).off("mouseup",this.handleMouseUp);this._goToClosestTickMark(a)},_goToClosestTickMark:function(a){a=a.pageX-
this._dialWidth/2;var b,c,e=1;b=Math.abs(this._$sliderBar.offset().left+this._options[0].distance-a);c=[0,b];for(e;e<this._numOptions;e++)b=Math.abs(this._$sliderBar.offset().left+this._options[e].distance-a),b<c[1]&&(c[0]=e,c[1]=b),e===this._numOptions-1&&(this._currentVal=c[0],this._setDialPosition())}}});LI.define("TickedSlider");
LI.TickedSlider=LI.Slider.extend(function(f){return{_setUpOptionsAndCurrent:function(){this._$radios=this._$el.find("input[type\x3dradio]");this.$labels=this._$el.find("label");this.$highlightedRange=this._$el.find(".highlighted-range");this._numOptions=this._$radios.length;this._currentVal=0;this.$dial=this._$el.find("input[type\x3dimage]");this._dialWidth=this.$dial.innerWidth();this._$sliderBar=this.$dial.parent();this._sliderWidth=this._$sliderBar.innerWidth();this._options=[];this.$dial.attr({"aria-valuemin":1,
"aria-valuemax":this._numOptions})},attachEventListeners:function(){this._$sliderBar.on("click",this.handleClick);this.$highlightedRange.on("click",this.handleClick);this._$radios.on("click",this.handleClick);this._$el.on("keyup",this.handleKeyUp);this._$el.on("keydown",this.handleKeyDown);this.$dial.on("mousedown",this.handleMouseDown);this._$sliderBar.on("mousedown",this.handleMouseDown)},_updateValues:function(){var b=this._options[this._currentVal].meaning,a=this._legendText+" "+b,a=LI.htmlUnencode(a),
a=$.trim(a);this.$dial.val(b);this._$legend.text(a);this.$dial.attr({title:a,"aria-valuetext":a,"aria-valuenow":this._currentVal+1});$(this._$radios[this._currentVal]).prop("checked",!0)},_setUpTickMarks:function(){var b=0,a=(this._sliderWidth-this._dialWidth)/(this._numOptions-1),d=this._dialWidth/2;for(b;b<this._numOptions;b++)this._options.push({distance:d,meaning:LI.htmlEncode($(this.$labels[b]).text())}),$(this._$radios[b]).css("left",this._options[b].distance+"px"),$(this._$radios[b]).attr("data-index",
b),d+=a,$(this._$radios[b]).attr("checked")&&(this._currentVal=b);this._gap=this._options[1].distance-this._options[0].distance;this._setDialPosition()},_setDialPosition:function(){this.$dial.css("left",this._options[this._currentVal].distance-this._dialWidth/2+"px");this._updateValues()},_resetCheckedRadio:function(b){b=parseInt(b,10);$(this._$radios[this._currentVal]).prop("checked",!1);this._currentVal=parseInt(b,10);$(this._$radios[this._currentVal]).prop("checked",!0);this._setDialPosition()},
getDialWidth:function(){return this._dialWidth},handleClick:function(b){var a=$(b.target);a.is("input[type\x3dradio]")?this._resetCheckedRadio($(a).attr("data-index")):(a.is(this._$sliderBar)||a.is(this.$highlightedRange))&&this._goToClosestTickMark(b)},handleKeyDown:function(b){0<[37,39,36,35,33,34].indexOf(b.which)&&b.preventDefault()},handleKeyUp:function(b){if($(b.target).is(this.$dial))switch(b.which){case 37:this.handleLeftKey();break;case 39:this.handleRightKey();break;case 36:this.handleHomeKey();
break;case 35:this.handleEndKey();break;case 33:this.handlePageUpKey();break;case 34:this.handlePageDownKey()}},handleLeftKey:function(){0<this._currentVal&&(this._currentVal--,this._setDialPosition())},handleRightKey:function(){this._currentVal<this._numOptions-1&&(this._currentVal++,this._setDialPosition())},handleHomeKey:function(){this._currentVal=0;this._setDialPosition()},handleEndKey:function(){this._currentVal=this._numOptions-1;this._setDialPosition()},handlePageUpKey:function(){this.tenth&&
this._currentVal+this.tenth<=this._numOptions-1&&(this._currentVal+=this.tenth,this._setDialPosition())},handlePageDownKey:function(){this.tenth&&0<=this._currentVal-this.tenth&&(this._currentVal-=this.tenth,this._setDialPosition())},handleMouseDown:function(b){$(document.body).on("mousemove",this.handleMouseMove);$(document).on("mouseup",this.handleMouseUp)},handleMouseMove:function(b){$(b.target);var a=b.pageX-this._dialWidth/2,d=a-this._$sliderBar.offset().left,c=this._gap/2;b.preventDefault();
a>this._$sliderBar.offset().left&&a<this._$sliderBar.offset().left+this._$sliderBar.innerWidth()-this._dialWidth&&(this.$dial.css("left",d+"px"),d>=this._options[this._currentVal].distance+c?(this._currentVal++,this._updateValues()):d<=this._options[this._currentVal].distance-c&&(this._currentVal--,this._updateValues()))},handleMouseUp:function(b){$(document.body).off("mousemove",this.handleMouseMove);$(document).off("mouseup",this.handleMouseUp);this._goToClosestTickMark(b)},_goToClosestTickMark:function(b){b=
b.pageX-this._dialWidth/2;var a,d,c=1;a=Math.abs(this._$sliderBar.offset().left+this._options[0].distance-b);d=[0,a];for(c;c<this._numOptions;c++)a=Math.abs(this._$sliderBar.offset().left+this._options[c].distance-b),a<d[1]&&(d[0]=c,d[1]=a),c===this._numOptions-1&&(this._currentVal=d[0],this._setDialPosition())}}});
LI.define("DoubleSlider");
LI.DoubleSlider=LI.BaseControl.extend(function(f){var e={max:100,min:0,increment:1,start:0,isTicked:!1};return{beforeDecoration:function(){this._config=_.defaults(this._config,e);this._isTicked=this._config.isTicked;this._$slider1El=this._$el.find(".slider.min");if(1!==this._$slider1El.length)throw"1 min slider is required";this._$slider2El=this._$el.find(".slider.max");if(1!==this._$slider2El.length)throw"1 max slider is required";this._$legends=this._$el.find(".slider-legend");if(2===this._$legends.length)this._legend1=
this._$legends[0],this._legend2=this._$legends[1];else throw"2 slider legends are required";this._slider1={};this._slider2={};this._$slider1El.find("input[type\x3dradio]").length&&(this._isTicked=!0)},afterDecoration:function(){this._isTicked?(this._slider1=new LI.TickedSlider(this._$slider1El,this._config),this._slider2=new LI.TickedSlider(this._$slider2El,this._config)):(this._slider1=new LI.Slider(this._$slider1El,this._config),this._slider2=new LI.Slider(this._$slider2El,this._config));this._slider1.removeClickListener();
this._slider2.removeClickListener();this._slider1.after("_setDialPosition",this._calibrate);this._slider1.after("handleMouseMove",this._calibrateMinValue);this._slider1.after("_goToClosestTickMark",this._updateRange);this._slider2.after("_setDialPosition",this._calibrate);this._slider2.after("handleMouseMove",this._calibrateMaxValue);this._slider2.after("_goToClosestTickMark",this._updateRange);this._slider2.isReady.then(this._updateRange())},_calibrate:function(){this._slider1.getCurrentVal()>this._slider2.getCurrentVal()?
this._slider1.setCurrentValue(this._slider2.getCurrentVal()):this._slider2.getCurrentVal()<this._slider1.getCurrentVal()&&this._slider2.setCurrentValue(this._slider1.getCurrentVal());this._updateAria();this._updateRange()},_updateAria:function(){this._isTicked?(this._slider1.updateAriaMax(this._slider2.getCurrentVal()+1),this._slider2.updateAriaMin(this._slider1.getCurrentVal()+1)):(this._slider1.updateAriaMax(this._slider2.getOptions()[this._slider2.getCurrentVal()].meaning),this._slider2.updateAriaMin(this._slider1.getOptions()[this._slider1.getCurrentVal()].meaning))},
_updateRange:function(){var a,b,c,d;b=this._slider1.getDialWidth()/2;c=this._slider1.$dial.position().left+b;d=this._slider2.$dial.position().left;a=this._slider1.$highlightedRange;a.css("left",c);a.css("width",d-c+b);this._updateLegend1();this._updateLegend2()},_calibrateMinValue:function(){this._slider1.$dial.position().left>this._slider2.$dial.position().left&&this._slider1.$dial.css("left",this._slider2.$dial.position().left);this._updateRange()},_calibrateMaxValue:function(){this._slider1.$dial.position().left>
this._slider2.$dial.position().left&&this._slider2.$dial.css("left",this._slider1.$dial.position().left);this._updateRange()},_updateLegend1:function(){$(this._legend1).text(this._slider1.getLegendText())},_updateLegend2:function(){$(this._legend2).text(this._slider2.getLegendText())}}});
(function(c){var e=c.requires("jquery"),d=c.requires("BaseControl"),f=c.requires("underscore"),g=c.requires("Events"),d=d.extend(function(c){var d={activeClass:"active",eventType:"click",mercyTime:400,triggerSelector:null,dropdownMenuClass:"dropdown",focusClass:null};return{beforeDecoration:function(){this._$body=e("body");this._mouseDown=!1;this._mouseoutTimer=0;this._config=e.extend({},d,this._config);this._isOpen=!1;this._$listItems=[];this._$trigger={};this._$dropMenu={};this._currentItemIndex=
-1;this.isMouseEvent=!1;this._config.triggerSelector?this._$trigger=this._$el.find(this._config.triggerSelector):(this._$trigger=this._$el.children("a"),0===this._$trigger.length&&(this._$trigger=this._$el.children("button")));this._$dropMenu=this._$trigger.next();this._populateListItems();this._bootstrapAria()},attachEventListeners:function(){if("hover"===this._config.eventType)this._$el.on("mouseover",this._handleMouseOverEvent).on("mouseout",this._handleMouseOutEvent);this._$trigger.on("mousedown",
this._handleMousedownEvent).on("click",this._handleClickEvent).on("mouseup",f.bind(this._setMouseUser,this,!0));this._$body.on("click",this._handleBodyClick);this._$el.on("keydown",this._handleKeyEvent);if(this._config.focusClass)this._$el.on("focusin",this._handleElFocusInEvent).on("focusout",this._handleElFocusOutEvent);g.on("dropdown:newitems",this.bootstrapNewItems)},_bootstrapAria:function(){this._$trigger.attr({tabindex:0,"aria-haspopup":!0,role:"button"});this._bootstrapListItems();this._$dropMenu.attr("tabindex",
-1);this._$listItems.length&&this._$dropMenu.attr("role","menu")},_bootstrapListItems:function(){this._$listItems.each(function(){e(this).attr({tabindex:0,role:"menuitem"})})},bootstrapNewItems:function(a){this._populateListItems();this._bootstrapListItems()},_setMouseUser:function(a){this.isMouseEvent=a},_populateListItems:function(){this._$listItems=this._$dropMenu.find("li, dd, dt")},_handleBodyClick:function(a){this._isOpen&&0===this._$el.has(a.target).length&&(this._setMouseUser(!0),this.close())},
_focusNext:function(){var a=this._$listItems.length;a&&(this._currentItemIndex<a-1?this._currentItemIndex++:this._currentItemIndex=0,this._$listItems[this._currentItemIndex].focus())},_focusPrevious:function(){var a=this._$listItems.length;a&&(0<this._currentItemIndex?this._currentItemIndex--:this._currentItemIndex=a-1,this._$listItems[this._currentItemIndex].focus())},_handleKeyEvent:function(a){var b=a.target;switch(a.which){case 13:e(b).is(this._$trigger)&&this._$trigger.click();break;case 32:e(b).is(this._$trigger)&&
(a.preventDefault(),this._$trigger.click());break;case 27:this._isOpen&&this.close();break;case 40:a.preventDefault();this._focusNext();break;case 38:a.preventDefault(),this._focusPrevious()}},open:function(){var a=this._config.activeClass;this._isOpen||(this._$el.addClass(a),this.isMouseEvent||this._$dropMenu.focus(),this._$el.trigger("dropdown:open",this),this._isOpen=!0)},close:function(){this._isOpen&&(this._$el.removeClass(this._config.activeClass),this._mouseoutTimer&&window.clearTimeout(this._mouseoutTimer),
this.isMouseEvent||this._$trigger.focus(),this._$el.trigger("dropdown:close",this),this._isOpen=!1,this._currentItemIndex=-1,this._setMouseUser(!1))},_handleMousedownEvent:function(a){this._mouseDown=!0},_handleElFocusInEvent:function(a){this._$el.addClass(this._config.focusClass)},_handleElFocusOutEvent:function(a){this._$el.removeClass(this._config.focusClass)},_handleClickEvent:function(a){var b;this._mouseDown=!1;if("hover"===this._config.eventType&&(b=a.target.href)&&0!==b.indexOf("#"))return;
a.preventDefault();a.stopPropagation();this._isOpen?this.close():this.open()},_handleMouseOverEvent:function(a){this._setMouseUser(!0);window.clearTimeout(this._mouseoutTimer);this.open()},_handleMouseOutEvent:function(a){a=this._config.mercyTime;var b=this;0<a?this._mouseoutTimer=window.setTimeout(function(){b.close()},a):b.close()}}});d.EVENTS={OPEN:"dropdown:open",CLOSE:"dropdown:close",NEW:"dropdown:newitems"};c.exports("Dropdown",d)})(window.LIModules);
(function(){var e=LIModules.requires("jquery"),d=function(a){var b,c,d,f={};a.closest(".feed-update").find(".list-item-entity").each(function(a){b=e(this);c=b.data("id");d=b.find(".rank-container").data("rank");f["trendingMember-id-at-position-"+a]=c;f["trendingMember-rank-at-position-"+a]=d});a.closest("[data-li-utrk-el]").attr("data-li-utrk-custom",JSON.stringify(f))},g=function(a){var b=a.closest(".comment-box").find(".mentions-input"),c;b.length&&(c=(b=(c=LIModules.imports("ozFeed"))&&c.mentions.getInstance(b))&&
b.generateMentions());b='{"numMentions":'+(c&&c.length||0)+"}";a.closest("[data-li-utrk-el]").attr("data-li-utrk-custom",b)},h={constants:{DATA_LI_UTRK_EL:"[data-li-utrk-el]",DATA_LI_UTRK_CUSTOM:"data-li-utrk-custom"},feedRoutes:{"member-post-name":{u:"actorName",n:"viewMemberProfile"},"member-name":{u:"actorName",n:"viewMemberProfile"},"member-mention-name":{u:"atMention",n:"viewMemberProfile"},"member-info-name":{u:"objectName",n:"viewMemberProfile"},"member-info-title":{u:"objectName",n:"viewMemberProfile"},
"member-post-title":{u:"actorName",n:"viewMemberProfile"},"member-connected-with-name":{u:"xConnectionName",n:"viewMemberProfile"},"member-connect-name":{u:"yConnectionName",n:"viewMemberProfile"},"member-connect-image":{u:"yConnectionPhoto",n:"viewMemberProfile"},"member-connect-title":{u:"yConnectionName",n:"viewMemberProfile"},"member-connect-member-image":{u:"objectPhoto",n:"viewMemberProfile"},"member-pymk-name":{u:"pymkName",n:"viewMemberProfile"},"member-pymk-title":{u:"pymkName",n:"viewMemberProfile"},
"member-pymk-image":{u:"pymkPhoto",n:"viewMemberProfile"},"member-commenter-name":{u:"belowFeedCommenterName",n:"viewMemberProfile"},"member-commenter-image":{u:"belowFeedCommenterPhoto",n:"viewMemberProfile"},"followed-name":{u:"followedName",n:"viewMemberProfile"},"followed-title":{u:"objectName",n:"viewMemberProfile"},"member-post-image":{u:"scanPhoto",n:"viewMemberProfile"},"member-facepile-image":{u:"facepilePhoto",n:"viewMemberProfile"},"member-image":{u:"scanPhoto",n:"viewMemberProfile"},"member-followed-image":{u:"followedPhoto",
n:"viewMemberProfile"},"member-new-profile-image":{u:"newProfilePhoto",n:"viewMemberProfile"},"member-new-background-photo":{u:"newBackgroundPhoto",n:"viewMemberProfile"},"member-new-background-photo-update-trigger":{u:"newBackgroundPhotoUpdateTrigger",n:"viewMemberProfile"},"influencer-logo":{u:"influencerLogo",n:"viewMemberProfile"},"author-name":{u:"belowViralFeedSharerName",n:"viewMemberProfile"},"member-author-name":{u:"belowViralFeedSharerName",n:"viewMemberProfile"},"member-author-image":{u:"belowViralFeedSharerPhoto",
n:"viewMemberProfile"},"company-author-image":{u:"belowViralFeedSharerPhoto",n:"viewCompanyPage"},"school-author-image":{u:"belowViralFeedSharerPhoto",n:"viewSchoolPage"},"member-author-title":{u:"belowViralFeedSharerName",n:"viewMemberProfile"},"member-influencer-image":{u:"followeePhoto",n:"viewMemberProfile"},"member-influencer-name":{u:"followeeName",n:"viewMemberProfile"},"member-influencer-title":{u:"followeeName",n:"viewMemberProfile"},"influencer-dismiss-rec":{y:"DISMISS",u:"peopleDismiss",
n:"dismissRec"},"see-more-influencers":{y:"EXPAND",u:"showMoreCTA",n:"showMore"},"member-reshare-article-name":{u:"actorName",n:"viewMemberProfile"},"company-reshare-article-name":{u:"actorName",n:"viewCompanyPage"},"school-reshare-article-name":{u:"actorName",n:"viewSchoolPage"},"reshare-article-via-member-name":{u:"reshareViaMemberName",n:"viewMemberProfile"},"reshare-article-via-company-name":{u:"reshareViaCompanyName",n:"viewCompanyPage"},"reshare-article-via-school-name":{u:"reshareViaSchoolName",
n:"viewSchoolPage"},"reshare-article-via-channel-name":{u:"reshareViaChannelName",n:"viewChannelPage"},"company-post-image":{u:"scanPhoto",n:"viewCompanyPage"},"company-facepile-image":{u:"facepilePhoto",n:"viewCompanyPage"},"company-image":{u:"companyPhoto",n:"viewCompanyPage"},"company-rec-image":{u:"scanPhoto",n:"viewCompanyFollowing"},"company-follow-image":{u:"companyPhoto",n:"viewCompanyPage"},"company-post-name":{u:"actorName",n:"viewCompanyPage"},"company-name":{u:"companyName",n:"viewCompanyPage"},
"company-mention-name":{u:"atMention",n:"viewCompanyPage"},"company-industry":{u:"companyName",n:"viewCompanyPage"},"group-name":{u:"groupName",n:"viewGroup"},"group-image":{u:"groupPhoto",n:"viewGroup"},"group-discussion-title":{u:"groupDiscussionName",n:"viewGroupDiscussion"},"job-name":{u:"jobName",n:"viewJobPage"},"job-image":{u:"scanPhoto",n:"viewJobsPage"},"job-preference-experience":{u:"JYMBII-Module-Experience-Selector",n:"ClickJYMBIIExperienceSelector",custom:function(a){a.closest("[data-li-utrk-el]").removeAttr("data-li-utrk-custom")}},
"job-preference-experience-range":{u:"JYMBII-Module-Experience-Selector-Value",n:"ClickJYMBIIExperienceSelector",custom:function(a){var b='{"minVal":'+a.attr("data-min-val")+', "maxVal":'+a.attr("data-max-val")+"}";a.closest("[data-li-utrk-el]").attr("data-li-utrk-custom",b)}},"job-preference-location":{u:"JYMBII-Module-Location-Selector",n:"ClickJYMBIILocationSelector",custom:function(a){a.closest("[data-li-utrk-el]").removeAttr("data-li-utrk-custom")}},"job-preference-location-selection":{u:"JYMBII-Module-Location-Selector-Value",
n:"ClickJYMBIILocationSelector",custom:function(a){var b='{"location":"'+a.attr("data-selected-value")+'"}';a.closest("[data-li-utrk-el]").attr("data-li-utrk-custom",b)}},"set-job-preferences":{u:"JYMBII-Module-Preference-Save",n:"ClickJYMBIIPrefSave",custom:function(a){var b=a.closest(".job-preferences"),c={};void 0!==b.attr("data-min-exp-level")&&(c.is_experience=!0,c.exp_min_level=b.attr("data-min-exp-level"),c.exp_max_level=b.attr("data-max-exp-level"));void 0!==b.attr("data-location")&&(c.is_location=
!0,c.location=b.attr("data-location"));a.closest("[data-li-utrk-el]").attr("data-li-utrk-custom",JSON.stringify(c))}},"edit-job-preferences":{u:"JYMBII-Module-Jobs-pref-link",n:"ClickJYMBIIJobsPrefRedirect"},"see-jobs":{u:"JYMBII-Module-Jobs-link",n:"ClickJYMBIIJobsRedirect"},"job-location":{u:"jobLocation",n:"viewCareersPage"},"company-jymbii-image":{u:"companyPhoto",n:"viewJobPage"},"channel-post-name":{u:"channelName",n:"viewChannelPage"},"channel-name":{u:"channelName",n:"viewChannelPage"},"channel-post-image":{u:"scanPhoto",
n:"viewChannelPage"},"channel-image":{u:"channelPhoto",n:"viewChannelPage"},"school-post-name":{u:"schoolName",n:"viewSchoolPage"},"school-author-name":{u:"belowViralFeedSharerName",n:"viewSchoolPage"},"school-card-name":{u:"schoolName",n:"viewBoardItem"},"school-name":{u:"schoolName",n:"viewSchoolPage"},"school-post-image":{u:"scanPhoto",n:"viewSchoolPage"},"school-card-image":{u:"schoolPhoto",n:"viewBoardItem"},"school-image":{u:"schoolPhoto",n:"viewSchoolPage"},"decision-board-name":{u:"decisionBoardName",
n:"viewBoard"},"decision-board-image":{u:"decisionBoardPhoto",n:"viewBoard"},"fos-name":{u:"fieldOfStudyName",n:"viewFOSPage"},"fos-card-name":{u:"fieldOfStudyName",n:"viewBoardItem"},"fos-image":{u:"fieldOfStudyPhoto",n:"viewFOSPage"},"fos-card-image":{u:"fieldOfStudyPhoto",n:"viewBoardItem"},"work-job-name":{u:"workJobName",n:"viewMemberProfile"},"pulse-logo":{u:"pulseLogo",n:"viewPulse"},"pulse-name":{u:"pulseHeadline",n:"viewPulse"},"pymk-connect-image":{u:"scanPhoto",n:"viewConnectHub"},"premium-how-you-rank-update-image":{u:"seeHYRCTA",
n:"viewHYR",custom:d},"premium-how-you-rank-image":{u:"recommendedEntity",n:"viewMemberProfile",custom:d},"premium-how-you-rank-title":{u:"recommendedEntity",n:"viewMemberProfile",custom:d},"premium-how-you-rank-recent-activity":{u:"seeRecentActivity",n:"viewMemberRecentActivity",custom:d},"premium-how-you-rank-cta":{u:"seeHYRCTA",n:"viewHYR",custom:d},"premium-how-you-rank":{u:"seeHYRCTA",n:"viewHYR",custom:d},"premium-how-you-rank-name":{u:"recommendedEntity",n:"viewMemberProfile",custom:d},"courses-logo":{u:"lyndaLogo",
n:"viewLyndaHP"},"course-photo":{u:"coursePhoto",n:"viewCoursePage"},"course-title":{u:"courseTitle",n:"viewCoursePage"},"view-course":{u:"courseCTA",n:"viewCoursePage"},"view-more-courses":{u:"seeMoreCTA",n:"seeMore"},"course-description":{u:"viewCoursePage",n:"courseDesc"},"premium-insights-update-image":{u:"recommendedEntity",n:"viewJob"},"premium-insights-headline":{u:"mentionedEntity",n:"viewJob"},"company-premium-insights-job-image":{u:"recommendedEntity",n:"viewJob"},"premium-insights-job-position":{u:"recommendedEntity",
n:"viewJob"},"premium-insights-view-job-cta":{u:"recommendedEntity",n:"viewJob"},"premium-insights-chart":{u:"recommendedEntity",n:"viewJob"},"article-title":{u:"articleTitle",n:"viewArticle"},"article-image":{u:"articlePhoto",n:"viewArticle"},"rich-media-image":{u:"richMediaObject",n:"viewRichMedia"},"video-title":{y:"PLAY",u:"videoTitle",n:"clickVideo"},"video-image":{y:"PLAY",u:"videoImage",n:"clickVideo"},"video-thumbnail-image":{y:"PLAY",u:"videoThumbnail",n:"clickVideo"},"video-player-manual":{y:"PLAY",
u:"videoPlayManual",n:"clickVideo"},"video-player-replay-manual":{y:"PLAY",u:"videoReplayManual",n:"replayVideo"},"video-player-auto-advance":{y:"PLAY",u:"videoAutoAdvance",n:"autoAdvanceVideo"},"video-player-click-change":{y:"PLAY",u:"videoClickChange",n:"clickChangeVideo"},"video-player":{y:"PLAY",u:"videoPlayInViewport",n:"autoPlayVideo"},"show-previous-comments":{y:"EXPAND",u:"belowFeedPreviousCommentsCTA",n:"expandComments"},"show-previous-replies":{y:"EXPAND",u:"previousRepliesCTA",n:"expandReplies"},
"likes-social-summary":{y:"EXPAND",u:"belowFeedLikerIcon",n:"expandLikers"},"comment-likes-social-summary":{y:"CLICK",u:"expandCommentLikers",n:"viewCommentLikers"},"comments-social-summary":{y:"EXPAND",u:"belowFeedCommenterIcon",n:"expandCommenters"},"replies-social-summary":{y:"EXPAND",u:"repliesIconCTA",n:"expandReplies"},"shares-social-summary":{y:"EXPAND",u:"otherSharers",n:"expandLikers",condition:function(a,b){return a[0]===b[0]}},link:{u:"sharedURL",n:"viewLink"},"show-more-text":{y:"EXPAND",
u:"belowFeedShowMore",n:"expandText"},"show-less-text":{u:"belowFeedShowLess",n:"collapseText"},like:{y:"LIKE",u:"belowFeedLikeCTA",n:"likeUpdate"},"comment-like":{y:"LIKE",u:"commentLikeCTA",n:"likeComment"},"pulse-like":{y:"LIKE",u:"belowPulseLikeCTA",n:"likeArticle"},"reply-like":{y:"LIKE",u:"replyLikeCTA",n:"likeReply"},"viral-like":{y:"LIKE",u:"belowViralFeedLikeCTA",n:"likeUpdate"},unlike:{y:"UNLIKE",u:"belowFeedUnlikeCTA",n:"unlikeUpdate"},"comment-unlike":{y:"UNLIKE",u:"commentUnlikeCTA",
n:"unlikeComment"},"pulse-unlike":{y:"UNLIKE",u:"belowPulseUnlikeCTA",n:"unlikeArticle"},"reply-unlike":{y:"UNLIKE",u:"replyUnlikeCTA",n:"unlikeReply"},"viral-unlike":{y:"UNLIKE",u:"belowViralFeedUnlikeCTA",n:"unlikeUpdate"},comment:{y:"EXPAND",u:"belowFeedCommentCTA",n:"expandComment"},"comment-box":{y:"EXPAND",u:"commentBoxCTA",n:"expandComment"},reply:{y:"EXPAND",u:"replyCTA",n:"expandReplyBox"},"reply-box":{y:"EXPAND",u:"replyCTA",n:"replyBoxCTA"},"pulse-comment":{y:"EXPAND",u:"belowPulseCommentCTA",
n:"expandComment"},"viral-comment":{y:"EXPAND",u:"belowViralFeedCommentCTA",n:"expandComment"},"reply-submit":{y:"COMMENT",u:"replySubmitCTA",n:"submitReply",condition:function(a){return!a.prop("disabled")},custom:g},"delete-reply":{y:"COMMENT",u:"deleteReplyCTA",n:"deleteReply"},"comment-submit":{y:"COMMENT",u:"belowFeedCommentSubmitCTA",n:"submitComment",condition:function(a){return!a.prop("disabled")},custom:g},"delete-comment":{y:"COMMENT",u:"deleteCommentCTA",n:"deleteComment"},"pulse-comment-submit":{y:"COMMENT",
u:"belowPulseCommentSubmitCTA",n:"submitComment",condition:function(a){return!a.prop("disabled")},custom:g},share:{y:"EXPAND",u:"belowFeedShareCTA",n:"expandShare"},"shareAsMessage-share":{y:"EXPAND",u:"belowFeedMessageCTA",n:"expandMessage"},"pulse-share":{y:"EXPAND",u:"belowPulseShareCTA",n:"shareArticle"},sendConnectInvite:{y:"CONNECT",u:"connectCTA",n:"connectMember"},"send-message":{y:"CLICK",u:"belowFeedMessageCTA",n:"messageMember"},connectRedirect:{y:"CLICK",u:"connectCTA",n:"viewConnectHub"},
"company-follow":{y:"FOLLOW",u:"followCTA",n:"followCompany"},"company-dismiss-rec":{y:"DISMISS",u:"companyDismiss",n:"dismissRec"},"channel-follow":{y:"FOLLOW",u:"followCTA",n:"followChannel"},"people-follow":{y:"FOLLOW",u:"followCTA",n:"followMember"},"school-follow":{y:"FOLLOW",u:"followCTA",n:"followSchool"},"join-group":{y:"JOIN",u:"joinCTA",n:"joinGroup"},"save-job":{y:"SAVE",u:"saveJobCTA",n:"saveJob"},"show-more-updates":{y:"EXPAND",u:"showMoreCTA",n:"showMore"},"show-others":{y:"EXPAND",
u:"otherSharers",n:"expandLikers"},"see-more-jobs":{u:"seeMoreCTA",n:"viewJobsPage"},"post-a-job":{u:"seeMoreCTA",n:"postAJobPage"},"post-a-job-alternative":{u:"seeMoreCTA",n:"postAJobPage"},"see-more-news":{u:"showMoreCTA",n:"viewPulse"},"see-more-companies":{y:"EXPAND",u:"showMoreCTA",n:"showMore"},"see-more-cards":{u:"seeMoreCTA",n:"viewDecisionBoard"},"see-all-updates":{u:"seeAllUpdatesCTA",n:"viewHomepage"},"see-recent-activity":{u:"identityRecentActivity",n:"viewRecentActivity"},"find-more-people":{u:"seeMoreCTA",
n:"viewConnectHub"},"view-board":{u:"viewBoardCTA",n:"viewBoard"},"view-channel":{u:"viewChannelCTA",n:"viewChannelPage"},"view-item":{u:"viewItemCTA",n:"viewBoardItem"},"view-job":{u:"viewJobCTA",n:"viewJobPage"},"view-profile":{u:"viewProfileCTA",n:"viewMemberProfile"},"view-post":{u:"viewPostCTA",n:"viewBoardDiscussion"},"view-on-board":{u:"viewOnBoardCTA",n:"viewDecisionBoard"},"view-company":{u:"viewCompanyCTA",n:"viewCompanyPage"},"see-posts":{u:"seePostsCTA",n:"viewMemberProfile"},"hide-update":{u:"hideCTA",
n:"hideUpdate"},"hide-updates-from":{y:"HIDE",u:"hideCTA",n:"hideUpdatesFrom"},"unfollow-update":{y:"UNFOLLOW",u:"unfollowCTA",n:"unfollowActor"},permalink:{y:"EXPAND",u:"permalinkCTA",n:"copyLinkToShare"},"report-update":{y:"HIDE",u:"reportCTA",n:"reportUpdate"},"report-comment":{u:"reportCTA",n:"reportComment"},"wrong-actor-button":{y:"CLICK",u:"wrongActorCTA",n:"reportWrongActor"},"promo-gta-icon":{u:"scanPhoto",n:"viewMobile"},"promo-gta-sms":{u:"getTheAppCTA",n:"sendSMS"},"promo-gta-dismiss":{y:"DISMISS",
u:"dismissCTA",n:"dismissWidget"},"promo-abook-icon":{u:"scanPhoto",n:"viewConnectHub"},"promo-abook-continue":{u:"continueCTA",n:"openABI"},"promo-abook-dismiss":{y:"DISMISS",u:"dismissCTA",n:"dismissRec"},"promo-remktg":{y:"CONTINUE",u:"wyloCTA",n:"continueWYLO"},"promo-abook-nux-dismiss":{y:"DISMISS",u:"dismissCTA",n:"dismissWidget"},"promo-end-icon":{u:"scanPhoto",n:"viewMemberProfile"},"promo-end-name":{u:"actorName",n:"viewMemberProfile"},"promo-end-photo":{u:"actorPhoto",n:"viewMemberProfile"},
"promo-end-endorse":{u:"endorseCTA",n:"endorseMember"},"promo-end-dismiss-card":{y:"DISMISS",u:"dismissCTA",n:"dismissRec"},"promo-end-dismiss-widget":{y:"DISMISS",u:"dismissCTA",n:"dismissWidget"},"promo-end-show":{u:"showMoreCTA",n:"showMore"},"flag-hide-comment":{y:"HIDE",u:"flagAndHideCTA",n:"flagAndHideComment"},"unflag-unhide-comment":{y:"UNHIDE",u:"unflagOrUnhideCTA",n:"unflagOrUnhideComment"},"scin-debug":{u:"scinDebugCTA",n:"scinDebug"},"mini-profile-view-profile":{y:"CLICK",u:"miniProfile",
n:"viewMemberProfile"},"mini-profile-connect":{y:"CONNECT",u:"miniProfile",n:"connectMember"},"mini-profile-follow":{y:"FOLLOW",u:"miniProfile",n:"followMember"},"mini-profile-send-message":{y:"CLICK ",u:"miniProfile",n:"messageMember"},"mini-profile-influencer-logo":{y:"CLICK ",u:"miniProfile",n:"influencerLogo"}},_track:function(a){var b=e(a.currentTarget),c=e(a.target),d=this.feedRoutes[b.data("trk")];a=["","l","m","r"][a.which];d?this._route(b,c,d,a):console.error("data-trk '"+b.data("trk")+"' does not exist in feedRoutes.")},
_route:function(a,b,c,d){var f=c.condition||function(){return!0},g=c.custom||e.noop;c=_.extend({y:"CLICK"},_.pick(c,"y","u","n"));f(a,b)&&(g(a,b),this._triggerClickTracking(a,e.param(c,!0),d))},_triggerClickTracking:function(a,b,c){this.tracker||(this.tracker=LIModules.requires("UserActivityTrackingInstance"));this.tracker.triggerClickTracking(b,this.tracker.getImpressionElement(a),a,c)},init:function(){e("body").on("mouseup","[data-trk]",_.bind(this._track,this))},track:function(a,b,c){b=b||a.data("trk");
(b=this.feedRoutes[b])?this._route(a,a,b,c||""):console.error("data-trk '"+$currentTargetEl.data("trk")+"' does not exist in feedRoutes.")}};e(function(){h.init()});LIModules.exports("OzFeedTrackingRouter",h)})();
(function(){var c=LIModules.requires("jquery"),e=LIModules.requires("underscore"),f=LIModules.requires("MultilineTruncation"),b={truncateAllSnippets:function(a){a=a&&a.length?a:c("#ozfeed");a.find("[data-snippet-headline-truncation]").each(function(){var a,b=c(this),d="30";a=b.parent(".snippet-link").find(".snippet");a.length&&(20>=this.offsetHeight&&(d="45"),a.attr("data-multiline-truncation-height",d),f.truncate(a[0]),a.removeAttr("data-multiline-truncation-height"));b.removeAttr("data-snippet-headline-truncation")})}};
c(function(){e.defer(b.truncateAllSnippets)});LIModules.exports("OzSnippetTruncation",b)})();
(function(){var c=LIModules.requires("jquery"),d=LIModules.requires("underscore"),k=LIModules.requires("Events"),n=LIModules.requires("UserActivityTrackingInstance"),r=LIModules.requires("OzSnippetTruncation"),p,w=LIModules.requires("OzHelpers"),x=LIModules.requires("Mentions"),m=LIModules.imports("TrackFailure"),y=LIModules.requires("OzTooltipFactory"),s=LIModules.imports("ViewportTracking"),q="scroll.ozfeed-infinitePagination",t="data-src",u=c(".header-nav .recent-activity-count"),z="/hp/activity-tracking/highlighted-update?csrfToken\x3d"+
play.getPageContextValue("csrfToken",!0),v=c(window),e=function(a){e.log("instantiate OzFeed");this.model=new Backbone.Model.extend({});this.$el=a;this._updates={};this._$updatesList=a.find(".feed.updates");this._$inViewport=c();this._prevScrollTop=0;this._$loader=a.children(".loader").hide();this._fetchingMoreUpdates=!1;this._nextUpdatesUrl=this._$updatesList.data("pagination-url");this._memberData=this._$updatesList.data("member");this._infinitePaginationModuleKey=this.$el.attr("data-infinite-scroll-module-key");
this._shareInjectModuleKey=this.$el.attr("data-inject-module-key");this._moduleKey=this.$el.attr("data-li-utrk-module");this._preRender();this._bind();d.defer(e.Util.truncateAll,a);d.defer(d.bind(this._onScroll,this));this._loadPartials();this._tooltipCounter=0;this._tooltips={};this._confirmRecentActivityCount();this._enableTrackingPixels(this.$el);this._trackHighlightedUpdates();e.log("OzFeed instantiated")};e.prototype={_bind:function(){k.on("ozfeed-newUpdates",d.bind(this._handleNewUpdates,this));
p=LIModules.requires("OzFeedUpdate");p.prototype.bindBlockEvents.call(this);this._bindScrollEvents();this._nextUpdatesUrl?this._bindInfinitePagination():this._handleFeedEnd();this._bindShareboxInjection();this._bindMentions()},_handleNewUpdates:function(a){var b=a.newUpdates;e.Util.truncateAll(b);r.truncateAllSnippets(b);this._enableTrackingPixels(b);n.fireImpressionEvents(this.$el,a.moduleKey||null);s&&s.trackFeedImpressions({fullRefresh:!0});this._onScroll()},_getUpdate:function(a){a=a.closest('li[data-update\x3d"true"]');
var b=a.data("update-id"),b=this._updates[b];!b&&a.length&&(b=new p(a),this._updates[b.id]=b);return b},_onScroll:function(){var a=this._$updatesList.find(".feed-update"),b=this._$newUpdatesList,c=v.scrollTop();this._impressUpdates(a.filter('[data-shown\x3d"false"]'));this._triggerViewportEvents(a.add(b).find("[data-viewport-trackable]"),c-this._prevScrollTop);this._prevScrollTop=c},_impressUpdates:function(a){a.each(function(){var a=c(this);e.Util.isInViewport(a)&&(a.removeAttr("data-shown"),k.fire("update-impression.feed"))})},
_triggerViewportEvents:function(a,b){function l(a,c){return a.trigger({type:c,distance:b})}var f=this._$inViewport;if(a.length||f.length){var h=a.not(f),g=a.filter(function(){var a=c(this),b=a.data("viewport-trackable");return e.Util.isInViewport(a,w.getCssDimensions(b))}),d=a.not(g),h=g.filter(h),d=d.filter(f),f=f.not(d);l(h,"enterviewport");l(d,"exitviewport");l(f,"scrollviewport");this._$inViewport=f.add(h)}},_enableTrackingPixels:function(a){function b(){f.attr("src",function(){var a=c(this),
b=f.closest("li.feed-update"),b=n.getElementPosition(b),a=play.addQueryParameter(a.attr(t),"pos",b.row);d&&(b=window.abp?window.abp.enabled.toString():"na",a=play.addQueryParameter(a,"abp",b));return a});f.removeAttr(t)}var d=!!document.querySelector("meta[name\x3ddetectAdBlock]"),f=a.find("img.tracking[data-src]").error(function(a){var b=a.target;a=b?b.src:"";b=(b=b?c(b).closest("[data-update-id]"):null)?b.attr("data-update-id"):"";m&&m.logError("TrackingPixelLoadFailure","imgSrc: "+a+"\nupdateId: "+
b)});f.length&&b()},_loadPartials:function(){this._$tooltipContainer=c('\x3cdiv class\x3d"tooltip-container"\x3e\x3c/div\x3e');this._$dialogContainer=c('\x3cdiv class\x3d"dialog-container"/\x3e');this.$el.append(this._$tooltipContainer).append(this._$dialogContainer)},_bindScrollEvents:function(){v.on("scroll",d.throttle(d.bind(this._onScroll,this),100))},_bindMentions:function(){var a=c("#ozfeed").data("isb-entitlement")?"/hp/influencer-entitlement":"/nhome/influencer-entitlement";this.mentions=
new x.Delegator(this.$el,{mentionsTL:"common-templates/mentions-play",entitlementUrl:a})},_bindInfinitePagination:function(){c(window).on(q,d.throttle(d.bind(this._handleInfinitePagination,this),100))},_handleInfinitePagination:function(){var a=c(window);!this._fetchingMoreUpdates&&a.scrollTop()+a.height()>=c(document).height()-1E3&&this._fetchMoreUpdates()},_handleFeedEnd:function(){function a(){this._$loader.hide();this.$el.append(this._$endOfFeed);c(window).off(q)}var b=c("#ozfeed.no-activities").length;
this._$endOfFeed||b?a.call(this):dust.render("ozfeed-templates/partials/end-of-feed/_no-more-updates",{},d.bind(function(b,d){this._$endOfFeed=c(d);a.call(this)},this))},_insertNewUpdates:function(a){dust.render("ozfeed-templates/partials/_updates",a,d.bind(function(b,d){this.insertUpdatesAfter(c(d),this._infinitePaginationModuleKey);a.paginationUrl?this._nextUpdatesUrl=a.paginationUrl:(this._handleFeedEnd(),this._markEndOfFeed());this._fetchingMoreUpdates=!1},this))},_markEndOfFeed:function(){c("#isEndOfFeed").val("true")},
insertShareboxUpdates:function(a){dust.render("ozfeed-templates/partials/_updates",a,d.bind(function(a,d){this.insertUpdatesBefore(c(d),this._shareInjectModuleKey)},this))},_fetchMoreUpdates:function(){this._fetchingMoreUpdates=!0;this._$loader.show();e.Util.ajax({url:this._nextUpdatesUrl,timeout:null,context:this,success:this._insertNewUpdates,error:function(a,b,e){var f=new c.Deferred,h,g;"timeout"===b?(h="InfiniteScrollTimeout",g="Infinite Scroll AJAX request timed out."):"error"===b&&(h="InfiniteScrollException",
g="Infinite Scroll AJAX error. Status code: "+a.status+" "+a.statusText+". Error message: "+e+".");m&&(h&&g)&&m.logError(h,g);this._$feedError?f.resolve():dust.render("ozfeed-templates/partials/end-of-feed/_feed-error-try-again",{url:this._nextUpdatesUrl},d.bind(function(a,b){this._$feedError=c(b);this._$feedError.find(".try-again").click(d.bind(function(){this._$loader.show();this._$feedError.detach();this._fetchMoreUpdates();this._bindInfinitePagination()},this));f.resolve()},this));f.done(d.bind(function(){this._fetchingMoreUpdates=
!1;this.$el.append(this._$feedError);this._$loader.hide();c(window).off(q)},this))}}).done(this.storePages)},_preRender:function(){var a=c("#refreshForm"),b=c("#isRecentFilter"),e=c("#isEndOfFeed");c("button[data-filter\x3d'top']");var f=c("button[data-filter\x3d'recent']"),h=this;a.find("input").each(function(){var a=c(this);a.val()&&(h._fetchingMoreUpdates=!0,h._insertNewUpdates(JSON.parse(a.val())),n.fireImpressionEvents())});"true"==b.val()&&c(window).load(function(){d.defer(function(){f.click()})});
"true"!=e.val()||"true"==b.val()?this._bindInfinitePagination():h._fetchingMoreUpdates=!0},storePages:function(a){c("#refreshForm input[value\x3d'']").first().val(JSON.stringify(a))},_bindShareboxInjection:function(){k.on("postmodule.submit",d.bind(this._handleShareboxInjection,this))},_handleShareboxInjection:function(a){e.Util.ajax({url:"/hp/modules/ozfeed/item",type:"GET",data:{activityId:a.activityId},context:this,success:this.insertShareboxUpdates,error:function(){a.tries=(a.tries||0)+1;30>=
a.tries&&d.delay(d.bind(this._handleShareboxInjection,this),2E3,a)}}).done(this.storeShareboxPages)},storeShareboxPages:function(a){a.insertUpdateType="sharebox";c("#realtimeRefreshForm input[value\x3d'']").first().val(JSON.stringify(a))},replaceFeed:function(a){var b=this._updates,l;for(l in b)b[l].destroy();this._updates={};this._nextUpdatesUrl=a.paginationUrl;dust.render("ozfeed-templates/updates",a,d.bind(function(a,b){var d=c(b),l=d.children(),m=this.$el;this._$updatesList=d;m.find(".updates").remove();
m.prepend(this._$updatesList);this._$endOfFeed&&this._$endOfFeed.detach();this._$feedError&&this._$feedError.detach();e.Util.truncateAll(d);r.truncateAllSnippets(d);k.trigger("ozfeed-newUpdates",{newUpdates:l,moduleKey:this._moduleKey});this._bindInfinitePagination()},this))},insertUpdatesBefore:function(a,b){var l;this.$el.find(".promo.updates").length&&!this._$newUpdatesList&&(this._$newUpdatesList=c(this._$updatesList[0].cloneNode(!1)),this.$el.prepend(this._$newUpdatesList));l=this._$newUpdatesList||
this._$updatesList;a.addClass("highlighted");l.prepend(a);d.delay(function(){a.addClass("seen")},20);k.trigger(e.OZFEED_NEW_UPDATES_EVENT,{newUpdates:a,moduleKey:b})},insertUpdatesAfter:function(a,b){this._$loader.hide();this._$updatesList.append(a);k.trigger("ozfeed-newUpdates",{newUpdates:a,moduleKey:b});k.trigger("infinitePagination-newPage")},getMemberData:function(a){return a?this._memberData[a]:this._memberData},addTooltipFactory:function(a){var b=d.defaults({delayOpen:10,delayClose:100,dependencies:[]},
a.jsConfig);this._tooltips[a.type]=new y(document.body,b)},addTooltips:function(a){var b=this,e=a.dataAttribute,f=a.type;a.$el.each(function(){var a=c(this),g,k;a.data("tooltip-exists")||(a.data("tooltip-exists",!0),(g=a.attr(e))&&(g=g.replace(/\-\d+$/,"")),k=b._tooltipCounter++,g=g+"-"+k,a.attr(e,g),a.attr("aria-describedby",g),dust.render("ozfeed-templates/partials/_"+f,{id:k},d.bind(function(a,b){var d=c(b);this._$tooltipContainer.append(d)},b)))})},addDialog:function(a){this._$dialogContainer.html(a)},
_trackHighlightedUpdates:function(){var a=[];c(".highlighted-update[data-update][data-li-utrk-el]").each(function(){var b=c(this).attr("data-li-utrk-el").split("-");2===b.length&&a.push(d.last(b))});if(a.length){var b=play.getUrlParameter(window.location.href,"trkEmail"),e="",f="";b&&(f="EMAIL",b=b.split("-"),7===b.length&&(e=d.last(b)));f.length&&c.ajax({url:z,type:"POST",contentType:"application/json",data:JSON.stringify({sourceTrackingId:e,highlightedUpdateSource:f,highlightedUpdates:a})})}},_confirmRecentActivityCount:function(){0!==
u.length&&0!==c("#ozfeed.no-activities").length&&u.empty()}};e.log=function(a){e.debug&&console.log("-- OzFeed log: "+a)};e.OZFEED_NEW_UPDATES_EVENT="ozfeed-newUpdates";e.ENTER_VIEWPORT_EVENT="enterviewport";e.EXIT_VIEWPORT_EVENT="exitviewport";e.SCROLL_VIEWPORT_EVENT="scrollviewport";e.HIGHLIGHTED="highlighted";c(function(){var a=c(window);LIModules.exports("ozFeed",new e(c("#ozfeed")));a.load(function(){a.scroll()})});(function(){c(window).on("load",function(){c("img[data-delayed-url]").each(function(){var a=
c(this);a.attr("src",a.attr("data-delayed-url"));a.removeAttr("data-delayed-url")})})})();LIModules.exports("OzFeed",e)})();
(function(){var e=LIModules.requires("jquery"),m=LIModules.requires("underscore");LIModules.requires("fiber");var p=LIModules.requires("Events"),h=LIModules.requires("OzFeed"),k=LIModules.requires("OzHelpers"),r=LIModules.requires("ModalDialogBox"),s=LIModules.imports("TrackInfo")||{logInfo:e.noop()},t=LIModules.requires("t8");h.Util={_i18nResources:new t.Resources(dust.i18n,dust),ajax:k.ajax,truncate:function(a,c,b){var d=c.length>b;return{text:d?a.truncate({length:b}).html():c,truncated:d}},truncateAll:function(a){a.find("[data-truncate]").each(function(){var a=
e(this),b=a.find("p"),d=b.html(),f=h.Util.truncate(b,b.text(),a.data("truncate"));f.truncated&&(f=f.text,a.data("full-text",d),a.data("truncated-text",f),b.html(f),a.addClass("shortened"),dust.render("ozfeed-templates/partials/_show-more-less",{},function(a,c){b.append(c)}));a.removeAttr("data-truncate");a.data("truncate",null)})},isInViewport:function(a,c){var b=e(window),d=a.offset(),f=b.scrollTop(),n=b.scrollLeft(),l;c=m.defaults(c||{},{top:0,bottom:0,left:0,right:0});l=n+b.width();b=f+b.height();
d.right=d.left+a.outerWidth();d.bottom=d.top+a.outerHeight();return!(l<d.left-c.right||n>d.right+c.right||b<d.top+c.top||f>d.bottom-c.bottom)},getCsrfToken:function(){this.csrfToken||(this.csrfToken=play.getPageContextValue("csrfToken",!0));return this.csrfToken},addCsrfToken:function(a){return play.addQueryParameter(a,"csrfToken",this.getCsrfToken())},getTransitionEndEvent:k.getTransitionEndEvent,setupTransition:k.setupTransition,setupDialog:function(a){var c=a.$el,b=a.titleKey,d=a.jsConfig||{},
f=a.hasOwnProperty("openAfterInit")?a.openAfterInit:!0,n=m.extend({id:a.id},a.data),l=new e.Deferred,h=new e.Deferred,k,q;a.ajaxDialog?l.resolve():(k=a.template,q=a.render||e.noop,dust.render(k,n,m.bind(function(a,b){q(a,b);LIModules.requires("ozFeed").addDialog(b);l.resolve()},this)));this._i18nResources.get(b,"ozfeed-templates/partials/_i18n",{},function(a,b){h.resolve(b)});return e.when(h.promise(),l.promise()).done(m.bind(function(b){var g;a.ajaxDialog||c.data("href","#"+n.id);d.title=b;g=new r(c,
d);g.before("open",function(){p.trigger("oz-feed-dialog-opened",{dialog:g})});g.after("close",function(){p.trigger("oz-feed-dialog-closed",{dialog:g})});c.data("dialog",g).prop("dialog",g);f&&c.data("dialog").isReady.done(function(){c.data("dialog").open()});e.isFunction(a.done)&&a.done()},this))},embed:{HTTPS_UNSUPPORTED_PROVIDERS:["cnbc"],withEmbedly:function(a,c,b){s.logInfo("FeedEmbedlyCalled","FeedEmbedlyCalled ||| "+a);void 0===b&&(b=!0);return e.getJSON("//api.embed.ly/1/oembed?"+e.param({key:"b8949c0eb73c11e089614040d3dc5c07",
url:a,width:Math.floor(c),autoplay:b,secure:0<=location.protocol.indexOf("https")})+(0<=location.href.indexOf("mock-set")?"":"\x26callback\x3d?"))},isEmbeddable:function(a){var c=0===location.href.indexOf("https"),b=document.createElement("a");b.href=a;a=m.every(h.Util.embed.HTTPS_UNSUPPORTED_PROVIDERS,function(a){return-1===b.hostname.indexOf(a)});return!c||a}}}})();
(function(){var f=LIModules.requires("jquery"),d=LIModules.requires("underscore"),t=LIModules.requires("Backbone"),g=LIModules.requires("OzFeed"),m,u=LIModules.requires("OzHelpers"),r=t.Model.extend({}),p=["click","mousedown","keydown","keyup","keypress","focusin","focusout","submit","paste","cut",g.ENTER_VIEWPORT_EVENT,g.EXIT_VIEWPORT_EVENT,g.SCROLL_VIEWPORT_EVENT],k=function(a,b){m=LIModules.imports("ozFeed");var c=a.data("update-id")||k.blockIdCounter++,e;g.log("instantiate new update, id \x3d "+
c);this.$el=a;this.id=c;this.blockType=a.data("block");this.actorType=a.data("actor-type");this.isPublic=a.data("is-public");this.isRichMediaViewer=a.hasClass("rich-media-viewer");this._deleteUrl=a.data("delete-url");this.views={};this.model=new r;a.data("update-id",c);void 0===a.attr("data-update-id")&&a.attr("data-update-id",c);for(e in k.views)this.initView(a.find('[data-block\x3d"'+e+'"]'));this.model.set("state","shown");b&&(this.bindBlockEvents(),this._getUpdate=function(){return this})};k.prototype=
{_removeUpdate:function(a){g.log("shrinking update");u.transitionToClass(this.$el,this.model.get("state"),a)},_renderWrongEntityMessage:function(){dust.render("ozfeed-templates/partials/_wrong-entity-update",{},d.bind(function(a,b){var c=f(b);this._$notice=c;this.$el.before(c);this.$el.detach();this._$closeAction||(this._$closeAction=c.find(".close"));this._addCloseTooltip();this._bindCloseNotice()},this))},_renderHideMessage:function(a,b){function c(){this.$el.before(this._$notice);this.$el.detach()}
var e;this._$notice?c.call(this):(e=new f.Deferred,b?dust.render("ozfeed-templates/partials/_hidden-update-activity",{url:this.undoUrl,fromActor:a,actorType:this.actorType},d.bind(function(a,b){this._$notice=f(b);c.call(this);e.resolve()},this)):dust.render("ozfeed-templates/partials/_hidden-update",{url:this.undoUrl,fromActor:a,actorType:this.actorType},d.bind(function(a,b){this._$notice=f(b);c.call(this);e.resolve()},this)),e.done(d.bind(function(){var a=this._$notice;this._$closeAction||(this._$closeAction=
a.find(".close"));this._$undoAction||(this._$undoAction=a.find(".undo"));this._addCloseTooltip();this._bindUndoAction();this._bindCloseNotice()},this)))},_renderUnfollowMessage:function(a,b){var c;this._$notice?(this.$el.before(this._$notice),this.$el.detach()):(c=new f.Deferred,dust.render("ozfeed-templates/partials/_unfollow-update",{url:this.undoUrl,fromActor:a,actorType:this.actorType,actorName:b},d.bind(function(a,b){this._$notice=f(b);this.$el.before(this._$notice);this.$el.detach();c.resolve()},
this)),c.done(d.bind(function(){var a=this._$notice;this._$closeAction||(this._$closeAction=a.find(".close"));this._$undoAction||(this._$undoAction=a.find(".undo"));this._addCloseTooltip();this._bindUndoAction();this._bindCloseNotice()},this)))},_renderLeaveGroupMessage:function(a){var b;this._$notice?(this.$el.before(this._$notice),this.$el.detach()):(b=new f.Deferred,dust.render("ozfeed-templates/partials/_leave-group",{groupName:a},d.bind(function(a,e){this._$notice=f(e);this.$el.before(this._$notice);
this.$el.detach();b.resolve()},this)),b.done(d.bind(function(){var a=this._$notice;this._$closeAction||(this._$closeAction=a.find(".close"));this._$undoAction||(this._$undoAction=a.find(".undo"));this._addCloseTooltip();this._bindUndoAction();this._bindCloseNotice()},this)))},_renderReportUpdateMessage:function(){var a;this._$notice?this.$el.replaceWith(this._$notice):(a=new f.Deferred,dust.render("ozfeed-templates/partials/_report-update",{},d.bind(function(b,c){this._$notice=f(c);this.$el.replaceWith(this._$notice);
a.resolve()},this)),a.done(d.bind(function(){this._$closeAction||(this._$closeAction=this._$notice.find(".close"));this._addCloseTooltip();this._bindCloseNotice()},this)))},_renderDeleteMessage:function(){var a;this._$notice?this.$el.replaceWith(this._$notice):(a=new f.Deferred,dust.render("ozfeed-templates/partials/_deleted-update",{},d.bind(function(b,c){this._$notice=f(c);this.$el.replaceWith(this._$notice);a.resolve()},this)),a.done(d.bind(function(){this._$closeAction||(this._$closeAction=this._$notice.find(".close"));
this._addCloseTooltip();this._bindCloseNotice()},this)))},_renderUpdate:function(){var a=this.$el,b=this.model;this._$notice.after(a);this._$notice.detach();a.removeClass(b.get("state"));b.set("state","shown")},_addCloseTooltip:function(){m.addTooltips({$el:this._$closeAction,dataAttribute:"data-close-tooltip-id",type:"close-tooltip"})},_bindCloseNotice:function(){this._$closeAction.on("click",d.bind(this._handleCloseNotice,this))},_handleCloseNotice:function(){var a=this._$notice;g.log("dismissing deleted update notice");
this._$closeAction.blur();a.addClass("closing");g.Util.setupTransition({$el:a,eventCallback:d.bind(function(b){"opacity"===b.originalEvent.propertyName&&a.remove()},this)})},_bindUndoAction:function(){this._$undoAction.on("click",d.bind(this._handleUndoAction,this))},_handleUndoAction:function(){g.Util.ajax({url:this.undoUrl,type:"POST"});this._renderUpdate()},bindBlockEvents:function(){var a=this.$el,b=d.bind(function(a){var b=f(a.target),d=a.type,g=this._getUpdate(b),b=b.closest("[data-block]"),
n=k.views[b.data("block")];(d=b.length&&n&&n.events&&-1!==p.indexOf(d)&&n.events[d])&&d.call(g.views[b.data("block-id")],a)},this);a.on(p.join(" "),b)},getCorrespondingUpdateView:function(a,b){var c=this._getParentView(a,b);if(c||(c=this._getAdjacentView(a,b)))return c},_getAdjacentView:function(a,b){var c=this.getViews(b),e=this._getParentView(a,"comment-entity"),c=e?d.filter(c,function(a){return 0<e.$el.find(a.$el).length&&a.$el.closest('[data-block\x3d"comment-entity"]')[0]===e.$el[0]}):d.filter(c,
function(a){return 0===a.$el.closest('[data-block\x3d"comment-entity"]').length});return d.first(c)},_getParentView:function(a,b){var c=this.getViews(b),e=this._getParentCommentEntity(a);e&&"comment-entity"!==b&&(c=d.filter(c,function(a){return 0<a.$el.closest(e).length}));return d.filter(c,function(c){return 0<c.$el.find(a).length&&a.closest('[data-block\x3d"'+b+'"]')[0]===c.$el[0]})[0]},_getParentCommentEntity:function(a){var b=this.getViews("comment-entity"),c=a.parent().closest('[data-block\x3d"comment-entity"]');
return d.first(d.filter(b,function(a){return a.$el[0]===c[0]}))},getViews:function(a,b){var c=this.views,e=[],f={ancestor:"update",firstBlock:!0},k,n,g,h,l;for(k in c)n=c[k],n.block===a&&e.push(n);b&&(b=d.defaults(b,f),g=b.ancestor,h=b.$context,l=b.firstBlock,e=d.filter(e,function(a){var c=!0,b=h.closest('[data-block\x3d"'+g+'"]');l?(a=a.$el.parent().closest("[data-block]"),c=a.data("block")===g):a=a.$el.closest('[data-block\x3d"'+g+'"]');return c&&b[0]==a[0]}));return e},initView:function(a,b){var c=
this,e=[],g,p;a.each(function(){var a=f(this),b,h,l,q,s;a.closest('[data-update\x3d"true"]')[0]===c.$el[0]&&(b=a.data("block"),h=k.views[b],c.isRichMediaViewer&&h&&h.syncWithRMV?(s="function"===typeof h.syncWithRMV?h.syncWithRMV:k.syncWithRMV,p=m._updates[c.id]?m._updates[c.id].getViews(b):[],g=d.filter(p,function(b){return s(b.$el,a)}),q=0<g.length&&d.first(g).model):q=h&&h.sync&&m._updates[c.id]&&(l=m._updates[c.id].getViews(b))&&l[0]&&l[0].model,q||(q=new r),l=function(){this.id=k.blockIdCounter++;
this.block=b;this.model=q;this.update=c;this.$el=a;this.removeSelf=function(){this.$el.remove();delete this.update.views[this.id]}},h&&(l.prototype=h.methods,h=new l,a.data("block-id",h.id),h.init&&h.init(),c.views[h.id]=h,e.push(h)))});b&&(e=d.filter(e,function(a){return a.block===b}));return e},replaceAndBind:function(a,b){var c=this.views[a].$el,e=f(b);e.data("block-id",c.data("block-id"));c.hide().before(e);this.views[a].$el=e;d.delay(d.bind(c.remove,c),0)},dismissSelf:function(a){this.model.set("state",
"dismissing");this._removeUpdate(a)},deleteSelf:function(a){this.model.set("state","deleting");this._removeUpdate(d.bind(a||this._renderDeleteMessage,this))},wrongEntity:function(a){this.model.set("state","hiding");this._removeUpdate(d.bind(this._renderWrongEntityMessage,this,a))},hideSelf:function(a,b,c){this.undoUrl||(this.undoUrl=a);this.model.set("state","hiding");this._removeUpdate(d.bind(this._renderHideMessage,this,b,c))},hideSelfForUnfollow:function(a,b,c){this.undoUrl||(this.undoUrl=a);this.model.set("state",
"hiding");this._removeUpdate(d.bind(this._renderUnfollowMessage,this,b,c))},hideSelfForLeaveGroup:function(a){this.model.set("state","hiding");this._removeUpdate(d.bind(this._renderLeaveGroupMessage,this,a))},hideSelfForReportUpdate:function(){this.model.set("state","hiding");this._removeUpdate(d.bind(this._renderReportUpdateMessage,this))},append:function(a){this.$el.children(".content").append(a)},destroy:function(){var a=this.views,b,c;for(b in a)c=a[b],c.model.destroy(),d.isFunction(c.destroy)&&
c.destroy()}};k.views={};k.blockIdCounter=0;k.addView=function(a){this.views[a.block]=a};k.syncWithRMV=function(a,b){var c=b.closest('[data-block\x3d"comment-entity"]'),d=a.closest('[data-block\x3d"comment-entity"]'),f=!1;0<c.length&&0<d.length?f=d.data("comment-id")===c.data("comment-id"):0===c.length&&0===d.length&&(c=a.closest('[data-block\x3d"update"]'),d=b.closest('[data-block\x3d"update"]'),0<c.length&&0<d.length&&(f=c.data("update-id")===d.data("update-id")));return!!f};k.renderUpdate=function(a){var b=
new f.Deferred;dust.render("ozfeed-templates/partials/_standalone-update",a,d.bind(function(a,d){b.resolve(d)},this));return b};f(function(){d.defer(function(){m=LIModules.requires("ozFeed");m.addTooltipFactory({type:"close-tooltip",jsConfig:{direction:"top",tooltipContentID:"close-tooltip",dataAttribute:"close-tooltip-id"}})})});LIModules.exports("OzFeedUpdate",k)})();
(function(){var d=LIModules.requires("jquery"),h=LIModules.requires("underscore"),g=LIModules.requires("Events"),n=LIModules.requires("Mentions"),f=LIModules.requires("ModalDialogBox"),k=LIModules.requires("OzFeed"),m=["ozfeed-comment-box-render","ozfeed-comment-list-render","ozfeed-text-entity-render"],f=f.extend(function(f){return{setDialogBodyContent:function(b){var a=this._$dialog;b=d(b).hide();var c;this._$dialogBody=c=a.find(".dialog-body");this._$spinner||(this._$spinner=a.find(".spinner").detach());
a.css({width:a.width(),height:a.height(),overflow:"hidden"});this._$spinner.css("height",c.height());k.Util.truncateAll(b);c.html(this._$spinner.add(b));a.addClass("loaded");this._$previewPane=c.find(".rmv-preview-pane");this._$commentPane=c.find(".rmv-comment-pane");this._$section=this._$commentPane.find(".rmv-section");h.each(m,function(a){g.off(a)});g.on(m.join(" "),h.bind(function(){this._fitToWindow(!0)},this));d("#ozfeed").data("rmv-mentions")&&this._bindMentions()},_loadContentFail:function(){this.setDialogBodyContent(d(document.createElement("span")).text(this._config.errorMessage))},
_bindMentions:function(){var b=this,a=d("#ozfeed").data("oon-mentions"),c=d("#ozfeed").data("isb-entitlement")?"/hp/influencer-entitlement":"/nhome/influencer-entitlement";this.mentions=new n.Delegator(this._$dialogBody.find(".rich-media-viewer")[0],{oonMentions:a,mentionsTL:"common-templates/mentions-play",entitlementUrl:c});d(".mentions-typeahead").on("typeahead:opened",function(){b._$dialogBody.css("overflow","visible")}).on("typeahead:closed",function(){b._$dialogBody.css("overflow","auto")})},
_getPosition:function(){var b=d(window),a=this._config.top,c=b.innerWidth()/2-(this._rendered?this.dialogWidth:this._config.width)/2+this._config.xOffset;this._config.centerVertically&&(a=b.innerHeight()/3-(this._rendered?this.dialogHeight:this._$dialog.outerHeight())/3+this._config.yOffset,a=Math.max(a,this._config.top));return{left:c,top:a}},_adjustGhostDimensions:function(){var b=d(window).innerWidth()-50,a=this._$dialog.find(".dialog-title").outerHeight(),a=d(window).innerHeight()-this._config.top-
50-a,c=this._$ghostDialog.find(".shared-image img"),e=c.height(),f=c.width();e>a&&(e=f/e*a,c.height(a),c.width(e));this._$ghostDialog.width()>b&&this._$ghostDialog.css("max-width",b+"px");375>this._$ghostDialog.width()-this._$previewPane.width()&&this._$previewPane.css("max-width",this._$ghostDialog.width()-375)},_adjustWidth:function(){var b=this._$ghostDialog.width();this.dialogWidth&&this.dialogWidth===b||(this.dialogWidth=b);this._$dialog.width(this.dialogWidth).find(".rich-media-viewer").css("opacity",
1)},_adjustHeight:function(b){var a=this._$dialog,c=this._$dialogBody,e=this._$section,f=this._$commentPane,h=a.find(".dialog-title").outerHeight(),l=d(window).innerHeight()-this._config.top-50-h,g=this._$ghostDialogBody.innerHeight(),k=c.innerHeight();this.commentBoxHeight=c.find(".comment-box").filter(":last").outerHeight();this.scrollableHeight=this._$ghostDialogBody.find(".scrollable").css("max-height","none").height()||e.height();b=g>l?b&&l>k&&l<g?k:l:g;b<=this.scrollableHeight+this.commentBoxHeight?
(f.addClass("comment-box-fixed"),e.height(b-this.commentBoxHeight)):(f.removeClass("comment-box-fixed"),e.height("auto"));e=b+h;c.innerHeight(b);a.height(e);this.dialogHeight=e},_fitToWindow:function(b){var a,c;this._$ghostDialog=a=this._$dialog.clone().css({top:0,left:0,visibility:"hidden",width:"auto",height:"auto"});this._$ghostDialog.find(".rich-media-viewer").show();this._$ghostDialog.find(".spinner").remove();this._$ghostDialogBody=a.find(".dialog-body").height("auto");c=a.find(".rmv-preview-pane img");
d("body").append(a);c.length?c.load(h.bind(function(){this._$dialogBody.find(".rich-media-viewer").show();this._$spinner.detach();this._adjustGhostDimensions();this._adjustWidth();this._adjustHeight(b);this._$dialog.css(this._getPosition()).css("overflow","visible");g.trigger(k.OZFEED_NEW_UPDATES_EVENT,{newUpdates:this._$dialogBody});a.remove()},this)).error(function(){a.remove()}):a.remove()}}});LIModules.exports("OzFeedRichMediaViewer",f)})();
(function(){var d=LIModules.requires("jquery"),b=LIModules.requires("underscore"),f=LIModules.requires("Events"),h=LIModules.requires("OzFeed"),l=LIModules.requires("UserActivityTrackingInstance"),k=function(a){this._$el=a;this._$action=a.find(".chiclet");this._$feed=d("#ozfeed");this._$updatesList=this._$feed.find(".feed.updates");this._fetchUrl=a.data("fetch-url");this._pollingIntervalValues=a.data("polling-interval-values");this._pollUrl=this._pollingIntervalValues.realTimePollUrl;this._pollingTimeInterval=
this._pollingIntervalValues.realTimePollingInterval;this._updatesCountThreshold=this._pollingIntervalValues.countThreshold;this._moduleKey=a.attr("data-li-utrk-module");this._useDynamicPolling=a.data("use-dynamic-polling");this._realTimeInterval=null;this._fetchingUpdates=!1;this._lastScrollPosition=0;this._offsetTop=a.offset().top;this._fixedTransitionPosition=this._offsetTop-(this.GLOBAL_NAV_HEADER_HEIGHT+this.GLOBAL_NAV_MENU_HEIGHT+this.GLOBAL_NAV_SPACING);this._numCalls=this._lastPollCount=0;
this._preRenderRealtime();this._bindGlobalNavEvents();this._bindRealTimeInjection();this._setupRealTimePolling();f.on(this.STOP_EVENT,b.bind(function(){this._updateWindowTitle();this._clearRealTimePolling()},this));f.on(this.START_EVENT,b.bind(function(a){a&&(this._pollUrl=a);this._setupRealTimePolling()},this));f.on(this.DISMISS_EVENT,b.bind(this._dismissChiclet,this))};k.prototype={REAL_TIME_INTERVAL:2E4,MAX_POLLING_INTERVAL:18E5,MAX_UPDATES:20,SCROLL_EVENT:"scroll.ozfeed-realTimeUpdates",SCROLL_THROTTLE_DELAY:1E3/
60,STOP_EVENT:"realTimeUpdates.stop",START_EVENT:"realTimeUpdates.start",DISMISS_EVENT:"realTimeUpdates.dismiss",GLOBAL_NAV_HEADER_HEIGHT:42,GLOBAL_NAV_MENU_HEIGHT:29,GLOBAL_NAV_SPACING:10,SCROLL_TOP_ANIMATION_TIME:500,_setupRealTimePolling:function(){if(this._pollUrl){var a=this.REAL_TIME_INTERVAL;this._useDynamicPolling&&"control"===this._pollingTimeInterval&&(a=Math.min(1E3*Math.pow(1.3,this._numCalls)+this.REAL_TIME_INTERVAL*(this._numCalls+1),this.MAX_POLLING_INTERVAL),a=isNaN(a)?this.MAX_POLLING_INTERVAL:
a);"control"!==this._pollingTimeInterval&&(a=1E3*this._pollingTimeInterval);this._realTimeInterval=setInterval(b.bind(function(){h.Util.ajax({url:this._pollUrl,success:b.bind(this._pollSuccess,this),error:d.noop})},this),a)}},_preRenderRealtime:function(){var a=this;d("#realtimeRefreshForm").find("input").each(function(){var c=d(this);c.val()&&(this._fetchingMoreUpdates=!0,c=JSON.parse(c.val()),"realtime"===c.insertUpdateType?a._injectRealTimeUpdates(c):LIModules.requires("ozFeed").insertShareboxUpdates(c),
l.fireImpressionEvents())})},_pollSuccess:function(a){var c=a.count,g=a.elementTrk,e=c>this._lastPollCount;this._numCalls++;e&&c>=this._updatesCountThreshold?(this._lastPollCount=c,this._clearRealTimePolling(),c>this.MAX_UPDATES?c=this.MAX_UPDATES+"+":this._setupRealTimePolling(),this._updateWindowTitle(c),dust.render("ozfeed-templates/partials/_real-time-updates",{count:c,elementTrk:g,realTimeModuleKey:this._moduleKey},b.bind(function(a,c){var g=d(c);g.attr("class",this._$el.attr("class"));this._$el.replaceWith(g);
this._$el=g;this._$action=this._$el.find(".chiclet");this._bindRealTimeInjection();b.delay(b.bind(function(){this._updateChiclet();this._showChiclet()},this),20);d(window).off(this.SCROLL_EVENT);d(window).on(this.SCROLL_EVENT,b.throttle(b.bind(this._updateChiclet,this),this.SCROLL_THROTTLE_DELAY))},this))):(this._clearRealTimePolling(),this._setupRealTimePolling());this._fetchUrl=a.realTimeFetchUrl},_updateWindowTitle:function(a){var c=d("title"),b=c.text(),e=c.data("original");e||(c.data("original",
b),e=b);b=e;a&&(b="("+a+") "+e);c.text(b)},_updateChiclet:function(){var a=d(window).scrollTop();0<this._lastScrollPosition&&a>this._lastScrollPosition?this._hideChiclet():a<this._lastScrollPosition&&this._showChiclet();this._$el.toggleClass("fixed",a>this._fixedTransitionPosition);this._lastScrollPosition=a},_showChiclet:function(){this._$el.hasClass("visible")||(this._$action.prop("disabled",!1),this._$el.addClass("visible"),this._$el.attr("data-li-utrk-impr",""),l.fireImpressionEvents())},_hideChiclet:function(){this._$el.removeClass("visible")},
_dismissChiclet:function(){this._$action.prop("disabled",!0);d(window).off(this.SCROLL_EVENT);this._lastPollCount=this._lastScrollPosition=0;this._hideChiclet()},_animateToTop:function(){var a=d(window).scrollTop();0<a&&d("body, html").animate({scrollTop:0},1E3>a?this.SCROLL_TOP_ANIMATION_TIME/2:this.SCROLL_TOP_ANIMATION_TIME)},_bindRealTimeInjection:function(){this._$el.on("click",b.bind(this._handleRealTimeInjection,this))},_bindGlobalNavEvents:function(){"fixed"===d("#responsive-nav-scrollable").css("position")&&
this._handleGlobalNavHide();f.on("globalnav:showStart",b.bind(this._handleGlobalNavShow,this));f.on("globalnav:hideStart",b.bind(this._handleGlobalNavHide,this))},_handleGlobalNavShow:function(){this._$el.addClass("global-nav-showing");this._fixedTransitionPosition=this._offsetTop-(this.GLOBAL_NAV_HEADER_HEIGHT+this.GLOBAL_NAV_MENU_HEIGHT+this.GLOBAL_NAV_SPACING)},_handleGlobalNavHide:function(){this._$el.removeClass("global-nav-showing");this._fixedTransitionPosition=this._offsetTop-(this.GLOBAL_NAV_HEADER_HEIGHT+
this.GLOBAL_NAV_SPACING)},_handleRealTimeInjection:function(){this._numCalls=0;if(parseInt(this._$el.find(".count").html(),10)===this.MAX_UPDATES)return window.location.reload();this._fetchingUpdates||(this._fetchingUpdates=!0,this._animateToTop(),this._updateWindowTitle(),this._clearRealTimePolling(),this._dismissChiclet(),h.Util.ajax({url:this._fetchUrl,success:b.bind(this._injectRealTimeUpdates,this),error:function(){h.log("real-time fetch failure")}}).done(this.storeRealtimePages))},storeRealtimePages:function(a){a.insertUpdateType=
"realtime";d("#realtimeRefreshForm input[value\x3d'']").first().val(JSON.stringify(a))},_injectRealTimeUpdates:function(a){h.log("real-time fetch success");dust.render("ozfeed-templates/partials/_updates",a.feedData,b.bind(function(a,b){LIModules.requires("ozFeed").insertUpdatesBefore(d(b),this._$el.attr("data-li-utrk-module"))},this));d(".feed-update.highlighted-update").removeClass("highlighted-update");this._pollUrl=a.realTimePollUrl;this._realTimeInterval||this._setupRealTimePolling();this._fetchingUpdates=
!1},_clearRealTimePolling:function(){clearInterval(this._realTimeInterval);this._realTimeInterval=null}};d(function(){d(window).load(function(){var a=d("#real-time-updates");0<a.length&&LIModules.exports("ozFeedRealTimeUpdates",new k(a))})});LIModules.exports("OzFeedRealTimeUpdates",k)})();
(function(){var a=LIModules.requires("jquery"),f=LIModules.requires("underscore"),k=LIModules.requires("Dropdown"),h=LIModules.requires("Events"),m=LIModules.requires("OzFeed"),l=LIModules.requires("UserActivityTrackingInstance"),e=function(b){this._$el=b;this._$feed=a("#ozfeed");this.filterChanging=!1;b.addClass("initialized");this._bindFilterChanging();new k(b.find(".dropdown"),{triggerSelector:".filters-trigger",eventType:"hover"})};e.prototype={_bindFilterChanging:function(){this._$el.on("click",
".filter",f.bind(this._filterClicked,this))},_filterClicked:function(b){var g=this._$el.find(".selected").eq(0),c=a(b.target);b=a("#refreshForm");var d=a("#realtimeRefreshForm");b.find("input").val("");d.find("input").val("");c.hasClass("selected")||this.filterChanging||(this.filterChanging=!0,g.removeClass("selected"),c.addClass("selected").removeAttr("data-li-utrk-impr_fired").attr("data-li-utrk-impr",""),l.fireImpressionEvents(this._$feed),this.revert=f.once(f.bind(function(){g.addClass("selected");
c.removeClass("selected");this._handleFilterChanging(g.data("url"),g.data("filter"))},this)),this._handleFilterChanging(c.data("url"),c.data("filter")))},_handleFilterChanging:function(b,g){var c=LIModules.requires("ozFeed"),d=LIModules.imports("ozFeedRealTimeUpdates"),f=a('\x3cdiv class\x3d"overlay switching-filters"/\x3e'),e=this._$feed.find(".updates").find(".feed-update \x3e .content"),k=e.children(".image"),l=a("#isRecentFilter"),n=a("button[data-filter\x3d'recent']");d?(h.trigger(d.STOP_EVENT),
h.trigger(d.DISMISS_EVENT),e.add(k).addClass("switching-filters").prepend(f),m.Util.ajax({url:b,context:this}).done(function(a){c.replaceFeed(a.updates);l.val(n.hasClass("selected"));h.trigger(d.START_EVENT,a.updates.realTimePollUrl)}).fail(function(){a(".overlay.switching-filters").remove();a(".switching-filters").removeClass("switching-filters");this.revert();h.trigger(d.START_EVENT)}).always(function(){this.filterChanging=!1})):(this.revert(),this.filterChanging=!1)},revert:function(){}};a(function(){LIModules.exports("ozFeedFilters",
new e(a("#filters")))});LIModules.exports("OzFeedFilters",e)})();
(function(){function k(){var b=a(this);b.parents(c).removeClass(d);(2>this.naturalHeight||2>this.naturalWidth)&&b.triggerHandler("error")}function e(){a(this).parents(c).addClass(d)}function f(){a("#ozfeed").find(l).addClass(g).filter(function(){var b=a(this).attr("src")===m;b&&e.call(this);return!b}).on("load"+h,k).on("error"+h,e).each(function(){this.complete&&a(this).load()})}var a=LIModules.requires("jquery"),n=LIModules.requires("underscore"),p=LIModules.requires("Events"),q=LIModules.requires("OzFeed"),
m=play.assetUrl("images/ozfeed/side_stock_grey_bg.png"),g="checked",c=".side-article",l=".side-content-image img:not(."+g+")",d="img-load-error",h=".oz-feed-images";a(function(){n.defer(f)});p.on(q.OZFEED_NEW_UPDATES_EVENT,f)})();
(function(){var b=LIModules.requires("jquery"),m=/(\s*\S+|\s)$/;b.fn.truncate=function(h){var d=b.extend({},b.fn.truncate.defaults,h);return this.each(function(h,n){var k=b(n),c=k.text(),a=c.length-d.length;if(0<a){var l=c.length-c.slice(0,d.length).replace(m,"").length;(c.length-l)/c.length>d.minLengthThreshold&&(a=l-1)}0>a||!a&&!d.truncated||b.each(k.contents().get().reverse(),function(c,f){var g=b(f),e=g.text().length;if(e<=a)d.truncated=!0,a-=e,g.remove();else{if(3===f.nodeType)return b(f.splitText(e-
a-1)).remove(),!1;g.truncate({length:e-a});return!1}})})};b.fn.truncate.defaults={minLengthThreshold:0.5}})();
(function(){var a=LIModules.requires("jquery"),d=LIModules.requires("fs"),g=LIModules.requires("Events"),h=LIModules.requires("OzFeed"),k=LIModules.requires("play"),c;a(function(){function l(b,a){var e=b.attr("data-url");b.data("abi-nux")&&c&&(e=k.addQueryParameter(e,"initCallback","abkFetchFormCallback"),window.abkFetchFormCallback=function(a){a.addSubscribers({importerSuccess:function(){c.coolOffGroup("uno-takeover","default","main","abook-group","time\x3e\x3d30d")}})});d.reset();d.embedXHR(a,{url:e,
container:a});d.after(a,function(a,d){var c=b.find("#resolve-btn");c.prop("disabled",!0);c.attr({"data-li-lego-action":"PRIMARY_ACTION","data-li-lego-action-name":"continue","data-trk":"promo-abook-continue","data-li-lego-sync":"true"})})}function f(){a("#hp-feed-abk-social-form-container, #hp-feed-abk-nux-form-container").filter(function(){return!a(this).data("initialized")}).each(function(){var b=a(this);b.data("initialized",!0);l(b,b.attr("id"))})}c=LIModules.imports("PlayLego");f();g.on(h.OZFEED_NEW_UPDATES_EVENT,
f)})})();
(function(){LIModules.requires("OzFeedUpdate").addView({block:"actions",methods:{insertAfter:function(a){this.$el.after(a)}}})})();
(function(){var c=LIModules.requires("jquery"),a=LIModules.requires("underscore"),b=LIModules.requires("OzFeedUpdate"),f=LIModules.requires("OzFeed");b.addView({block:"aggregated-shares-list",methods:{init:function(){this.$loader=c('\x3cdiv class\x3d"loading hidden"\x3e\x3c/div\x3e');this.$list=this.$el.find(".shares");this.$el.prepend(this.$loader);this._resetBuffer();this.model.on("change:pendingShares",this.render,this)},render:function(){dust.render("ozfeed-templates/partials/_inserted-aggregated-shares",
this.model.get("pendingShares"),a.bind(function(k,d){var b=this.$list,e=c(d),g=this.$el,h=this.$loader;b.prepend(d);f.Util.truncateAll(e);a.delay(function(){h.addClass("hidden");g.removeClass("inserting waiting")},20);this.update.initView(e.find("[data-block]"));this._resetBuffer()},this))},_resetBuffer:function(){this.model.set("pendingShares",{},{silent:!0})},triggerLoading:function(){this.$el.addClass("inserting");a.delay(a.bind(function(){this.$loader.removeClass("hidden");this.$el.addClass("waiting")},
this),16)},insertShares:function(a){this.model.set("pendingShares",a)}}})})();
(function(){LIModules.requires("jquery");var c=LIModules.requires("underscore"),e=LIModules.requires("OzFeedUpdate"),d=LIModules.requires("OzFeedTrackingRouter"),a=LIModules.requires("OzFeed"),f={"not-connected":"inline-connect","invitation-sent":"invitation-sent"};e.addView({block:"connect",events:{click:function(){a.log("clicked on connect");this._connect()}},methods:{init:function(){var b=this.model;this.url=this.$el.data("url");b.set("state","not-connected");b.on("change:state",this.render,this)},
render:function(){dust.render("ozfeed-templates/blocks/actions/connect/"+f[this.model.get("state")],{},c.bind(function(b,a){this.$el.replaceWith(a);this.model.off("change:state")},this))},_connect:function(){a.Util.ajax({url:this.url,type:"POST",success:c.bind(function(b){a.log("ajax call succeeded");if("email"===b.status){if(b=this.$el.data("email-url"))d.track(this.$el,"connectRedirect"),window.location.href=b}else d.track(this.$el,"sendConnectInvite"),this.model.set("state","invitation-sent");
this.update.getViews("recommendation-entity",{ancestor:"recommendation-entity",$context:this.$el})},this),error:function(){a.log("ajax failed");a.log("error handler has not been implemented yet")}})}}})})();
(function(){function s(a,b){var c=d(b);this.$el.before(c);this.commentList=this.update.initView(c)[0]}function t(a){var b=this.$el.find(f);b.length||(b=d("\x3cdiv\x3e",{"class":f.substr(1)}),this.$el.prepend(b));this.$el.find(f).empty();dust.render(a.template,{},function(c,e){c||(b.html(e),_.isFunction(a.callback)&&a.callback())})}function k(){this.$el.find(g).removeAttr("disabled")}function u(){this.$el.find(g).is(".for-review")&&this.render({buttonDisabled:!0})}function v(a,b){var c=this.postParams,
e=/urn:li:discussion:(\d+):group:(\d+)/;c.objectUrn&&e.test(c.objectUrn)?(e=c.objectUrn.match(e),_.extend(c,{commentId:"",item:e[1],type:"member",gid:e[2],abbreviated:!0,ajax:!0,csrfToken:l.Util.getCsrfToken(),ItemCommentParam:a})):c.articleId?_.extend(c,{commentBody:a,mentions:b}):_.extend(c,{message:a,mentions:b});return l.Util.ajax({url:this.baseUrl,data:c}).then(function(a,b,c){a="object"===typeof a?a:{status:"ERROR"};a.content?(b=a.content.objectUrn||a.content.commentWithActor||a.content.commentID,
a.success=!!b):a.success=!!a.commentID;a.status="ok"===a.status?"SUCCESS":a.status;a.status="fail"===a.status?"ERROR":a.status;a.statusCode&&(a.status="0"===a.statusCode?"SUCCESS":a.statusCode);a.content&&(a.content.pulseComment&&"success"==a.content.status)&&(a.success=!0);return a.success?a:d.Deferred().reject(a,c).promise()}).fail(_.bind(function(a){var b={block:{template:"common-templates/error-messages/content-blocked",callback:_.bind(u,this)},review:{template:"common-templates/error-messages/content-to-be-reviewed",
callback:_.bind(k,this)},reviewPremoderated:{template:"common-templates/error-messages/content-to-be-reviewed-premoderated",callback:_.bind(k,this)},error:{template:"common-templates/error-messages/generic",callback:_.bind(k,this)}};t.call(this,b[a.isPremoderated?"reviewPremoderated":a.status]||b.error)},this))}function q(){this._validate();m.trigger(this.newCharacterEvent)}function r(){_.defer(_.bind(q,this))}function w(){this._reset()}function x(){n||(n=!0,setTimeout(function(){n=!1},50),this._resize())}
var d=LIModules.requires("jquery"),m=LIModules.requires("Events"),l=LIModules.requires("OzFeed"),f=".error-message-container",g=".comment-submit",n=!1;LIModules.requires("OzFeedUpdate").addView({block:"comment-box",syncWithRMV:function(a,b){return a.data("post-params").objectUrn===b.data("post-params").objectUrn},events:{focusin:function(a){d(a.target).is("textarea")&&!this.expanded&&this._expand()},focusout:function(a){a=d(a.target);a.is("textarea")&&(0===a.val().length&&this.expanded)&&(this.isReplyBox?
this._shrinkAndHide():this._shrink())},keyup:_.throttle(q,1E3),paste:r,cut:r,submit:function(a){a.preventDefault();this._validate()&&this._submit()}},methods:{init:function(){var a=this.$el;this.baseUrl=a.data("base-url");this.postParams=a.data("post-params");this.type=this.$el.data("type");this.isReplyBox="reply"===this.type;this.isPulseCommentBox="pulse"===this.type;this.isLikeOnCommentEnabled=this.$el.data("like-on-comment-enabled");this.isReplyOnCommentEnabled=this.$el.data("reply-on-comment-enabled");
this.isSocialActionsOnRepliesEnabled=this.$el.data("social-actions-on-replies-enabled");this.isReplyBox?(this.isLikeCapable=this.isSocialActionsOnRepliesEnabled&&this.isLikeOnCommentEnabled,this.isReplyCapable=this.isSocialActionsOnRepliesEnabled&&this.isReplyOnCommentEnabled):(this.isLikeCapable=this.isLikeOnCommentEnabled,this.isReplyCapable=this.isReplyOnCommentEnabled);this.trk=this.isPulseCommentBox?"pulse-comment-submit":this.isReplyBox?"reply-submit":"comment-submit";this.$textarea=a.find("textarea");
this.$mentions=a.find("input[name\x3dmentions]");this.startHeight=this.$textarea.outerHeight();this.expandedHeight=this.startHeight+17;this.scrollHeight=this.startHeight;this.textareaVPadding=parseInt(this.$textarea.css("padding-top"),10)+parseInt(this.$textarea.css("padding-bottom"),10);this.textareaMaxHeight=parseInt(this.$textarea.css("max-height"),10);this.newCharacterEvent="new-characters-"+this.id;this.isOverMaxCharLimit=!1;this.$textarea.on("scroll",_.bind(x,this)).on("blur",_.bind(w,this));
m.on(this.newCharacterEvent,_.throttle(_.bind(this._resize,this),100))},focus:function(){this.show();this.$textarea.focus()},show:function(){this.$el.show()},hide:function(){this.$el.hide()},render:function(a){var b=this.$el.find("button");a=_.defaults(a||{},{isReplyButtonType:!1,showButton:!0,trk:b.attr("data-trk")||this.trk,autoTrk:b.attr("data-li-auto-click-utrki")});dust.render("ozfeed-templates/partials/_comment-box-message-and-button",a,_.bind(function(a,b){var p=this.$el,d=p.find(".comment-box-partial");
d.length?d.replaceWith(b):p.append(b)},this))},_createCommentOptions:function(a){var b={},c=this.postParams.objectUrn,e=this.postParams.attributedObjectUrn,d,f,g,h;a&&(d=a.commentID&&0<a.commentID,f=a.content&&a.content.commentID&&0<a.content.commentID,g=a.content&&a.content.pulseComment&&0<a.content.pulseComment.commentId);d?h=a.commentID:f?h=a.content.commentID:g&&(h=a.content.pulseComment.commentId);h&&(b.commentId=h,b.objectUrn=c,b.attributedObjectUrn=e,b.lixes={isLikeOnCommentEnabled:this.isLikeOnCommentEnabled,
isReplyOnCommentEnabled:this.isReplyOnCommentEnabled,isSocialActionsOnRepliesEnabled:this.isSocialActionsOnRepliesEnabled},b.actions={like:this.isLikeCapable,reply:this.isReplyCapable});return b},_expand:function(){var a=this.$el,b=this.$textarea;this.expanded||(this.$mirror||(this.$mirror=d("\x3cpre/\x3e",{"class":"mirror","aria-hidden":!0,css:{width:b.width()}}),a.prepend(this.$mirror)),this.commentList||(this.commentList=this.update.getCorrespondingUpdateView(a,"comment-list")),this.render({isReplyButtonType:this.isReplyBox,
showButton:!1,buttonDisabled:!0}),b.addClass("trans"),_.defer(_.bind(function(){this._setupTransition();a.find(".button-container").addClass("show");b.css("height",this.expandedHeight)},this)),this.expanded=!0)},_shrinkAndHide:function(){var a=this.$el,b=this.$textarea;_.defer(function(){this._setupTransition();b.one("transitionend webkitTransitionEnd oTransitionEnd",function(){a.hide()});a.find(".button-container").removeClass("show");b.css("height",0);this.expanded=!1}.bind(this))},_shrink:function(){var a=
this.$el,b=this.$textarea;this.expanded=!1;_.defer(function(){this._setupTransition();a.find(".button-container").removeClass("show");b.css("height",this.startHeight)}.bind(this))},_reset:function(){this.$textarea.val().length||(this._validate(),this.$el.find(f).empty())},_resize:function(){var a=this.$textarea,b;this.scrollHeight=a[0].scrollHeight;_.defer(_.bind(function(){this.$mirror.text(a.val()+"\x26nbsp;");b=this.$mirror.height();b>this.expandedHeight&&b<this.scrollHeight?this.scrollHeight=
Math.min(this.textareaMaxHeight,b+this.textareaVPadding):b<this.expandedHeight&&(this.scrollHeight=this.expandedHeight);this.scrollHeight!==a.innerHeight()&&(this._setupTransition(),a.css("height",this.scrollHeight))},this))},_setupTransition:function(){l.Util.setupTransition({$el:this.$textarea}).done(function(){_.delay(m.trigger,10,"ozfeed-comment-box-render")})},_submit:function(){var a=this.$textarea.attr("disabled","disabled"),b=a.val().replace(/\r\n?/g,"\n"),c=this.$mentions.val(),e=this.$el.find(g).addClass("submitting").attr("disabled",
"disabled");v.call(this,b,c).done(_.bind(function(f){this.commentList||dust.render("ozfeed-templates/blocks/comment-list",{isNested:this.isReplyBox},_.bind(s,this));f=this._createCommentOptions(f);this.commentList.addMyComment(b,c?d.parseJSON(c):"",f);a.val("").trigger("change");this._shrink();this.$mirror.text("");this.isReplyBox&&this.hide();e.is(".for-review")&&this.render({buttonDisabled:!0})},this)).always(_.bind(function(){e.removeClass("submitting");a.removeAttr("disabled");_.defer(_.bind(this._reset,
this))},this))},_validate:function(){var a=d.trim(this.$textarea.val()).length;1250<a?(this.isOverMaxCharLimit=!0,this.render({charsLeft:a-1250,buttonDisabled:!0})):this.isOverMaxCharLimit?(this.isOverMaxCharLimit=!1,this.render({buttonDisabled:!1})):this.$el.find(g).attr("disabled",function(){return 0===a});return 0<a&&1250>=a}}})})($,LI,dust);
(function(){function g(a){var b=a+"Comments";a+="Offset";var c=this.findCorrespondingViewInParent(this.$el,m),d=this.findCorrespondingViewInParent(this.$el,n);c[b]();c[a]();if(d)d[a]()}var h=LIModules.requires("jquery"),f=LIModules.requires("underscore"),k=LIModules.requires("OzFeed"),l=LIModules.requires("OzHelpers"),m="comments-social-summary",n="show-previous-comments";LIModules.requires("OzFeedUpdate").addView({block:"comment-entity",methods:{init:function(){this.model.on("change:state",this.render,
this)},render:function(){var a=this.$el;a.addClass("removing");k.Util.setupTransition({$el:a,eventCallback:f.bind(function(b){"min-height"===b.originalEvent.propertyName&&(this.removeSelf(),this.findCorrespondingViewInParent(a,"comment-list").checkIfEmpty())},this)});f.defer(function(){a.addClass("delete")})},findCorrespondingViewInParent:function(a,b){var c=this.update._getParentCommentEntity(a),d=this.update.getViews(b),e;c?(e=c.$el.find('[data-block\x3d"'+b+'"]'),d=f.first(f.filter(d,function(a){return c.$el[0]===
a.$el.closest('[data-block\x3d"comment-entity"]')[0]&&a.$el[0]===e[0]}))):d=d[0];return d},toggleHover:function(a){var b=this.$el;b.toggleClass("hover",a);a?b.mouseleave(f.bind(function(){this.deleteComment||(this.deleteComment=this.update.getViews("delete-comment",{ancestor:"comment-entity",$context:b})[0]);this.deleteComment&&this.deleteComment.closeTooltip();this.flagHideComment||(this.flagHideComment=this.update.getViews("flag-hide-comment",{ancestor:"comment-entity",$context:b})[0]);this.flagHideComment&&
this.flagHideComment.closeTooltip();this.reportComment||(this.reportComment=this.update.getViews("report-comment",{ancestor:"comment-entity",$context:b})[0]);this.reportComment&&this.reportComment.closeTooltip();b.removeClass("hover")},this)):b.off("mouseleave")},addDeleteAction:function(a){a=a.content;this.deleteComment||(a="/hp/modules/action-endpoints/deleteComment/"+a.objectUrn+"/"+a.commentID,dust.render("ozfeed-templates/blocks/comment-actions/delete-comment",{url:k.Util.addCsrfToken(a)},f.bind(function(a,
c){var d=h(c),e=this.$el;e.append(d);this.deleteComment=this.update.initView(d);e.addClass("deletable")},this)))},deleteSelf:function(){this.model.set("state","deleted");g.call(this,"decrement")},hideAsSpam:function(){this.$el.addClass("hidden");g.call(this,"decrement");this.$hiddenComment||dust.render("ozfeed-templates/partials/_hidden-spam-comment",{},f.bind(function(a,b){var c=h(b);this.$el.prepend(c);this.update.initView(c);this.$hiddenComment=c},this))},hide:function(a,b){this.$el.addClass("hidden");
g.call(this,"decrement");this.$hiddenComment||dust.render("ozfeed-templates/partials/_hidden-comment",{undoUrl:b},f.bind(function(a,b){var e=h(b);e.data("commentEntity",this);this.$el.prepend(e);this.update.initView(e);this.$hiddenComment=e},this));l.ajax({url:a})},undoHide:function(a){this.$el.removeClass("hidden");g.call(this,"increment");l.ajax({url:a})}}})})();
(function(){var h=LIModules.requires("jquery"),e=LIModules.requires("underscore"),g=LIModules.requires("dust"),k=LIModules.requires("Events"),f=LIModules.requires("OzFeed"),l=LIModules.requires("OzFeedUpdate"),m=LIModules.requires("t8"),n=e.template("/profile/view?id\x3d\x3c%-id%\x3e\x26trk\x3dhp-feed-sharer-name"),p=e.template("/company/\x3c%-id%\x3e?\x26trk\x3dhp-feed-company-name"),q=e.template("/edu/school?id\x3d\x3c%-id%\x3e\x26trk\x3dhp-feed-school-name");l.addView({block:"comment-list",syncWithRMV:!0,
methods:{init:function(){this.collapsedHeight=0;this.$list=this.$el.children();this.model.on("change:comments",this.render,this)},render:function(c,a,b){f.log("adding comments");c=this.model.get("comments");g.render("ozfeed-templates/partials/_inserted-comments",e.extend({isPublic:this.update.isPublic},c[c.length-1]),e.bind(function(a,c){var e=this.$list.closest(".comment-list");this._$lastInsertedComments=h(c);this._$lastCommentEntities=this._$lastInsertedComments.children();this._$lastInsertedComments.addClass("highlighted");
e.hasClass("nested")&&this.$list.closest(".comment-list").addClass("inserting-comments");b.myComment?this._renderOwnComment():this._renderPreviousComments();this.update.$el.find(".comment-list").first().addClass("expanded");this.update.$el.find(".comment-entity").last().addClass("last-comment")},this));setTimeout(e.bind(function(){this.model.set("comments",[],{silent:!0})},this),20)},createCommentUrn:function(c,a){var b,d,e,f;b=0===a.indexOf("urn:li")?a.replace("urn:li:",""):a;e=b.match(/activity:\d+/);
f=b.match(/article:\d+/);(b=b&&e&&0<e.length?e[0]:b&&f&&0<f.length?f[0]:b)&&c&&(d="urn:li:comment:("+b+","+c+")");return d},generateCommentBox:function(c,a,b){var d="?csrfToken\x3d"+f.Util.getCsrfToken();return e.extend({template:"comment-box",url:{base:"/hp/modules/action-endpoints/comment"+d,params:{objectUrn:c,attributedActivityUrn:a,createViralActivity:!0,isComment:!0}},isPublic:this.update.isPublic,type:"reply"},b||{})},generateCommentActions:function(c,a){var b="?csrfToken\x3d"+f.Util.getCsrfToken(),
d=[];a.like&&d.push({template:"actions/like/like",type:"comment",likeUrl:{base:"/hp/modules/action-endpoints/like/"+c+b,params:{}},unlikeUrl:{base:"/hp/modules/action-endpoints/unlike/"+c+b,params:{}}});a.reply&&d.push({template:"actions/reply"});return{template:"comment-social-actions",blocks:[{template:"actions",blocks:d}]}},_renderPreviousComments:function(){var c=this._$lastInsertedComments,a=this.$list;a[0].scrollTop=0;a.prepend(c);f.Util.truncateAll(c);c.css("margin-top",-(c.height()+5));this._setupTransition();
this.update.initView(c.find("[data-block]"))},_renderOwnComment:function(){var c=this._$lastInsertedComments,a=this.$list,b;a.append(c);c.addClass("hidden");this._$lastCommentEntities.find("[data-truncate]").addClass("expanded").removeAttr("data-truncate");this._setupTransition(!0);this.commentBox||(this.commentBox=this.update.getCorrespondingUpdateView(this.$el,"comment-box"));c=this.update.initView(c.find("[data-block]"),"comment-entity")[0];b=h(".rich-media-viewer .rmv-section .scrollable");a=
b.length?b[0]:a[0];a.scrollTop=a.scrollHeight;return c},_setupTransition:function(c){var a=this._$lastInsertedComments;f.Util.setupTransition({$el:a,eventCallback:e.bind(function(b){b=b.originalEvent.propertyName;var c=a.closest(".comment-list");"border-left-color"===b?(a.off(f.Util.getTransitionEndEvent()),this._$lastCommentEntities.unwrap()):(a.removeClass("inserting"),c.hasClass("nested")&&c.removeClass("inserting-comments"),e.delay(function(){k.trigger("ozfeed-comment-list-render",{insertedComments:a});
a.removeClass("highlighted")},20))},this)});e.delay(function(){a.addClass("inserting");c?a.removeClass("hidden"):a.css("margin-top","")},20)},_applyMentionsHighlighting:function(c,a){var b=[],d,e;for(d=0;d<a.length;d++)b.push({template:"text",text:c.substring(d?a[d-1].index+a[d-1].length:0,a[d].index)}),e="company"===a[d].type?p({id:a[d].id}):"school"===a[d].type?q({id:a[d].id}):n({id:a[d].id}),b.push({template:"miniprofile",mentioned:!0,url:e,name:c.substr(a[d].index,a[d].length),type:a[d].type+
"-mention"});b.push({template:"text",text:c.substring(d?a[d-1].index+a[d-1].length:0,c.length)});return b},checkIfEmpty:function(){this.$list.children().length||this.$el.hide()},show:function(){this.$el.show()},insertComments:function(c,a){var b=this.model,d=b.get("comments")||[];this.show();d.push(c);b.set("comments",d,{silent:!0});b.trigger("change:comments",this.model,null,a||{})},addMyComment:function(c,a,b){var d,f;(new m.Resources(g.i18n,g)).get("i18n_now","ozfeed-templates/partials/_i18n",
{},e.bind(function(d,e){b.now=e;f={blocks:[this._generateCommentEntity(c,a,b)]}},this));this.insertComments(f,e.extend({},b,{myComment:!0}));this.commentsSocialSummary||(this.commentsSocialSummary=this.update.getCorrespondingUpdateView(this.$el,"comments-social-summary"));this.commentsSocialSummary?(this.commentsSocialSummary.incrementComments(),this.commentsSocialSummary.incrementOffset()):g.render("ozfeed-templates/blocks/social-summary/comments-social-summary",{total:1,allShown:!0},e.bind(function(a,
b){var c=h(b),d=this.update.getCorrespondingUpdateView(this.$el,"likes-social-summary"),e=this.update.getCorrespondingUpdateView(this.$el,"actions");if(d)d.insertAfter(c);else if(e)e.insertAfter(c);else return;this.commentsSocialSummary=this.update.initView(c)[0]},this));(d=this.update.getCorrespondingUpdateView(this.$el,"show-previous-comments"))&&d.incrementOffset()},_generateCommentEntity:function(c,a,b){var d=LIModules.requires("ozFeed").getMemberData(),e="";c=[{template:"images/xsmall-member-image",
name:d.name,type:"member-commenter",photo:d.photo,url:play.addQueryParameter(d.url,"trk","hp-feed-commenter-photo"),mprSize:100},{template:"header",blocks:[{template:"meta",timeAgo:b.now},{template:"sub-headlines/actor",type:"member-commenter",name:d.name,url:play.addQueryParameter(d.url,"trk","hp-feed-commenter-name")}]},{template:"text-entities/comment-text",wads:this._applyMentionsHighlighting(c,a)}];b&&(b.commentId&&b.objectUrn)&&(e=this.createCommentUrn(b.commentId,b.objectUrn),b.actions&&c.push(this.generateCommentActions(e,
b.actions)),b.actions&&(b.actions.reply&&!this.$el.hasClass("nested"))&&c.push(this.generateCommentBox(e,b.attributedObjectUrn,b.lixes)));return{blocks:c,template:"comment-entity",id:e.replace("urn:li:","")}}}})})();
(function(){var a=LIModules.requires("OzFeedUpdate"),b=LIModules.requires("OzFeed");a.addView({block:"comment",events:{click:function(a){b.log("clicked on comment");this._focusCommentBox()}},methods:{_focusCommentBox:function(){this.commentList||(this.commentList=this.update.getCorrespondingUpdateView(this.$el,"comment-list"))&&this.commentList.show();this.showPreviousComments||(this.showPreviousComments=this.update.getCorrespondingUpdateView(this.$el,"show-previous-comments"))&&this.showPreviousComments.show();
this.commentBox||(this.commentBox=this.update.getCorrespondingUpdateView(this.$el,"comment-box"));this.commentBox.focus()}}})})();
(function(){LIModules.requires("OzFeedUpdate").addView({block:"comment-social-actions",methods:{insertAfter:function(a){this.$el.after(a)}}})})();
(function(){var f=LIModules.requires("jquery"),e=LIModules.requires("underscore"),g=LIModules.requires("OzFeedUpdate"),d=LIModules.requires("OzFeed");g.addView({block:"comments-social-summary",syncWithRMV:!0,events:{click:function(a){this.model.get("url")&&!this.fetching&&(d.log("fetch more comments"),this._fetchMoreComments())}},methods:{init:function(){var a=this.$el,b=this.model,c=b.get("url");this.type=a.data("type");this.isRepliesType="replies"===this.type;this.$action=a.find(".count");c||(c=
this.$action.data("url"),b.set("url",c));this.$loader=f('\x3cspan class\x3d"loading hidden"/\x3e');a.append(this.$loader);b.set("fetching",!1);b.set("all-shown",a.find(".count").prop("disabled"));b.set("commentsCount",+a.data("count"));b.set("offset",c?+play.getUrlParameter(c,"offset"):0);b.set("insertCount",c?+play.getUrlParameter(c,"count"):0);b.on("change:commentsCount change:all-shown",this.render,this);b.on("change:fetching",this._toggleFetching,this);b.on("change:offset change:insertCount",
this._updateUrl,this)},render:function(){dust.render("ozfeed-templates/blocks/social-summary/comments-social-summary",{type:this.type,total:this.model.get("commentsCount"),url:this.url,allShown:this.model.get("all-shown")},e.bind(function(a,b){this.update.replaceAndBind(this.id,b);this.$el.toggleClass("hidden",0===this.model.get("commentsCount"))},this))},_toggleFetching:function(){var a=this.model,b=this.$action,c=this.$loader;a.get("fetching")?(b.prop("disabled",!0),c.removeClass("hidden")):(a.get("all-shown")||
(b.prop("disabled",!1),b.focus()),c.addClass("hidden"))},_fetchMoreComments:function(){var a=this.model;a.set("fetching",!0);this.commentList||(this.commentList=this.update.getCorrespondingUpdateView(this.$el,"comment-list"))||dust.render("ozfeed-templates/blocks/comment-list",{isNested:this.isRepliesType},function(a,c){var d=f(c),e=this.update.getCorrespondingUpdateView(this.$el,"show-previous-comments");e?e.$el.after(d):this.$el.after(d);this.commentList=this.update.initView(d)[0]}.bind(this));
this.commentList&&d.Util.ajax({url:a.get("url"),success:e.bind(function(b){d.log("ajax succeeded");this.showPreviousComments||(this.showPreviousComments=this.update.getCorrespondingUpdateView(this.$el,"show-previous-comments"));this.commentList.show();this.commentList.insertComments(b);a.set("url",b.paginationUrl);a.get("url")?(this.showPreviousComments&&this.showPreviousComments.incrementOffset(this.model.get("insertCount")),this.model.set("offset",+play.getUrlParameter(a.get("url"),"offset"))):
(this.allCommentsInjected(),this.showPreviousComments&&this.showPreviousComments.setDone(!0))},this),error:function(){d.log("ajax failed");d.log("error handler has not been implemented yet")},complete:function(){a.set("fetching",!1)}})},_updateUrl:function(){var a=this.model,b;a.get("url")&&(b=play.addQueryParameter(a.get("url"),"offset",""+a.get("offset")),b=play.addQueryParameter(b,"count",""+a.get("insertCount")),a.set("url",b))},incrementComments:function(){var a=this.model;a.set("commentsCount",
a.get("commentsCount")+1)},decrementComments:function(){var a=this.model;a.set("commentsCount",a.get("commentsCount")-1)},allCommentsInjected:function(){var a=this.model;a.set("url",null);a.set("all-shown",!0);a.off("change:all-shown")},incrementOffset:function(a){var b=this.model;b.set("offset",b.get("offset")+(a||1))},decrementOffset:function(a){var b=this.model;a=b.get("offset")-(a||1);b.set("offset",0>a?0:a)}}})})();
(function(){var b=LIModules.requires("jquery"),c=LIModules.requires("underscore"),f=LIModules.requires("Dropdown"),e=LIModules.requires("Events"),g=LIModules.requires("OzFeed");b(function(){c.defer(function(){function d(a){a.updateActionsDropdown=new f(a.find(".comment-control-actions"),{triggerSelector:".comments-trigger",eventType:"hover",focusClass:"focused"});a.mouseleave(a.updateActionsDropdown.close)}c.each(b(".comment-body"),function(a){d(b(a))});e.on(g.OZFEED_NEW_UPDATES_EVENT,function(a){c.each(a.newUpdates.find(".comment-body"),
function(a){d(b(a))})});e.on("ozfeed-comment-list-render",function(a){c.each(a.insertedComments.find(".comment-body"),function(a){d(b(a))})})})})})();
(function(){function d(a){a.attr(g)&&e.addTooltips({$el:a,dataAttribute:g,type:b})}var h=LIModules.requires("jquery"),f=LIModules.requires("underscore"),l=LIModules.requires("Events"),m=LIModules.requires("OzFeedUpdate"),c=LIModules.requires("OzFeed"),n=LIModules.requires("OzFeedTrackingRouter"),e,b="delete-tooltip",k=b+"-id",g="data-"+k;m.addView({block:"delete-comment",events:{click:function(){c.log("clicked on delete comment button");this.closeTooltip();this._promptDelete()},focusin:function(){this.commentEntity.toggleHover(!0)},
focusout:function(){this.commentEntity.toggleHover(!1)}},methods:{init:function(){this.url=this.$el.data("url");this.params=this.$el.data("params");d(this.$el);this.commentEntity=this.update.getCorrespondingUpdateView(this.$el,"comment-entity")},_promptDelete:function(){this.$el.data("dialog")||(this.textEntity=this.update.getCorrespondingUpdateView(this.$el,"text-entity"),this._setupDialog())},_setupDialog:function(){var a={closeOnMaskClick:!0,decorators:["scripts/shared/Dialog/DecisionModalDialog"],
submitSelector:".confirm",submitCallback:f.bind(function(){var a=this.$el,b;this.url?(a.prop("dialog").close(),b=a.next(".comment-entity"),b.length&&b.focus(),this._deleteComment(),this._trackCommentDeletion(a)):c.debug("delete url has not been initialized yet")},this),cancelSelector:".cancel",cancelCallback:f.bind(function(){this.$el.prop("dialog").close()},this)};c.Util.setupDialog({$el:this.$el,template:"ozfeed-templates/partials/_delete-comment-dialog",id:"delete-comment-dialog-"+this.id,data:{comment:this.textEntity.getContents()},
titleKey:"i18n_please_confirm",jsConfig:a})},_trackCommentDeletion:function(a){a.attr("data-trk-key")&&n.track(a,a.attr("data-trk-key"))},_deleteComment:function(){c.Util.ajax({url:this.url,data:this.params,type:"POST"});this.closeTooltip();this.commentEntity.deleteSelf()},remove:function(){this.removeSelf()},closeTooltip:function(){this.$el.blur()}}});h(function(){f.defer(function(){e=LIModules.requires("ozFeed");e.addTooltipFactory({type:b,jsConfig:{tooltipContentID:b,dataAttribute:k,delayClose:0}});
d(h(".delete-comment"));l.on(c.OZFEED_NEW_UPDATES_EVENT,function(a){d(a.newUpdates.find(".delete-comment"))})})})})();
(function(){LIModules.requires("jquery");var b=LIModules.requires("underscore"),a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"delete-update",events:{click:function(){a.log("clicked on delete update button");this._promptDelete()}},methods:{init:function(){this.url=this.$el.data("url")},_promptDelete:function(){this.$el.data("dialog")||this._setupDialog()},_setupDialog:function(){var c={closeOnMaskClick:!0,decorators:["scripts/shared/Dialog/DecisionModalDialog"],
submitSelector:".confirm",submitCallback:b.bind(function(){this._deleteUpdate();this.$el.data("dialog").close()},this),cancelSelector:".cancel"};a.Util.setupDialog({$el:this.$el,template:"ozfeed-templates/partials/_delete-update-dialog",id:"delete-update-dialog",titleKey:"i18n_please_confirm",jsConfig:c})},_deleteUpdate:function(){a.Util.ajax({url:this.url,type:"POST"});this.update.deleteSelf()}}})})();
(function(){var b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"dismiss-recommendation",events:{click:function(){this._dismissRecommendation()}},methods:{_dismissRecommendation:function(){var a=this.$el,c,d,e;c=this.update.getViews("recommendation-entity",{ancestor:"recommendation-entity",$context:a,firstBlock:!1})[0];d=a.data("recommendation-type");"endorsement"===d&&(e=a.data("dismiss-url"),a=a.data("signature"),b.Util.ajax({url:e,data:{csrfToken:b.Util.getCsrfToken(),
signature:a},success:function(){b.log("ajax call succeeded")},error:function(){b.log("ajax failed")}}));c&&c.remove("endorsement"===d)}}})})();
(function(){var a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"dismiss-recommendation-endorse",events:{click:function(){a.log("clicked on dismiss recommendation endorse action");this._dismissRecommendation()}},methods:{_dismissRecommendation:function(){var b,c,d;b=this.update.getViews("recommendation-entity",{ancestor:"recommendation-entity",$context:this.$el,firstBlock:!1})[0];c=b.$el.closest(".recommendations").data("dismiss-url");d=b.$el.data("signature");a.Util.ajax({url:c,
data:{csrfToken:a.Util.getCsrfToken(),signature:d},success:function(){a.log("ajax call succeeded")},error:function(){a.log("ajax failed")}});b.remove(!0)}}})})();
(function(){var b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"dismiss-update",events:{click:function(a){b.log("clicked on dismiss action");this._dismiss()}},methods:{_dismiss:function(){this.update.dismissSelf(_.bind(function(){var a=this.update.$el.parents(".feed.updates.promo");this.update.$el.remove();a.length&&a.remove()},this))}}})})();
(function(){LIModules.requires("underscore");var b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"hide-update",events:{click:function(){b.log("clicked on hide update button");this._hideUpdate()}},methods:{init:function(){var a=this.$el;this.hideUrl=a.data("hide-url");this.undoUrl=a.data("undo-url");this.fromActor=a.data("from-actor");this.enableActivityHide=a.data("enable-activity-hide")},_hideUpdate:function(){b.Util.ajax({url:this.hideUrl,type:"POST"});this.update.hideSelf(this.undoUrl,
this.fromActor,this.enableActivityHide)}}})})();
(function(){LIModules.requires("underscore");var b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"unfollow-update",events:{click:function(){b.log("clicked on unfollow update button");this._hideUpdate()}},methods:{init:function(){var a=this.$el;this.unfollowUrl=a.data("unfollow-url");this.undoUrl=a.data("undo-url");this.fromActor=a.data("from-actor");this.actorName=a.data("actor-name")},_hideUpdate:function(){b.Util.ajax({url:this.unfollowUrl,type:"POST"});this.update.hideSelfForUnfollow(this.undoUrl,
this.fromActor,this.actorName)}}})})();
(function(){LIModules.requires("underscore");var c=LIModules.requires("OzFeed"),d=LIModules.requires("OzFeedUpdate"),e=LIModules.requires("SpamReportDialog");d.addView({block:"report-update",events:{click:function(a){c.log("clicked on report update button");this._reportUpdate(a)}},methods:{init:function(){var a=this.$el;this.entityUrn=a.data("entity-urn");this.authorUrn=a.data("author-urn");this.profileId=a.data("profile-id");this.contentSource=a.data("content-source")},_reportUpdate:function(a){var b=
"/psettings/flagging-menu?entityUrn\x3d"+this.entityUrn+"\x26contentSource\x3d"+this.contentSource;this.profileId?b+="\x26authorProfileId\x3d"+this.profileId:this.authorUrn&&(b+="\x26authorUrn\x3d"+this.authorUrn);var c=this,b={tlPathPrefix:"tl/shared",templateDataUrl:b,maskTemplate:"tl/shared/dialog_mask",cssPreloaded:!0,title:LI.i18n.get("ozfeed_i18n_title_spam_report_dialog"),callbacks:{submitSuccess:function(){c.update.hideSelfForReportUpdate()}}};(new e(a,b)).open()}}})})();
(function(){function d(a){a.attr(f)&&e.addTooltips({$el:a,dataAttribute:f,type:c})}var k=LIModules.requires("underscore"),g=LIModules.requires("OzFeed"),l=LIModules.requires("Events"),m=LIModules.requires("OzFeedUpdate"),n=LIModules.requires("SpamReportDialog"),e,c="report-comment-tooltip",h=c+"-id",f="data-"+h;m.addView({block:"report-comment",events:{click:function(a){g.log("clicked on report comment button");this._reportComment(a)},focusin:function(){this.commentEntity.toggleHover(!0)},focusout:function(){this.commentEntity.toggleHover(!1)}},
methods:{init:function(){var a=this.$el;this.entityUrn=a.data("entity-urn");this.authorUrn=a.data("author-urn");this.profileId=a.data("profile-id");this.contentSource=a.data("content-source");this.commentEntity=this.update.getViews("comment-entity",{ancestor:"comment-entity",$context:this.$el,firstBlock:!1})[0];d(this.$el)},closeTooltip:function(){this.$el.blur()},_reportComment:function(a){var b="/psettings/flagging-menu?entityUrn\x3d"+this.entityUrn+"\x26contentSource\x3d"+this.contentSource;this.profileId?
b+="\x26authorProfileId\x3d"+this.profileId:this.authorUrn&&(b+="\x26authorUrn\x3d"+this.authorUrn);var c=this,b={tlPathPrefix:"tl/shared",templateDataUrl:b,maskTemplate:"tl/shared/dialog_mask",cssPreloaded:!0,title:LI.i18n.get("ozfeed_i18n_title_spam_report_dialog"),callbacks:{submitSuccess:function(){c.hide()}}};(new n(a,b)).open()},hide:function(){this.closeTooltip();this.commentEntity.hideAsSpam()}}});$(function(){k.defer(function(){e=LIModules.requires("ozFeed");e.addTooltipFactory({type:c,jsConfig:{tooltipContentID:c,
dataAttribute:h,delayClose:0}});d($(".report-comment"));l.on(g.OZFEED_NEW_UPDATES_EVENT,function(a){d(a.newUpdates.find(".report-comment"))})})})})();
(function(){var a=LIModules.requires("jquery");LIModules.requires("underscore");LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"hidden-comment",events:{click:function(b){a(b.target).is(".undo")&&this.undo()}},methods:{init:function(){this.commentEntity=this.update.getViews("comment-entity",{ancestor:"comment-entity",$context:this.$el,firstBlock:!1})[0];this.undoUrl=this.$el.find(".undo").data("url")},undo:function(){this.commentEntity.undoHide(this.undoUrl)}}})})();
(function(){LIModules.requires("jquery");LIModules.requires("underscore");var a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"scin-debug",events:{click:function(){this._openDialog()}},methods:{init:function(){this.debugString=this.$el.data("debug-string")},_openDialog:function(){this.$el.data("dialog")||this._setupDialog()},_setupDialog:function(){a.Util.setupDialog({$el:this.$el,template:"ozfeed-templates/partials/_scin-debug-dialog",id:"scin-debug-dialog",titleKey:"i18n_scin_debug_info",
jsConfig:{closeOnMaskClick:!0,decorators:["scripts/shared/Dialog/DecisionModalDialog"],cancelSelector:".cancel"},data:{debugString:this.debugString}})}}})})();
(function(){function b(b){c.addTooltips({$el:b,dataAttribute:f,type:a})}var d=LIModules.requires("jquery"),g=LIModules.requires("underscore");LIModules.requires("dust");var h=LIModules.requires("Events"),k=LIModules.requires("OzFeedUpdate"),l=LIModules.requires("OzFeed"),c,a="flag-hide-tooltip",e=a+"-id",f="data-"+e;k.addView({block:"flag-hide-comment",events:{click:function(){this.hide()},focusin:function(){this.commentEntity.toggleHover(!0)},focusout:function(){this.commentEntity.toggleHover(!1)}},
methods:{init:function(){this.url=this.$el.data("url");this.undoUrl=this.$el.data("undo-url");b(this.$el);this.commentEntity=this.update.getViews("comment-entity",{ancestor:"comment-entity",$context:this.$el,firstBlock:!1})[0]},hide:function(){this.closeTooltip();this.commentEntity.hide(this.url,this.undoUrl)},closeTooltip:function(){this.$el.blur()}}});d(function(){g.defer(function(){c=LIModules.requires("ozFeed");c.addTooltipFactory({type:a,jsConfig:{tooltipContentID:a,dataAttribute:e,delayClose:0}});
b(d(".flag-hide-comment"));h.on(l.OZFEED_NEW_UPDATES_EVENT,function(a){b(a.newUpdates.find(".flag-hide-comment"))})})})})();
(function(){var b=LIModules.requires("underscore"),a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"follow",events:{click:function(c){a.log("clicked on follow action");this._follow()}},methods:{init:function(){this.url=this.$el.data("url");this.model.set("state","not-following");this.model.on("change:state",this.render,this)},render:function(){dust.render("ozfeed-templates/blocks/actions/follow/following",{},b.bind(function(a,b){this.$el.replaceWith(b);this.model.off("change:state")},
this))},_follow:function(){var c=this.update.getViews("recommendation-entity",{ancestor:"recommendation-entity",$context:this.$el,firstBlock:!1})[0];a.Util.ajax({url:this.url,type:"POST",success:b.bind(function(){a.log("ajax succeeded")},this),error:function(){a.log("ajax failed");a.log("error handler has not been implemented yet")}});this.model.set("state","following");c&&c.remove()}}})})();
(function(){var c=LIModules.requires("jquery"),s=LIModules.requires("Events"),h=LIModules.requires("OzFeed");c(function(){function k(){function t(a){a=b.FLAG_PRE+a;x.removeClass(l).addClass(b.COUNTRY_FLAGS).addClass(a);l=a}function m(a){a=(new t8.Resources(dust.i18n,dust)).getStaticString(a,y.GTA);f.addClass(b.HIDDEN);f.html(a);f.removeClass(b.HIDDEN)}function z(){var a=d.val(),e=g.val(),f=n.attr("action");p.prop(u.DISABLED,!0);c.ajax({method:"POST",url:f,data:{csrfToken:h.Util.getCsrfToken(),countryCode:a,
phoneNumber:e},beforeSend:function(a){a.setRequestHeader("X-IsAJAXForm","1")},success:function(a){a=p.data("nux-url");window.location.href=a},error:function(a){m(q.GLOBAL_ERROR)},complete:function(){v.removeClass(b.LOADING);p.prop(u.DISABLED,!1)}})}function A(){var a=d.val()||B,e=d.find(":selected").data("li-phone-code");l=b.FLAG_PRE+a;t(a);w.html("+".concat(e))}var b={COUNTRY_FLAGS:"country-flags",ERROR:"error",FLAG_PRE:"flag-",HIDDEN:"hidden"},u={DISABLED:"disabled"},C=/[0-9\-\s\+\(\)\.]{4,15}/,
q={COUNTRY_ERROR:"gta_country_error",GLOBAL_ERROR:"gta_global_error",PHONE_ERROR:"gta_phone_error"},y={GTA:"ozfeed-templates/blocks/gta"},B="us",l,n=c("#get-the-app-feed-form"),v=c(".message-loader"),x=c(".country-flags"),d=c(".country-dropdown"),f=c(".flash-alerts"),g=c(".phone-input"),w=c("#phone-code-display"),p=c(".submit-button");n.on("submit",function(a){var e;a.preventDefault();e=g.val().match(C);a=d.val()?!0:!1;f.addClass(b.HIDDEN);d.removeClass(b.ERROR);g.removeClass(b.ERROR);a&&e?(v.addClass(b.LOADING),
z()):a?e||(g.addClass(b.ERROR),m(q.PHONE_ERROR)):(d.addClass(b.ERROR),m(q.COUNTRY_ERROR))});d.on("change",function(a){var b=c(this).find(":selected");a=b.attr("value");b=b.data("li-phone-code");t(a);w.html("+".concat(b))});n.length&&!r&&(r=!0,A());r&&s.off(h.OZFEED_NEW_UPDATES_EVENT,k)}var r=!1;k();s.on(h.OZFEED_NEW_UPDATES_EVENT,k)})})();
(function(){var b=LIModules.requires("underscore"),a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"join-group",events:{click:function(b){a.log("clicked on join-group action");this._joinGroup()}},methods:{init:function(){this.url=this.$el.data("url");this.model.set("state","not-member");this.model.on("change:state",this.render,this)},render:function(){dust.render("ozfeed-templates/blocks/actions/join-group/pending",{},b.bind(function(a,b){this.$el.replaceWith(b);this.model.off("change:state")},
this))},_joinGroup:function(){a.Util.ajax({url:this.url,type:"POST",success:b.bind(function(){a.log("ajax call succeeded")},this),error:function(){a.log("ajax failed");a.log("error handler has not been implemented yet")}});this.model.set("state","pending")}}})})();
(function(){var f=LIModules.requires("jquery"),d=LIModules.requires("underscore"),e=LIModules.requires("OzFeed"),g={liked:"unlike","not-liked":"like"};LIModules.requires("OzFeedUpdate").addView({block:"like",syncWithRMV:!0,events:{click:function(a){this._toggleLike();this.mouseAction=!1},mousedown:function(a){this.mouseAction=!0}},methods:{init:function(){var a=this.$el,b=this.model;b.set("like-url",a.data("like-url"));b.set("unlike-url",a.data("unlike-url"));b.set("like-data",a.data("like-data"));
b.set("unlike-data",a.data("unlike-data"));this.type=a.data("type");this.queue=[];this.sending=!1;b.set("state",a.data("liked")?"liked":"not-liked");b.on("change:state",this.render,this)},render:function(){var a=new f.Deferred,b;this._renderAction(a);b=new f.Deferred;this._renderSocialSummary(b);f.when(b.promise(),a.promise()).done(d.bind(function(){this.isLiked()?this.socialSummary.likeByViewer():this.socialSummary.unlikeByViewer()},this))},_renderAction:function(a){dust.render("ozfeed-templates/blocks/actions/like/"+
g[this.model.get("state")],{state:this.model.get("state"),likeUrl:this.model.get("like-url"),unlikeUrl:this.model.get("unlike-url"),type:this.type},d.bind(function(b,c){this.update.replaceAndBind(this.id,c);a.resolve()},this));this.mouseAction||a.done(d.bind(this.$el.focus,this.$el))},_renderSocialSummary:function(a){var b=!!this.update.getCorrespondingUpdateView(this.$el,"comment-entity"),c;if(this.socialSummary=this.update.getCorrespondingUpdateView(this.$el,"likes-social-summary"))a.resolve();
else{c=this.update.getCorrespondingUpdateView(this.$el,"actions");if(!c)return a.reject();dust.render("ozfeed-templates/blocks/social-summary/likes-social-summary",{total:0,noModal:!0,displayUserLiked:b,likedByViewer:!1},d.bind(function(b,d){var e=f(d);c.insertAfter(e);this.socialSummary=this.update.initView(e)[0];a.resolve()},this))}},_handleAjax:function(a,b){var c;a&&this.queue.push({url:a,data:b});this.sending||(this.sending=!0,(c=this.queue.shift())&&e.Util.ajax({url:c.url,type:"POST",data:c.data,
success:d.bind(function(){this.sending=!1;this.queue.length&&this._handleAjax()},this),error:function(){e.log("ajax call failed");e.log("error handler has not been implemented yet")}}))},_toggleLike:function(){var a="liked"===this.model.get("state"),b=a?"not-liked":"liked",c=a?this.model.get("unlike-url"):this.model.get("like-url"),a=a?this.model.get("unlike-data"):this.model.get("like-data");this._handleAjax(c,a);this.model.set("state",b)},isLiked:function(){return"liked"===this.model.get("state")}}})})($,
LI,dust);
(function(){var c=LIModules.requires("jquery"),d=LIModules.requires("underscore"),e=LIModules.requires("Events"),f=LIModules.requires("OzFeed"),g=["change:likedByViewer","change:likesCount"];LIModules.requires("OzFeedUpdate").addView({block:"likes-social-summary",syncWithRMV:!0,events:{click:function(a){this.noModal||e.trigger("click-show-likes",{$el:c(a.target)})}},methods:{init:function(){var a=this.$el,b=a.find(".count");this.url=b.data("href");this.noModal=b.prop("disabled");this.displayUserLiked=
a.data("displayUserLiked");this.model.set("likesCount",+a.data("count"));this.model.set("likedByViewer",a.data("liked-by-viewer")||!1);this.model.on(g.join(" "),this.render,this)},render:function(){f.log("rerender social summary likes");var a=this.generateViewModel();dust.render("ozfeed-templates/blocks/social-summary/likes-social-summary",a,d.bind(function(a,c){this.update.replaceAndBind(this.id,c);this.$el.toggleClass("hidden",0===this.model.get("likesCount"))},this))},generateViewModel:function(){return{total:this.model.get("likesCount"),
url:this.url,noModal:this.noModal,likedByViewer:this.model.get("likedByViewer"),displayUserLiked:this.displayUserLiked}},likeByViewer:function(){var a=this.model,b={};a.get("likedByViewer")||(b.likesCount=a.get("likesCount")+1,b.likedByViewer=!0);a.set(b)},unlikeByViewer:function(){var a=this.model,b={};a.get("likedByViewer")&&(b.likesCount=a.get("likesCount")-1,b.likedByViewer=!1);a.set(b)},insertAfter:function(a){this.$el.after(a)}}})})();
(function(){function b(e){LIModules.requires("ozFeed").addTooltips({$el:e,dataAttribute:f,type:a})}var c=LIModules.requires("jquery"),g=LIModules.requires("underscore"),h=LIModules.requires("OzFeed"),k=LIModules.requires("Events"),a="sponsored-tooltip",d=a+"-id",f="data-"+d;c(window).load(function(){g.defer(function(){LIModules.requires("ozFeed").addTooltipFactory({type:a,jsConfig:{type:"hovercard",tooltipContentID:a,dataAttribute:d}});b(c(".sponsored"));k.on(h.OZFEED_NEW_UPDATES_EVENT,function(a){b(a.newUpdates.find(".sponsored"))})})})})();
(function(){var d=LIModules.requires("jquery"),c=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"permalink",events:{click:function(b){c.log("clicked on permalink button");this._promptCopy()}},methods:{init:function(){var b=window.location.host,a=this.$el.data("permalink-url");this.url=b+a},_promptCopy:function(){this.$el.data("dialog")||this._setupDialog()},_setupDialog:function(){var b=this;c.Util.setupDialog({$el:this.$el,template:"ozfeed-templates/partials/_copy-permalink-dialog",
id:"copy-permalink-dialog",data:{permalinkUrl:this.url},titleKey:"i18n_permalink",jsConfig:{callbacks:{afterOpen:function(){var a=d(".permalink-url");a.focus();a.select();a.click(function(){this.select()})},afterClose:function(){b.$el.removeData("dialog")}}}})}}})})();
(function(){var d=LIModules.requires("jquery"),e=LIModules.requires("underscore"),f=LIModules.requires("OzFeed"),g={collapsed:"ozfeed-templates/blocks/rich-media/presentation",expanded:"ozfeed-templates/partials/_embedly"};LIModules.requires("OzFeedUpdate").addView({block:"presentation",events:{click:function(a){var b=d(a.target);a.preventDefault();if(b.parents("a").length||b.is("a"))b.is(".close")?this.model.set("state","collapsed"):this.model.get("fetching")||this._embedly(this.url,e.bind(function(){this.model.set("state",
"expanded")},this),e.bind(function(){f.log("error handler has not been implemented yet")},this))}},methods:{init:function(){var a=this.model,b=this.$el.find(".image");this.$loader=d('\x3cspan class\x3d"loading hidden"/\x3e');this.url=b.attr("href");b.append(this.$loader);a.set("state","collapsed");a.set("fetching",!1);a.on("change:state",this.render,this);a.on("change:fetching",this._toggleFetching,this)},render:function(){var a=this.$el,b=this.model.get("state");a.css("height",this.embedlyCache.height);
dust.render(g[b],this.embedlyCache,function(b,c){a.html(c);a.css("height",a.find(".embedly").height())});a.addClass("presentation-"+b)},_toggleFetching:function(){this.$loader.toggleClass("hidden",!this.model.get("fetching"))},_embedly:function(a,b,f){var c=this.model;c.set("fetching",!0);this.embedlyCache?(b(this.embedlyCache),c.set("fetching",!1)):(c.set("fetching",!0),d.getJSON("//api.embed.ly/1/oembed?"+d.param({key:"b8949c0eb73c11e089614040d3dc5c07",url:a,width:Math.floor(this.$el.width()),autoplay:!0,
secure:0<=location.protocol.indexOf("https")})+"\x26callback\x3d?").done(e.bind(function(a){this.embedlyCache=a;b(a)},this)).fail(f).always(function(){c.set("fetching",!1)}))}}})})();
(function(){var d=LIModules.requires("underscore"),e=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"recommendation-entity",methods:{init:function(){this.model.set("state","shown");this.model.on("change:state",this.render,this)},render:function(){this.$el.addClass("remove");this.model.off("change:state")},_removeBlock:function(){var a,b;this.removeSelf();this.recommendations.resetList(!1);if(this.recommendations.getList().length<=this.recommendations.numVisibleRecommendations){a=
this.update.getViews("see-more-recommendations")[0];b=this.update.getViews("dismiss-recommendation");a&&a.remove();a=0;for(var c=b.length;a<c;a++)b[a].removeSelf()}},remove:function(a){var b=this.$el,c;this.recommendations=this.update.getViews("recommendations")[0];this.recommendations||(this.recommendations=this.update.getViews("recommendations-endorse")[0]);if(this.recommendations.lixEndorsementsRedesign||this.recommendations.getList().length>this.recommendations.numVisibleRecommendations)a?this.model.set("state",
"remove"):setTimeout(d.bind(function(){this.model.set("state","remove")},this),200),c=e.Util.setupTransition({$el:b,deferred:c,eventCallback:d.bind(function(a){"width"===a.originalEvent.propertyName&&this._removeBlock()},this)})}}})})();
(function(){function f(a,b){a&&(b&&b.length)&&c.Util.ajax({url:a,data:{csrfToken:c.Util.getCsrfToken(),signatures:b},success:function(){c.log("impression ajax succeeded")},error:function(){c.log("impression ajax failed")}})}function g(a){var b=[];d.each(a,function(a){a=e(a);a.data(h)||(b.push(a.data("signature")),a.data(h,!0))});return b}var e=LIModules.requires("jquery"),d=LIModules.requires("underscore"),c=LIModules.requires("OzFeed"),k=LIModules.requires("OzFeedUpdate"),l=LIModules.requires("UserActivityTrackingInstance"),
h="impressioned";k.addView({block:"recommendations",methods:{init:function(){var a=this.$el,b=this.model;this.impressionUrl=a.data("impression-url");this.fetchUrl=a.data("fetch-url");this.numVisibleRecommendations=3;b.set("recommendationsList",[]);this._resetBuffer();this._resetList();b.on("change:pendingRecommendations",this.render,this);b.on("change:recommendationsList",d.debounce(d.bind(this._fireImpressionEvent,this),500))},render:function(){dust.render("ozfeed-templates/blocks/recommendations",
this.model.get("pendingRecommendations"),d.bind(function(a,b){var c=e("\x3cdiv/\x3e").html(b).find(".recommendation-entity");this.$el.append(c);this.update.initView(c.find("button[data-block]").addBack());this._resetBuffer()},this))},_resetBuffer:function(){this.model.set("pendingRecommendations",{},{silent:!0})},_resetList:function(a){this.model.set("recommendationsList",this.update.getViews("recommendation-entity"),{silent:"boolean"===typeof a?a:!0})},_fireImpressionEvent:function(){var a=this.model.get("recommendationsList").slice(0,
3),a=d.map(a,function(a){return a.$el}),b=g(a);e.each(a,function(){var a=e(this);a.attr("data-li-utrk-impr_fired")||a.attr("data-li-utrk-impr","")});l.fireImpressionEvents(this.$el);f(b);this._addRecommendations()},_addRecommendations:function(){12>=this.model.get("recommendationsList").length&&c.Util.ajax({url:this.fetchUrl,success:d.bind(function(a){c.log("ajax call to add more recommendations succeeded");this.model.set("pendingRecommendations",a,{silent:!0});this._resetList()},this),error:function(){c.log("ajax to add more recommendations failed")}})},
getList:function(){return this.model.get("recommendationsList")},resetList:function(a){this._resetList(!1)},resetVisibleRecommendations:function(){var a=this.model.get("recommendationsList");a.length||(this._resetList(),a=this.model.get("recommendationsList"));d.each(a.slice(0,3),function(a){a.remove()})}}});e(function(){e('[data-block\x3d"recommendations"]').each(function(){var a=e(this),b=a.find(".recommendation-entity").slice(0,3),b=g(b);f(a.data("impression-url"),b)})})})();
(function(){function m(){d.remove()}function n(a){var e={},c;b.each(b.keys(a),function(d){c=a[d];switch(d){case "experience":c=c.split("-");2===c.length&&b.each(c,function(a,b){e[b?"seniorityMaxLevel":"seniorityMinLevel"]=a});break;case "locations":c=c.split(","),0<c.length&&(e.locations=c)}});return e}function p(a){var e=this.params;b.extend(e,a,{csrfToken:g.Util.getCsrfToken()});return g.Util.ajax({url:this.url,type:"POST",data:e})}var h=LIModules.requires("jquery"),b=LIModules.requires("underscore");
LIModules.requires("Dropdown");LIModules.requires("DoubleSlider");var f=LIModules.requires("Events"),g=LIModules.requires("OzFeed"),d,k,l;LIModules.requires("OzFeedUpdate").addView({block:"job-preferences",events:{submit:function(a){a.preventDefault();f.trigger("before_job_preferences_set")&&this._submit()}},methods:{init:function(){var a=this.$el;this.url=a.data("url");this.params=a.data("params");this.preferenceElements=a.find(".job-preference-value");d=this.$el.find(".job-preferences-err");k=h("#global-alert-queue");
d.remove().removeClass("hidden").removeClass("job-preferences-err");f.on("before_job_preferences_set",b.bind(this._showOverlay,this));f.on("after_job_preferences_set",b.bind(this._hideOverlay,this));this.model.on("change:state",this.render,this)},render:function(a,e){"saved"===e&&(this.update.$el.find(".job-preferences-save-success-block").removeClass("hidden"),this.update.$el.find(".header").eq(0).addClass("hidden"),this.$el.addClass("hidden"),this.model.off("change:state"))},onPreferenceChange:function(){var a=
{isValid:!0,isModified:!1};this.model.trigger("beforechange:state",a);this.model.set("state",a.isValid?a.isModified?"modified":"reset":"invalid")},_showOverlay:function(){this.model.set("submission_state","submitting")},_hideOverlay:function(){this.model.set("submission_state","submitted")},_submit:function(){var a=n(b.object(b.map(this.preferenceElements,function(a){a=h(a);return[a.attr("name"),a.val()]})));p.call(this,a).done(b.bind(function(a){this.model.set("state","saved")},this)).error(b.bind(function(){g.log("ajax call failed");
0<d.parent().size()?clearTimeout(l):k.append(d);l=setTimeout(m,6E3)},this)).always(b.bind(function(){f.trigger("after_job_preferences_set")},this))}}})})();
(function(){var k=LIModules.requires("jquery"),c=LIModules.requires("Dropdown");LIModules.requires("OzFeedUpdate").addView({block:"job-preference-dropdown",methods:{init:function(){var d=this.$el,e=d.find(".dropdown"),f=d.find(".job-preference-input"),l=d.find(".job-preference-value"),g=this.update.getViews("job-preferences")[0],h=k.Deferred();new c(e.eq(0),{triggerSelector:".dropdown-trigger"});this.onInitialOpen=h.promise();this.onPreferenceChange=function(b){var a=b.minLabel+" - "+b.maxLabel;f.val(a).attr("title",
a);l.val(b.min+"-"+b.max);g.onPreferenceChange()};g.model.on("change:submission_state",function(b,a){f.prop("disabled","submitting"===a)});e.on(c.EVENTS.OPEN,function a(){h.resolve();e.off(c.EVENTS.OPEN,a)})}}})})();
(function(){LIModules.requires("jquery");var n=LIModules.requires("DoubleSlider"),p=LIModules.requires("OzFeedTrackingRouter");LIModules.requires("OzFeedUpdate").addView({block:"job-preference-range",methods:{init:function(){function h(){clearTimeout(k);k=_.defer(function(){var a=b.getCurrentVal(),e=d.getCurrentVal();l=!0;m.onPreferenceChange({min:b._$radios.eq(a).val(),max:d._$radios.eq(e).val(),minLabel:b.$labels.eq(a).text(),maxLabel:b.$labels.eq(e).text()});c.attr("data-min-val",a);c.attr("data-max-val",
e);f.$el.attr("data-min-exp-level",a);f.$el.attr("data-max-exp-level",e);p.track(c,"job-preference-experience-range")})}var c=this.$el,m=this.update.getViews("job-preference-dropdown")[0],f=this.update.getViews("job-preferences")[0],q=m.onInitialOpen,g,b,d,k,l=!1;c.find('input[type\x3d"image"]').on("click",function(a){a.preventDefault()});q.done(function(){g=new n(c,{});b=g._slider1;d=g._slider2;b.after("_setDialPosition",h);d.after("_setDialPosition",h)});f.model.on("beforechange:state",function(a){l&&
(a.isModified=!0)})}}})})();
(function(){var p=LIModules.requires("jquery"),l=LIModules.requires("underscore"),q=LIModules.requires("OzFeedTrackingRouter"),m=LIModules.requires("OzFeed"),r=6E3,k="state",n="loaded";LIModules.requires("OzFeedUpdate").addView({block:"job-preference-typeahead",methods:{init:function(){var a=this.$el,c=a.find(".job-preference-input"),b=this.update.getViews("job-preferences")[0].model;this.dataSrcURL=c.attr("data-url");this.$loaderHolder=a.find(".loader-holder");this.$removeIcon=a.find(".remove-icon");
this.$globalAlertsHolder=p("#global-alert-queue");this.$alert=a.find(".job-preference-typeahead-err");this.$noSuggestions=a.find(".tt-no-suggestions");this.model.on("change:"+k,l.bind(this.setLoading,this));this.$alert.remove().removeClass("hidden").removeClass("job-preference-typeahead-err");this.$noSuggestions.remove().removeClass("hidden");b.on("change:submission_state",function(a,b){c.prop("disabled","submitting"===b)});this._initializeTypeahead()},setLoading:function(a,c){"loading"===c?(this.$loaderHolder.removeClass("shrunk"),
this.$removeIcon.addClass("hidden")):(this.$loaderHolder.addClass("shrunk"),this.$removeIcon.removeClass("hidden"))},_initializeTypeahead:function(){var a=this,c=a.$el,b=c.find(".job-preference-input"),e=c.find(".job-preference-value"),f=a.update.getViews("job-preferences")[0],d={minLength:b.attr("data-min-length")&&parseInt(b.attr("data-min-length"))||1,highlight:!0,hint:!1},s=a.$noSuggestions.get(0).outerHTML,g=!1,h=!0;b.typeahead(d,{name:b.attr("name"),source:a._getSuggestions(),display:"displayName",
templates:{empty:s}});a.$removeIcon.on("click",function(){a.$removeIcon.addClass("hidden");b.typeahead("val","").focus();e.val("");h=!0;g=!1;f.onPreferenceChange()});c.on("typeahead:selected",function(a,b){e.val(b.id);g=h=!0;f.onPreferenceChange();c.attr("data-selected-value",b.id);f.$el.attr("data-location",b.id);q.track(c,"job-preference-location-selection")});(function(){var c,d;b.on("keyup",function(b){d=b.target.value;d!==c&&(h=!d,d||(g=!1,a.$removeIcon.addClass("hidden")),e.val(""),f.onPreferenceChange())}).on("keydown",
function(a){c=a.target.value})})();f.model.on("beforechange:state",function(a){g&&(a.isModified=g);h||(a.isValid=h)})},_removeAlert:function(){this.$alert.remove()},_getSuggestions:function(){function a(a,b){return function(c){e===a&&(d.model.set(k,n),b(c.resultList?c.resultList.splice(0,6):[]))}}function c(){m.log("ajax call to fetch locations has failed");0<d.$alert.parent().size()?clearTimeout(f):d.$globalAlertsHolder.append(d.$alert);f=setTimeout(l.bind(d._removeAlert,d),r);d.model.set(k,n)}function b(b,
g){return function(){m.Util.ajax({url:d.dataSrcURL,type:"GET",data:{query:b},dataType:"json",success:a(e,g),error:c})}}var e,f,d=this;return function(a,c){d.model.set(k,"loading");clearTimeout(e);e=setTimeout(b(a,c),250)}}}})})();
(function(){LIModules.requires("jquery");LIModules.requires("underscore");LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"save-job-preferences",methods:{init:function(){var a=this.$el,d=this,e=a.text(),c=this.update.getViews("job-preferences")[0].model;this.$loadingSymbol=a.find(".loader").remove().removeClass("hidden");c.on("change:state",function(a,b){d.model.trigger("change:enable_state",a,"modified"===b?"enable":"disable")});c.on("change:submission_state",function(c,
b){"submitting"===b?a.empty().append(d.$loadingSymbol).prop("disabled",!0):a.text(e).prop("disabled",!1)});this.model.on("change:enable_state",function(c,b){"enable"===b?a.prop("disabled",!1):a.prop("disabled",!0)})}}})})();
(function(){var e=LIModules.requires("jquery"),b=LIModules.requires("underscore"),g=LIModules.requires("OzFeed"),h=LIModules.requires("OzFeedUpdate"),k=LIModules.requires("UserActivityTrackingInstance");h.addView({block:"rollup",methods:{init:function(){this._resetBuffer();this.height=this.originalHeight=this.$el.outerHeight(!0);this.injectModuleKey=this.$el.data("rollup-inject-module-key");this.model.on("change:pendingUpdates",this.render,this)},render:function(){g.log("adding updates");this.$el.css("height",
this.height);dust.render("ozfeed-templates/blocks/rollup",this.model.get("pendingUpdates"),b.bind(function(a,b){var f=this,c=this.$el,d=e(b).children();c.append(d);d.each(function(){f.height+=e(this).outerHeight(!0)});this.update.initView(d.find("[data-block]"));c.css("height",this.height);k.fireImpressionEvents(c,this.injectModuleKey);this._resetBuffer()},this))},_resetBuffer:function(){this.model.set("pendingUpdates",{},{silent:!0})},toggleList:function(){var a=this.$el;this.fullHeight=this.fullHeight||
a.height();a.hasClass("less-shown")?(a.removeClass("less-shown"),a.css("height",this.fullHeight)):(a.addClass("less-shown"),a.css("height",this.originalHeight-1))},insertUpdates:function(a){this.model.set("pendingUpdates",a)},setDone:function(){this.$el.addClass("full")}}})})();
(function(){var d=LIModules.requires("jquery"),e=LIModules.requires("underscore"),c=LIModules.requires("OzFeed"),f=LIModules.requires("OzFeedUpdate");LIModules.imports("TrackFailure");f.addView({block:"rollup-video",events:{click:function(a){var b=d(a.target);c.Util.embed.isEmbeddable(this.url)&&(a.preventDefault(),b.closest("a").length&&this.$loader.hasClass("hidden")&&(this._embed().done(e.bind(this._render,this)).fail(e.bind(function(){this.$loader.addClass("hidden");c.log("error handler has not been implemented yet")},
this)),this.$loader.removeClass("hidden")))}},methods:{init:function(){var a=this.$el.find(".image");this.$loader=d('\x3cspan class\x3d"loading hidden"/\x3e');this.url=a.attr("href");a.append(this.$loader)},_embed:function(){var a=d.Deferred();this.embedlyCache?a.resolve(this.embedlyCache):c.Util.embed.withEmbedly(this.url,this.$el.width()).done(function(b){this.embedlyCache=b;a.resolve(b)}).fail(a.reject);return a.promise()},_render:function(a){var b=this.$el,c;a.truncateDescription=!0;a.author=
b.find("cite").data("author");dust.render("ozfeed-templates/partials/_embedly",a,function(a,e){a||(c=d(e),c.find(".embedly-info").append(b.find(".actions")),b.prepend(c),b.get(0).offsetHeight,b.addClass("video-expanded"))})}}})})();
(function(){var a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"see-more-recommendations",events:{click:function(){a.log("clicked on see more recommendations action");this._seeMoreRecommendations()}},methods:{_seeMoreRecommendations:function(){this.recommendationsBlock=this.update.getViews("recommendations")[0];this.recommendationsBlock||(this.recommendationsBlock=this.update.getViews("recommendations-endorse")[0]);this.recommendationsBlock.resetVisibleRecommendations()},
remove:function(){this.removeSelf()}}})})();
(function(){var b=LIModules.requires("jquery"),d=LIModules.requires("underscore"),c=LIModules.requires("OzFeed"),e=LIModules.requires("OzFeedUpdate");LIModules.requires("UserActivityTrackingInstance");e.addView({block:"share",events:{click:function(a){c.log("clicked on share");this._share()}},methods:{_addTracking:function(){var a=b(".share-dialog");a.find("#share-text");a.attr("data-li-utrk-ref","[data-update-id\x3d"+this.update.$el.data("update-id")+"]");a.find('.submit-container input[type\x3d"submit"]').attr("data-li-auto-click-utrki",
"y\x3dSHARE\x26u\x3dreShareButton\x26n\x3dreShareUpdate");a.find(".dialog-close").attr("data-li-auto-click-utrki","y\x3dDISMISS\x26u\x3dreShareDismissCTA\x26n\x3ddismissReShare")},_setupDialog:function(){c.Util.setupDialog({$el:this.$el,titleKey:"i18n_share",ajaxDialog:!0,jsConfig:{width:590,top:100,callbacks:{afterOpen:this._fixedDialogPosition},fitToWindow:!1,customClassName:"share-dialog",decorators:["scripts/shared/Dialog/AjaxLoading"]}});this.$el.data("dialog").after("setDialogBodyContent",d.bind(this._addTracking,
this))},_fixedDialogPosition:function(){b("#dialog-mask").scrollTop(0)},_share:function(){this.$el.data("dialog")||this._setupDialog()}}})})();
(function(){var b=LIModules.requires("jquery"),d=LIModules.requires("underscore"),c=LIModules.requires("OzFeed"),e=LIModules.requires("OzFeedUpdate");LIModules.requires("UserActivityTrackingInstance");e.addView({block:"shareMessage",events:{click:function(a){c.log("clicked on share as message");this._share()}},methods:{_addTracking:function(){var a=b(".share-dialog");a.find("#share-text");a.attr("data-li-utrk-ref","[data-update-id\x3d"+this.update.$el.data("update-id")+"]");a.find('.submit-container input[type\x3d"submit"]').attr("data-li-auto-click-utrki",
"y\x3dSEND_MESSAGE\x26u\x3dSendMessage\x26n\x3dsendMessage");a.find(".dialog-close").attr("data-li-auto-click-utrki","y\x3dDISMISS\x26u\x3dDismissMessage\x26n\x3ddismissMessage")},_setupDialog:function(){c.Util.setupDialog({$el:this.$el,titleKey:"i18n_share",ajaxDialog:!0,jsConfig:{width:590,top:100,callbacks:{afterOpen:this._fixedDialogPosition},fitToWindow:!1,customClassName:"share-dialog",decorators:["scripts/shared/Dialog/AjaxLoading"]}});this.$el.data("dialog").after("setDialogBodyContent",d.bind(this._addTracking,
this))},_fixedDialogPosition:function(){b("#dialog-mask").scrollTop(0)},_share:function(){this.$el.data("dialog")||this._setupDialog()}}})})();
(function(){var c=LIModules.requires("jquery"),d=LIModules.requires("underscore"),f=LIModules.requires("OzFeedUpdate"),g=LIModules.requires("OzFeedRichMediaViewer");f.addView({block:"shared-image",events:{click:function(a){this.$el.data("rmv-url")&&(a.preventDefault(),!this.richMediaViewer&&c(a.target).is("img")&&this._setupDialog(),this.richMediaViewer.isReady.done(d.bind(function(){this.richMediaViewer.open()},this)))}},methods:{init:function(a){a=this.$el;this.rmvTitle=a.data("rmv-title");this.rmvUrl=
a.data("rmv-url");this.parentUpdateID=this.update.id;this.$image=a.find("img")},_setupDialog:function(){this.richMediaViewer=new g(this.$image,{title:this.rmvTitle,customClassName:"rich-media-viewer-dialog",templateDataUrl:this.rmvUrl,top:75,centerVertically:!0,dustContentTemplate:"ozfeed-templates/partials/_rich-media-viewer",decorators:["scripts/shared/Dialog/AjaxDustLoading"],callbacks:{contentRenderSuccess:d.bind(this._handleRMVRendered,this),afterOpen:function(){this.richMediaViewer._fitToWindow.call(this.richMediaViewer)}.bind(this)}})},
_addTracking:function(){var a=c(".rich-media-viewer-dialog"),b=a.children().first();b.attr("data-li-utrk-ref","[data-update-id\x3d"+this.update.$el.data("update-id")+"]");b.find(".comment-box").on("keypress","textarea",function(){b.find('button[data-trk\x3d"comment-submit"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogCommentSubmitCTA\x26n\x3dsubmitComment\x26y\x3dCOMMENT")});a.find(".dialog-close").attr("data-li-auto-click-utrki","u\x3drichMediaDialogDismiss\x26n\x3ddismissRichMedia\x26y\x3dDISMISS");
a.find('[data-trk\x3d"show-previous-comments"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogPreviousCommentsCTA\x26n\x3dexpandComments\x26y\x3dEXPAND");a.find('[data-trk\x3d"likes-social-summary"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogLikerNumber\x26n\x3dexpandLikers\x26y\x3dEXPAND");a.find('[data-trk\x3d"comments-social-summary"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogCommenterNumber\x26n\x3dexpandComments\x26y\x3dEXPAND");a.find('[data-trk\x3d"comment"]').attr("data-li-auto-click-utrki",
"u\x3drichMediaDialogCommentCTA\x26n\x3dexpandComment\x26y\x3dEXPAND");a.find('[data-block\x3d"share"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogShareCTA\x26n\x3dexpandShare\x26y\x3dEXPAND");a.find('[data-trk\x3d"member-commenter-name"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogCommenterName\x26n\x3dviewMemberProfile\x26y\x3dCLICK");a.find('[data-trk\x3d"member-commenter-image"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogCommenterPhoto\x26n\x3dviewMemberProfile\x26y\x3dCLICK");
a.find('[data-trk\x3d"member-post-name"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogActorName\x26n\x3dviewMemberProfile\x26y\x3dCLICK");a.find('[data-trk\x3d"company-post-name"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogActorName\x26n\x3dviewCompanyPage\x26y\x3dCLICK");a.find('[data-trk\x3d"member-post-image"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogActorPhoto\x26n\x3dviewMemberProfile\x26y\x3dCLICK");a.find('[data-trk\x3d"company-post-image"]').attr("data-li-auto-click-utrki",
"u\x3drichMediaDialogActorPhoto\x26n\x3dviewCompanyPage\x26y\x3dCLICK");a.find('[data-trk\x3d"influencer-logo"]').attr("data-li-auto-click-utrki","u\x3drichMediaDialogInfluencerLogo\x26n\x3dviewMemberProfile\x26y\x3dCLICK");a.find('[data-trk\x3d"flag-hide-comment"]').attr("data-li-auto-click-utrki","y\x3dHIDE\x26u\x3dflagAndHideCTA\x26n\x3dflagAndHideComment");a.on("mousedown","[data-block\x3dlike], [data-block\x3dhidden-comment]",function(){var a=c(this);switch(a.attr("data-block")){case "like":a.attr("data-li-auto-click-utrki",
a.data("liked")?"u\x3drichMediaDialogUnlikeCTA\x26n\x3dunlikeUpdate\x26y\x3dUNLIKE":"u\x3drichMediaDialogLikeCTA\x26n\x3dlikeUpdate\x26y\x3dLIKE");break;case "hidden-comment":a.find(".undo").attr("data-li-auto-click-utrki","u\x3dunflagOrUnhideCTA\x26n\x3dunflagOrUnhideComment\x26y\x3dUNHIDE")}})},_syncComments:function(a){var b=f.views,e,d,k,l,h;Object.keys(b).forEach(function(g,m){e=b[g];e.syncWithRMV&&(d="function"===typeof e.syncWithRMV?e.syncWithRMV:f.syncWithRMV,h='[data-block\x3d"'+e.block+
'"]',k=this.update.$el.find(".content "+h),l=a.find(".rmv-section .scrollable "+h),l.each(function(a){var b=c(this);(a=k.filter(function(a){a=c(this);return d(a,b)}))?b.replaceWith(a.clone()):b.remove()}))}.bind(this))},_handleRMVRendered:function(){var a=c(".rich-media-viewer").first();a.attr("data-update-id",this.update.$el.data("update-id"));this._syncComments(a);new f(a,!0);a.find('[data-block\x3d"shared-image"]').removeAttr("data-block").data("block",null);a.find(".expanding-image").attr("target",
"_blank");this._addTracking()}}})})();
(function(){var c=LIModules.requires("jquery"),a=LIModules.requires("underscore"),b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"shares-social-summary",events:{click:function(a){b.log("clicked on shares social-summary");c(a.target).not("a").length&&(this.url&&!this.fetching)&&this._fetchShares()}},methods:{init:function(){this.url=this.$el.data("url");this.fetching=!1},_renderAggregatedShares:function(){(this.aggregatedSharesList=this.update.getViews("aggregated-shares-list")[0])?
this.aggregatedSharesListDeferred.resolve():dust.render("ozfeed-templates/blocks/aggregated-shares-list",{},a.bind(function(a,b){var d=c(b);this.update.append(d);this.aggregatedSharesList=this.update.initView(d)[0];this.aggregatedSharesListDeferred.resolve()},this))},_handleAjax:function(){this.fetching=!0;return b.Util.ajax({url:this.url,success:a.bind(function(a){b.log("ajax call succeeded")},this),error:a.bind(function(){b.log("ajax call failed")},this),complete:a.bind(function(){this.fetching=
!1},this)})},_fetchShares:function(){this.aggregatedSharesListDeferred=new c.Deferred;this._renderAggregatedShares();this.aggregatedSharesListDeferred.done(a.bind(this.aggregatedSharesList.triggerLoading,this.aggregatedSharesList));c.when(this._handleAjax(),this.aggregatedSharesListDeferred.promise()).done(a.bind(function(a){this.aggregatedSharesList.insertShares(a)},this)).fail(a.bind(function(){this.aggregatedSharesList.insertShares()},this)).always(a.bind(function(){this.url=null;this.$el.addClass("all-shown");
this.$el.find(".show-others").prop("disabled",!0)},this))}}})})();
(function(){var c=LIModules.requires("underscore"),b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"show-all-updates",events:{click:function(a){b.log("clicked on show-all-updates button");this.url?this.model.get("fetching")||this._fetchAllUpdates():this._toggleList()}},methods:{init:function(){var a=this.model;this.url=this.$el.data("url");this.offset=+play.getUrlParameter(this.url,"offset");a.set("fetching",!1);a.set("offset",this.url?+play.getUrlParameter(this.url,
"offset"):0);a.on("change:fetching",this._toggleFetching,this);a.on("change:offset",this._updateUrl,this)},_toggleFetching:function(){this.$el.prop("disabled",this.model.get("fetching"))},_toggleList:function(){this.list.toggleList();this.showMoreUpdatesBlock.toggleShowFewer()},_fetchAllUpdates:function(){var a=this.model;a.set("fetching",!0);b.Util.ajax({url:this.url,success:c.bind(function(a){this.list||(this.list=this.update.getViews("rollup")[0]||this.update.getViews("aggregated-shares-list")[0]);
this.showMoreUpdatesBlock||(this.showMoreUpdatesBlock=this.update.getViews("show-more-updates")[0]);this.list.insertUpdates(a);this.list.setDone();this.setDone();this.showMoreUpdatesBlock&&this.showMoreUpdatesBlock.setDone()},this),error:function(){b.log("ajax failed");b.log("error handler has not been implemented yet")},complete:function(){a.set("fetching",!1)}})},_updateUrl:function(){this.url&&(this.url=play.addQueryParameter(this.url,"offset",this.model.get("offset")))},setDone:function(){this.url=
null},incrementOffset:function(a){var b=this.model;b.set("offset",b.get("offset")+(a||3))}}})})();
(function(){var d=LIModules.requires("jquery"),e=LIModules.requires("underscore"),b=LIModules.requires("OzFeed"),g=LIModules.requires("OzFeedUpdate"),f=LIModules.imports("ViewportTracking");g.addView({block:"show-more-updates",events:{click:function(a){b.log("clicked on show-more-updates button");this.list||(this.list=this.update.getViews("rollup")[0]||this.update.getViews("aggregated-shares-list")[0]);this.showAllUpdates||(this.showAllUpdates=this.update.getViews("show-all-updates")[0]);d(a.target).hasClass("show-action")&&
(this.url?this.model.get("fetching")||this._fetchMoreUpdates():this._toggleList())}},methods:{init:function(){var a=this.$el,c=this.model;this.$action=a.find(".show-action");this.url=this.$action.data("url");this.$loader=d('\x3cspan class\x3d"loading hidden"/\x3e');a.append(this.$loader);c.set("show-fewer",!1);c.set("fetching",!1);c.on("change:show-fewer",this.render,this);c.on("change:fetching",this._toggleFetching,this)},render:function(){var a=this.model.get("show-fewer")?"show-fewer-updates":
"show-more-updates";dust.render("ozfeed-templates/blocks/show-more-updates/"+a,{},e.bind(function(a,b){this.update.replaceAndBind(this.id,b);this.$el.focus()},this))},_toggleFetching:function(){var a=this.$action,c=this.$loader;this.model.get("fetching")?(a.prop("disabled",!0),c.removeClass("hidden")):(a.prop("disabled",!1),a.focus(),c.addClass("hidden"))},_toggleList:function(){this.list.toggleList();this.model.set("show-fewer",!this.model.get("show-fewer"))},_fetchMoreUpdates:function(){var a=this.model;
a.set("fetching",!0);b.Util.ajax({url:this.url,success:e.bind(function(a){var b=this.list;b.insertUpdates(a);this.url=a.paginationUrl;f&&f.trackFeedImpressions({fullRefresh:!0});this.url?this.showAllUpdates&&this.showAllUpdates.incrementOffset():(this.model.set("show-fewer",!0),b.setDone(),this.showAllUpdates&&this.showAllUpdates.setDone())},this),error:function(){b.log("ajax failed");b.log("error handler has not been implemented yet")},complete:function(){a.set("fetching",!1)}})},setDone:function(){this.url=
null;this.model.set("show-fewer",!0)},toggleShowFewer:function(){var a=this.model;a.set("show-fewer",!a.get("show-fewer"))}}})})();
(function(){var e=LIModules.requires("jquery"),f=LIModules.requires("underscore"),d=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"show-previous-comments",syncWithRMV:!0,events:{click:function(a){this.model.get("url")&&(e(a.target).hasClass("action")&&!this.model.get("fetching"))&&(d.log("fetch more comments"),this._fetchMoreComments())}},methods:{init:function(){var a=this.$el,b=this.model,c=b.get("url");this.$action=a.find(".action");this.type=a.data("type");this.isReplyType=
"replies"===this.type;this.$loader=e('\x3cspan class\x3d"loading hidden"/\x3e');a.append(this.$loader);c||(c=this.$action.data("url"),b.set("url",c));b.set("done",!1);b.set("fetching",!1);b.set("offset",c?+play.getUrlParameter(c,"offset"):0);b.set("insertCount",c?+play.getUrlParameter(c,"count"):0);b.on("change:fetching",this._toggleFetching,this);b.on("change:offset change:insertCount",this._updateUrl,this);b.on("change:done",this.remove,this)},_toggleFetching:function(){var a=this.$action,b=this.$loader;
this.model.get("fetching")?(a.prop("disabled",!0),b.removeClass("hidden")):(a.prop("disabled",!1),a.focus(),b.addClass("hidden"))},_fetchMoreComments:function(){var a=this.model;a.set("fetching",!0);void 0===this.commentList&&((this.commentList=this.update.getCorrespondingUpdateView(this.$el,"comment-list"))||dust.render("ozfeed-templates/blocks/comment-list",{isNested:this.isReplyType},function(a,c){var d=e(c);this.$el.after(d);this.commentList=this.update.initView(d)[0]}.bind(this)));this.commentList&&
d.Util.ajax({url:a.get("url"),success:f.bind(function(b){d.log("ajax succeeded");this.commentsSocialSummary||(this.commentsSocialSummary=this.update.getCorrespondingUpdateView(this.$el,"comments-social-summary"));this.commentList.insertComments(b);a.set("url",b.paginationUrl);a.get("url")?(this.commentsSocialSummary.incrementOffset(a.get("insertCount")),this.model.set("offset",+play.getUrlParameter(a.get("url"),"offset"))):this.commentsSocialSummary.allCommentsInjected()},this),error:function(){d.log("ajax failed");
d.log("error handler has not been implemented yet")},complete:f.bind(function(){a.set("fetching",!1);a.get("url")||a.set("done",!0)},this)})},_updateUrl:function(){var a=this.model,b;a.get("url")&&(b=play.addQueryParameter(a.get("url"),"offset",""+a.get("offset")),b=play.addQueryParameter(b,"count",""+a.get("insertCount")),a.set("url",b))},show:function(){this.$el.show()},remove:function(){this.removeSelf()},setDone:function(a){this.model.set("done",a)},incrementOffset:function(a){var b=this.model;
b.set("offset",b.get("offset")+(a||1))},decrementOffset:function(a){var b=this.model;a=b.get("offset")-(a||1);b.set("offset",0>a?0:a)}}})})();
(function(){function e(a){LIModules.requires("ozFeed").addTooltips({$el:a,dataAttribute:k,type:d})}var b=LIModules.requires("jquery"),g=LIModules.requires("underscore"),l=LIModules.requires("OzFeed"),m=LIModules.requires("OzFeedUpdate"),f=LIModules.requires("Events"),d="edited-indicator-tooltip",h=d+"-id",k="data-"+h;m.addView({block:"text-entity",events:{click:function(a){b(a.target).closest(".show-more").length?this._expand():b(a.target).closest(".show-less").length&&this._shorten()}},methods:{init:function(){var a=
this.$el;this.$text=a.children("p");this.$buttons=a.find(".show-more, .show-less");this.$showMore=a.find(".show-more");this.$showLess=a.find(".show-less")},_triggerEvent:function(){g.delay(f.trigger,10,"ozfeed-text-entity-render")},_expand:function(){var a=this.$el,b=this.$text,c=this.$buttons;c.detach();b.html(a.data("full-text"));b.append(c);a.removeClass("shortened");a.addClass("expanded");this.$showLess.focus();this._triggerEvent()},_shorten:function(){var a=this.$el,b=this.$text,c=this.$buttons;
c.detach();a.addClass("shortened");a.removeClass("expanded");b.html(a.data("truncated-text"));b.append(c);this.$showMore.focus();this._triggerEvent()},getContents:function(){return this.$el.data("full-text")||this.$text.text()}}});b(window).load(function(){g.defer(function(){LIModules.requires("ozFeed").addTooltipFactory({type:d,jsConfig:{type:"hovercard",tooltipContentID:d,dataAttribute:h}});e(b(".edited-indicator.tooltip-visible"));f.on(l.OZFEED_NEW_UPDATES_EVENT,function(a){e(a.newUpdates.find(".edited-indicator.tooltip-visible"))});
f.on("ozfeed-text-entity-render",function(a){e(b(".edited-indicator.tooltip-visible"))})})})})();
(function(){var b=LIModules.requires("jquery"),d=LIModules.requires("underscore"),e=LIModules.requires("Dropdown"),f=LIModules.requires("Events"),g=LIModules.requires("OzFeed");b(function(){d.defer(function(){function c(a){a.updateActionsDropdown=new e(a.find(".update-actions"),{triggerSelector:".trigger",eventType:"hover",focusClass:"focused"});a.mouseleave(a.updateActionsDropdown.close)}b(".feed-update").each(function(){c(b(this))});f.on(g.OZFEED_NEW_UPDATES_EVENT,function(a){a.newUpdates.each(function(){c(b(this))})})})})})();
(function(){LIModules.requires("underscore");var a=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"leave-group",events:{click:function(){a.log("clicked on leave group button");this._hideUpdate()}},methods:{init:function(){var a=this.$el;this.groupName=a.data("group-name");this.leaveUrl=a.data("leave-url")},_hideUpdate:function(){a.Util.ajax({url:this.leaveUrl,type:"POST"});this.update.hideSelfForLeaveGroup(this.groupName)}}})})();
(function(){var d=LIModules.requires("jquery"),e=LIModules.requires("underscore"),f=LIModules.requires("OzFeed"),g={collapsed:"ozfeed-templates/blocks/rich-media/video",expanded:"ozfeed-templates/partials/_embedly"};LIModules.requires("OzFeedUpdate").addView({block:"video",events:{click:function(a){var b=d(a.target);f.Util.embed.isEmbeddable(this.url)&&(a.preventDefault(),b.parents("a").length||b.is("a"))&&(b.is(".close")?this.model.set("state","collapsed"):this.model.get("fetching")||this._embedly(this.url,
e.bind(function(){this.model.set("state","expanded")},this),e.bind(function(){f.log("error handler has not been implemented yet")},this)))}},methods:{init:function(){var a=this.model,b=this.$el.find(".image");this.$loader=d('\x3cspan class\x3d"loading hidden"/\x3e');this.url=b.attr("href");b.append(this.$loader);a.set("state","collapsed");a.set("fetching",!1);a.on("change:state",this.render,this);a.on("change:fetching",this._toggleFetching,this)},render:function(){var a=this.$el,b=this.model.get("state");
a.css("height",this.embedlyCache.height);dust.render(g[b],this.embedlyCache,function(b,c){a.html(c);a.css("height",a.find(".embedly").height())});a.addClass("video-"+b)},_toggleFetching:function(){this.$loader.toggleClass("hidden",!this.model.get("fetching"))},_embedly:function(a,b,d){var c=this.model;c.set("fetching",!0);this.embedlyCache?(b(this.embedlyCache),c.set("fetching",!1)):(c.set("fetching",!0),f.Util.embed.withEmbedly(this.url,this.$el.width()).done(e.bind(function(a){this.embedlyCache=
a;b(a)},this)).fail(d).always(function(){c.set("fetching",!1)}))}}})})();
(function(){function Q(e,f,l){for(var m=["","webkit","moz","ms"],p=m.length,k=0,n,q,k=0;k<p;k++)if(q=m[k],n=!l&&0<q.length?e.charAt(0).toUpperCase()+e.slice(1):e,n=q+n,(l?"on":"")+n in f)return n;return""}var e=LIModules.requires("jquery"),f=LIModules.requires("underscore"),l="visibilitychange",v,C;"undefined"!==typeof document.hidden?v="hidden":"undefined"!==typeof document.mozHidden?(v="mozHidden",l="moz"+l):"undefined"!==typeof document.msHidden?(v="msHidden",l="ms"+l):"undefined"!==typeof document.webkitHidden&&
(v="webkitHidden",l="webkit"+l);e(function(){function J(a){var b=K.parse(a);a=K.parse.params(a)||{};a.hasOwnProperty(b.pathname)&&!a[b.pathname]&&delete a[b.pathname];a.src?a.src=J(a.src):a.trk=ha;return a=K.build({protocol:b.protocol,host:b.host,pathname:b.pathname,params:a})}function y(a,b){a._tracking&&(a._tracking.reason=b)}function R(a,b){if(a&&a.elem&&b&&b.elem){var c=e(a.elem).closest(L),d=e(b.elem).closest(L);return c.data(S)===d.data(S)}return!1}function m(a,b){return D.Util.isInViewport(a,
ia.getCssDimensions(b))}function p(a){return document[E.fullScreenElement]===a}function k(){return document[E.fullScreenElement]?!0:!1}function n(a,b){var c=e(a.elem).closest(L),d=c.find(r);d.add(d.closest(T)).attr({tabindex:b?"-1":"0"});return c.toggleClass(ja,b)}function q(a,b){a.neverAutoPlay||a.isPlaying||(a.isAutoPlayed=!0,n(a,!1),y(a,b),a.on(z,function(b){a._playerOnReadyFired||a._playerOnReady(b);a.play()}))}function w(a,b){a.isPlaying&&(y(a,b),a.isAutoPaused=!0,a.on(z,function(){a.pause()}))}
function U(a){return!a||a.neverAutoPlay||!a.isAutoPaused&&!a.isPlaying}function A(a){f.each(F,function(b){R(b,a)||w(b,h.VIDEO_PRIORITY_CHANGED)})}function V(a){A(a);n(a,!1);y(a,h.USER_TRIGGERED);a.on(z,function(){a.play()})}function ka(a,b){if(f.find(g,function(b){return b._updateId===a._updateId}))return!0;a.hasEntered=!0;b?g.push(a):g.unshift(a);if(U(a))return!0;A(a);q(a,h.ENTERED_VIEWPORT);return!1}function W(a){a._unmuteOnInteraction&&(a.supports("method","unmute")?(a.unmute(),a.setVolume(M)):
a.getVolume(function(b){0===b&&a.setVolume(M)}),a._unmuteOnInteraction=!1)}function X(a){if("complete"===document.readyState)a();else G.on("load",a)}function la(a){var b=s.constants.DATA_LI_UTRK_EL,c=s.constants.DATA_LI_UTRK_CUSTOM;return{y:a.actionType||"CLICK",u:a.uiElement||"videoEmbeddedCustom",n:a.actionName,custom:function(a){var e=JSON.stringify(a.data("videoCustomTrk"));a.closest(b).attr(c,e)}}}function ma(a){var b=this.player,c=this.$el.find(r),d=this._isAutoplayCapable()&&this._isPlayableInViewport(),
c=k()?p(c.get(0)):d,c=b&&c&&!b.hasEntered;b&&c&&this._setPlayerHasEntered(0<a);return b&&c}function na(){var a=this.$el.find(r),b=this._isAutoplayCapable()&&this._isPlayableInViewport(),a=k()?p(a.get(0)):b;(a=this.player&&!a&&this.player.hasEntered)&&this._setPlayerHasExited();return a}function Y(a){var b=this.player,c=this.$el.find(r),d=this._isAutoplayCapable()&&(k()?p(c.get(0)):this._isPlayableInViewport()),c=b&&d&&!b.hasEntered,e=b&&!d&&b.hasEntered,d=0<a,Z=!1;!b||(Math.abs(a)<=oa||t&&t.isPlaying)||
(c?Z=this._setPlayerHasEntered(d):e&&this._setPlayerHasExited(),Z||(a=f.reject(g,U),(a=a[d?a.length-1:0])||(a=f.findWhere(g,{isPlaying:!0})),R(b,a)?(A(b),q(b,b._tracking&&b._tracking.reason===h.ENTERED_VIEWPORT&&!b.isPlaying?h.ENTERED_VIEWPORT:h.VIDEO_PRIORITY_CHANGED)):w(b,h.VIDEO_PRIORITY_CHANGED)))}function $(a,b){a.supports("method","mute")&&b&&!a.neverAutoPlay?(a._unmuteOnInteraction=!0,a.mute()):a.supports("method","unmute")&&!b?a.unmute():a.setVolume(M)}function N(a,b){O.logInfo(b,b+" ||| updateId: "+
a._updateId?a._updateId:"no update id")}function aa(a,b){!a._enableTabAutopause||a&&a._interacted||(w(a,h.EXITED_VIEWPORT),N(a,pa),b&&(C=a))}var D=LIModules.requires("OzFeed"),ia=LIModules.requires("OzHelpers"),ba=LIModules.requires("Events"),K=LIModules.requires("URI"),qa=LIModules.requires("jsConfig"),ra=LIModules.requires("OzFeedUpdate"),s=LIModules.requires("OzFeedTrackingRouter"),sa=LIModules.imports("TrackInfo")||{logInfo:e.noop()},ta=LIModules.imports("TrackFailure")||{logError:e.noop()},O=
{logInfo:sa.logInfo,logError:ta.logError},ca=LIModules.requires("playerjs"),da=require("PlayerjsTrackingAdaptor"),ea=LIModules.imports("getPageKey"),H,pa="VideoAutoPlayPageHidden",h=da.PLAYER_STATE_CHANGED_REASONS,z="ready",ja="video-paused",ua=[101,150],oa=20,M=100,L='[data-block\x3d"video-embedded"]',S="video-frame-id",r="iframe",T=".embedly",ha="oz-feed",I=!1,t=null,x=null,E={fullScreenChange:Q("fullscreenchange",document.documentElement,!0),fullScreenElement:Q("fullscreenElement",document,!1)},
B,g=[],F=[],u=[],P=e("#share-box").data("memberInfo")||{},fa=e("html"),G=e(window),ga=0;ba.on("oz-feed-dialog-closed",function(a){!B||(B.isEnded||a.dialog.ozClosedBefore&&I)||(q(B,h.ENTERED_VIEWPORT),B=null);a.dialog.ozClosedBefore||(a.dialog.ozClosedBefore=!0);I&&(I=!1)});E.fullScreenChange&&document.addEventListener(E.fullScreenChange,function(){t=null;f.each(g,function(a){p(a.elem)&&(a._interacted=!0,W(a),t=a,N(a,"VideoAutoPlayFullScreen"))});t&&f.each(g,function(a){a!==t&&w(a,h.VIDEO_PRIORITY_CHANGED)})});
v&&document.addEventListener(l,function(){if(document[v]){var a=f.findWhere(g,{isPlaying:!0});a?aa(a,!0):fa.hasClass("os-mac")&&0<g.length&&x&&(N(x,"VideoAutoPlayPageHiddenFallback"),x.getPaused(function(a){a&&(a=x,a.isPlaying=!0,a._interacted=!1,$(a,!0),aa(a),x=null)}))}else C?(q(C,h.ENTERED_VIEWPORT),C=null):fa.hasClass("os-mac")&&0<g.length&&G.scroll()});G.on("scroll",f.throttle(function(){var a=G.scrollTop(),b=a-ga;ga=a;t||f.each(u,function(a){ma.call(a,b)||na.call(a)||Y.call(a,b)})},250));ra.addView({block:"video-embedded",
events:{enterviewport:function(){var a=this.offsets,b=this.player,c=this.$el?this.$el.find(r):e(),a=this._isAutoplayCapable()&&m(this.$videoPlayer,a);!this.playerInitialized&&(!b&&a&&0<c.length)&&(this.player=this._initPlayer(c,!0));f.contains(u,this)||u.push(this)},exitviewport:function(){u=f.without(u,this)},scrollviewport:function(){var a=this.offsets,b=this.player,c=this.$el?this.$el.find(r):e(),a=this._isAutoplayCapable()&&(k()?p(c.get(0)):m(this.$videoPlayer,a));!this.playerInitialized&&(!b&&
a&&0<c.length)&&(this.player=this._initPlayer(c,!0))},keyup:function(){this.wasKeyed=!0;this.lastFocusedElement=document.activeElement},mousedown:function(a){var b=this.$button;e(a.target).closest(b).length&&b.addClass("video-hide-outline")},click:function(a){var b=this.$button;a=e(a.target);var c=this.player;a.closest(b).length&&(this.$el.hasClass("video-not-embeddable")&&this.videoUrl?(A(),this._openVideoInNewWindow()):this.clickToPlay&&this.hasVideoFrame?(this.playClicked=!0,this._addPlayButtonLoader(),
this.insertVideoContent()):this.clickToPlay&&b.find(".video-thumbnail").length?(this._logTrack({name:"VideoExpandedDeprecated",message:"ProviderName: "+this.providerName}),this._swapThumbnail(b)):c?V(c):(this._hideMainLoader(),this._addPlayButtonLoader(),this.playClicked=!0))}},methods:{init:function(){var a=this.$el.data();this.$videoPlayer=this.$el.find(".video-player");this.$button=this.$el.find(".video-play-button");this.$mainLoader=this.$el.find(".video-auto-loading");this.offsets=a.viewportToggle;
this.offsetsWhilePlaying=a.viewportTogglePlaying;this.sessionId=a.sessionId;this.videoUrn=a.videoUrn;this.enableTracking=a.enableTracking;this.appendTrk=a.appendTrk;this.autoplayEventTiming=this.defaultAutoplayTiming=1E3*a.autoplayEventTiming;this.customErrorScreenEnabled=a.customErrorScreen;this.thumbnailUrl=a.thumbnailUrl;this.videoUrl=this.$button.data("href");this.providerName=a.providerName||"UnknownProvider";this.isLinkedInVideo="LinkedIn"===this.providerName;this.showPlayer=a.showPlayer;this.disableAutoplay=
a.disableAutoplay;this.enableTabAutopause=a.enableTabAutopause;this.clickToPlay=!a.embedEnabled;a=qa.get(a.videoFrameId);if(this.hasVideoFrame=!f.isEmpty(a))this.$iframeToAppend=e(a),this.iframeUrl=this.$iframeToAppend.attr("src"),this.clickToPlay||this.insertVideoContent()},insertVideoContent:function(){this._logTrack("VideoAutoPlayLoading");X(this._loadIframe.bind(this));this.thumbnailUrl&&X(this._loadThumbnail.bind(this))},destroy:function(){var a=this.player,b=a&&a._tracking;a&&(b&&b.destroy(),
f.each(ca.EVENTS.all(),function(b){a.off(b)}),this.supportsSeek&&a.off("seeked"),this.supportsTimeupdate&&a.off("timeupdate"),u=f.without(u,this),F=f.without(F,a),g=f.without(g,a))},_recordMeasure:function(a,b){H||(H=LIModules.imports("RUM.userTiming"));H&&(a="Feed_Video_"+this.providerName+"_"+a,H.putMarker(a,(new Date).getTime()-b))},_logTrack:function(a){a=f.isString(a)?{name:a}:a;var b=a.isError?"Error":"Info",c=" ||| For update-id: "+(this.update&&this.update.id?this.update.id:"none"),d=P&&P.id?
" ||| mid: "+P.id:"",e;O["log"+b](a.name,(a.message?a.name+" ||| "+a.message:a.name)+c+d);this.isLinkedInVideo&&(e=this.iframeUrl?" ||| "+this.iframeUrl:"",a.name+="LinkedIn",O["log"+b](a.name,a.name+c+d+e))},_openVideoInNewWindow:function(){s.track(this.$videoPlayer,"video-thumbnail-image");var a=window.open(this.videoUrl,"_blank");this._logTrack({name:(this.hasVideoFrame?"VideoAutoPlay":"VideoExpanded")+(a?"PopupSuccess":"PopupError"),isError:!a});a&&a.focus&&a.focus()},_setPlayerHasEntered:function(a){return ka(this.player,
a)},_setPlayerHasExited:function(){var a=this.player;a.hasEntered=!1;w(a,h.EXITED_VIEWPORT);g=f.without(g,a)},_showMainLoader:function(){this.$mainLoader.removeClass("hidden")},_hideMainLoader:function(){this.$mainLoader.addClass("hidden")},_loadThumbnail:function(){this.$el.find(".video-auto-loading").css("background-image","url("+this.thumbnailUrl+")")},_loadIframe:function(){var a=this.$iframeToAppend,b=(new Date).getTime(),c=this.disableAutoplay?"Autoplay_Disabled_Iframe_Load":"Autoplay_Enabled_Iframe_Load";
this.iframeTooSlow=setTimeout(function(){this._logTrack({name:"VideoAutoPlayIframeTooSlow"});this._setVideoLoaded("video-not-embeddable");this.$el.removeClass("hide-play-button")}.bind(this),1E4);a.attr("allowtransparency","true");this.appendTrk&&a.attr("src",J(a.attr("src")));this.player||(this.player=this._initPlayer(a,!this.playClicked));a.on("load",function(){this._recordMeasure(c+"_Success",b);this.$el.removeClass("video-not-embeddable");this.player&&this.playClicked?(this._removePlayButtonLoader(),
V(this.player)):this.player&&(!this.player.isPlaying&&m(this.$videoPlayer,this.offsets))&&this._setPlayerHasEntered()}.bind(this)).on("error",function(){clearTimeout(this.iframeTooSlow);this._recordMeasure(c+"_Error",b);this._logTrack({name:"VideoAutoPlayIframeError",isError:!0});this._setVideoLoaded("video-not-embeddable");this.$el.removeClass("hide-play-button")}.bind(this));this.$el.find(T).append(a)},_initPlayerTracking:function(a){a._tracking=new da.default(a,{appId:"home-play-video-embedded",
mediaViewTrackingId:this.sessionId,mediaUrn:this.videoUrn,requestHeader:{pageKey:ea()}})},_initSeekedEvent:function(a){if(this.supportsSeek=a.supports("event","seeked"))a.on("seeked",function(){this.wasSeeked=!0}.bind(this))},_initTimeUpdateEvent:function(a){if(this.supportsTimeupdate=a.supports("event","timeupdate"))a.on("timeupdate",this._checkPlayability.bind(this))},_initDialogEvent:function(a){ba.on("oz-feed-dialog-opened",function(b){a.isPlaying&&!a.isEnded&&(I=!0,B=a,w(a,h.EXITED_VIEWPORT))})},
_getEventTriggerDuration:function(a){var b=this.autoplayEventTiming,c=b;a.elapsedTrackingTime?(c=b-a.elapsedTrackingTime,0>c&&(c=b,a.timeStartedPlaying=new Date,a.elapsedTrackingTime=0)):a.timeStartedPlaying=new Date;return Math.round(c)},_setVideoLoaded:function(a){a=a||"";this._removePlayButtonLoader();this.$el.addClass("video-loaded "+a)},_playerOnPause:function(a){a.isAutoPaused||(x=a,a._interacted=!0,W(a));k()||(t=null);a.timeoutForAutoPlayAction&&(window.clearTimeout(a.timeoutForAutoPlayAction),
a.timeoutForAutoPlayAction=null,a.timeStartedPlaying&&(a.elapsedTrackingTime=(new Date).getTime()-a.timeStartedPlaying.getTime()));y(a,h.USER_TRIGGERED);a.isPlaying=!1;a.wasSeeked?a.wasSeeked=!1:this._wasActivatedViaKeyboard()&&this.$button.focus()},_calcAutoplayEventTiming:function(a){a=Math.round(1E3*a)/1E3;this.autoplayEventTiming=0<a&&9>a?Math.round(900*a):this.defaultAutoplayTiming},_updateAutoplayTimingDuration:function(){var a=e.Deferred(),b=this.player;b.on(z,function(){b.getDuration(function(c){c?
(this._calcAutoplayEventTiming(c),a.resolve()):b._duration?(this._calcAutoplayEventTiming(b._duration),a.resolve()):this.dfdTimeUpdateDuration.done(function(b){this._calcAutoplayEventTiming(b);a.resolve()}.bind(this))}.bind(this))}.bind(this));return a.promise()},_autoplayTimeoutCallback:function(){var a=this.player,b=this.$videoPlayer;s.track(b,b.data("custom-trk"));a.autoplayTrackingFired=!0},_playerTriggerAutoplayTrack:function(){var a=this.player;a.autoplayTrackingFired||this._updateAutoplayTimingDuration().done(function(){a.timeoutForAutoPlayAction=
window.setTimeout(this._autoplayTimeoutCallback.bind(this),this._getEventTriggerDuration(a))}.bind(this))},_getClickTrackName:function(a){var b=e.Deferred(),c="",d=this.player;a.isPlaying||(d._duration=a.seconds);a.changed?a.isEnded?c="video-player-auto-advance":d.clickVideoFired?c="video-player-click-change":(c="video-player-manual",d.clickVideoFired=!0):a.isEnded?this.isLinkedInVideo||(c="video-player-replay-manual"):d.clickVideoFired||(c="video-player-manual",d.clickVideoFired=!0);d.timeStartedPlaying=
null;c&&b.resolve(c);return b.promise()},_playerTriggerClickTrack:function(){var a=this.$videoPlayer,b=this.player,c=b.isPlaying,d=b.isEnded,f=e.Deferred();b.getDuration(function(a){a=Math.round(1E3*a)/1E3;f.resolve({changed:b._duration!==a,isPlaying:c,isEnded:d,seconds:a})});f.promise().then(this._getClickTrackName.bind(this)).then(function(b){s.track(a,b)})},_playerTriggerUpdatedTracking:function(){this.player.isAutoPlayed?this._playerTriggerAutoplayTrack():this._playerTriggerClickTrack()},_playerOnPlay:function(a){a._hasPlayed=
!0;this._setVideoLoaded();this.$el.removeClass("video-not-embeddable");this.$el.removeClass("hide-play-button");y(a,h.USER_TRIGGERED);this._wasActivatedViaKeyboard()&&$iframe.focus();A(a);this._playerTriggerUpdatedTracking();a.isEnded=!1;a.isAutoPaused=!1;a.isAutoPlayed=!1;a.isPlaying=!0},_playerOnCustomTrack:function(a){var b;a.uiElement&&(a.uiElement=a.uiElement.replace("PAGEKEY",ea()));a.actionName&&(b="video-"+a.actionName,s.feedRoutes.hasOwnProperty(b)||(s.feedRoutes[b]=la(a)),this.$videoPlayer.data("videoCustomTrk",
a),s.track(this.$videoPlayer,b))},_playerOnReady:function(a,b,c){if(!this._playerOnReadyFired){this._playerOnReadyFired=!0;var d=this.hasVideoFrame?"VideoAutoPlayPlayerJSReady":"VideoExpandedPlayerJSReady";clearTimeout(this.iframeTooSlow);this.showPlayer&&(this.$el.addClass("hide-play-button"),this.$el.removeClass("video-not-embeddable"),this._setVideoLoaded());this._logTrack(d);this._initDialogEvent(a);this._initSeekedEvent(a);this._initTimeUpdateEvent(a);$(a,b);a.on("pause",this._playerOnPause.bind(this,
a));if(c&&-1<c.events.indexOf("litrack"))a.on("litrack",this._playerOnCustomTrack.bind(this));a.on("play",this._playerOnPlay.bind(this,a));a.on("ended",function(){a.isPlaying=!1;a.isEnded=!0;a.isAutoPaused=!1})}},_playerOnError:function(a,b){var c=this.hasVideoFrame?"VideoAutoPlayPlayerJSError":"VideoExpandedPlayerJSError",d=this.customErrorScreenEnabled&&b&&-1<ua.indexOf(b);a._hasPlayed=!0;this._logTrack({name:c,message:d?"Not embeddable":"",isError:!0});this.clickToPlay||(a.neverAutoPlay=!0);!d||
this.clickToPlay||this.disableAutoplay?d&&this._setVideoLoaded():this._setVideoLoaded("video-not-embeddable")},_isInteractedWithinViewport:function(){return this.isLinkedInVideo&&this.player&&!this.player.isAutoPlayed&&this.player&&this.player._interacted&&m(this.$videoPlayer,this.offsetsWhilePlaying)},_isAutoplayCapable:function(){return!this.clickToPlay&&0<this.$videoPlayer.length},_isPlayableInViewport:function(){return this._isInteractedWithinViewport()||m(this.$videoPlayer,this.offsets)},_shouldStopPlaying:function(){return this.player&&
0<this.$videoPlayer.length&&this.player.isPlaying&&!this._isInteractedWithinViewport()&&!m(this.$videoPlayer,this.offsets)&&!p(this.$videoPlayer.find(r).get(0))},_checkPlayability:function(a){var b=this.player,c=e.Deferred(),d=b&&0<this.$videoPlayer.length&&b.isPlaying;a=a.duration?Math.round(1E3*a.duration)/1E3:0;!d||b&&b._interacted?c.resolve():b.getMuted(function(a){a||(b._interacted=!0,c.resolve())});a&&(this.dfdTimeUpdateDuration.resolve(a),b._duration=a);c.done(function(){this._shouldStopPlaying()&&
(this._setPlayerHasExited(),setTimeout(Y.bind(this,1),1))}.bind(this))},_initOnLoad:function(a){var b=this.player;this.enableTracking&&this._initPlayerTracking(b);if(this.update.$el.hasClass(D.HIGHLIGHTED)||this.disableAutoplay)this.showPlayer||n(b,!0),b.neverAutoPlay=!0;b._playerOnReady=this._playerOnReady.bind(this,b,a);b.on(z,b._playerOnReady);b.on("error",this._playerOnError.bind(this,b))},_initPlayer:function(a,b){if(this.player)return this.player;this.dfdTimeUpdateDuration=e.Deferred();this.playerInitialized=
!0;this.player=new ca.Player(this._initIframe(a).get(0));F.push(this.player);this.player._updateId=this.update.id;this.player._enableTabAutopause=this.enableTabAutopause;this.player._hasPlayed=!1;this.player.isEnded=!1;this.player.isAutoPaused=this.disableAutoplay?!1:!0;this.player.isPlaying=!1;if(this.isLinkedInVideo){var c=this._initOnLoad.bind(this,b);if(0<a.length&&a.get(0).contentWindow)c();else a.on("load",c)}else this._initOnLoad(b);return this.player},_addPlayButtonLoader:function(){this.$loader=
e('\x3cspan class\x3d"loading"/\x3e');this.$button.prepend(this.$loader)},_removePlayButtonLoader:function(){this.$loader&&this.$loader.remove()},_recordEmbedlySuccess:function(a){this._recordMeasure("Embedly_Load_Success",a)},_recordEmbedlyFailure:function(a,b,c,d){this._recordMeasure("Embedly_Load_Error",a);this._logTrack({name:"Embed.ly response failed",message:["Status: ",c,"\nError thrown: ",d].join(""),isError:!0})},_loadExpanded:function(){var a=this.videoUrl,b=e.Deferred(),c;D.Util.embed.isEmbeddable(a)?
(c=(new Date).getTime(),this._logTrack("VideoExpandedRequested"),D.Util.embed.withEmbedly(a,this.$button.width(),!0).done(this._recordEmbedlySuccess.bind(this,c)).then(this._render.bind(this),this._recordEmbedlyFailure.bind(this,c)).then(b.resolve,b.reject)):b.reject("Not an embeddable url");this._expandedRequest=b.promise()},_swapThumbnail:function(a){this._loadExpanded();a.find(".loading").length||(this._addPlayButtonLoader(),this._expandedRequest.done(f.bind(function(a,c){a.removeClass("hidden");
this._setExpandedIframeStartTime();this.$button.after(a);this.wasKeyed&&a.focus()},this)).fail(f.bind(function(){this._removePlayButtonLoader()},this)))},_setExpandedIframeStartTime:function(){this._expandedIframeStartTime||(this._expandedIframeStartTime=(new Date).getTime())},_recordExpandedIframeTiming:function(a){this._expandedIframeStartTime&&(this._recordMeasure("Expanded_Iframe_Load_"+(a&&a.isError?"Error":"Success"),this._expandedIframeStartTime),this._expandedIframeStartTime=null)},_render:function(a,
b){var c=e.Deferred(),d;a.excludeInfo=!0;a.updateId=this.update.id;dust.render("ozfeed-templates/partials/_embedly",a,f.bind(function(a,b){var h=e(b),g=h.find(r);a&&(this._logTrack({name:"VideoExpandedRenderError",message:a,isError:!0}),c.reject());this.appendTrk&&g.attr("src",J(g.attr("src")));d=this._initPlayer(g);g.on("load",f.bind(function(){this._recordExpandedIframeTiming();this._setVideoLoaded()},this)).on("error",f.bind(function(){this._recordExpandedIframeTiming({isError:!0});this._logTrack({name:"VideoExpandedIframeError",
isError:!0});c.reject()},this));c.resolve(h,d)},this));return c.promise()},_initIframe:function(a){var b="a11y-"+this.update.id,c=e(a.siblings("#"+b));return a.attr({"aria-labelledby":b,title:c.text()})},_wasActivatedViaKeyboard:function(){var a=this.wasKeyed;this.wasKeyed=!1;return a&&this.$el.find(this.lastFocusedElement).length}}})})})();
(function(){var c=LIModules.requires("underscore"),b=LIModules.requires("OzFeed");LIModules.requires("OzFeedUpdate").addView({block:"wrong-entity",events:{click:function(){b.log("clicked on wrong entity(person or company)");this._promptDialog()}},methods:{_promptDialog:function(){var a=this.$el;this.wrongEntityUrl=a.data("wrong-entity-url");this.wrongEntityName=a.data("wrong-entity-name");this._setupDialog()},_setupDialog:function(){var a={closeOnMaskClick:!0,decorators:["scripts/shared/Dialog/DecisionModalDialog"],
submitSelector:".confirm",submitCallback:c.bind(function(){b.Util.ajax({url:this.wrongEntityUrl,type:"POST"});this.$el.data("dialog").close();this.update.wrongEntity()},this),cancelSelector:".cancel"};b.Util.setupDialog({$el:this.$el,data:{name:this.wrongEntityName},template:"ozfeed-templates/partials/_wrong-entity-dialog",id:"wrong-entity-dialog",titleKey:"i18n_please_confirm",jsConfig:a})}}})})();
(function(){var b=LIModules.requires("underscore"),a=LIModules.requires("OzFeed"),c={"not-endorsed":"endorse",endorsed:"endorsed"};LIModules.requires("OzFeedUpdate").addView({block:"endorse",events:{click:function(){a.log("clicked on endorse action");this._endorse()}},methods:{init:function(){var a=this.model;a.set("state","not-endorsed");a.on("change:state",this.render,this)},render:function(){dust.render("ozfeed-templates/blocks/actions/endorse/"+c[this.model.get("state")],{},b.bind(function(a,
d){this.$el.replaceWith(d);this.model.off("change:state")},this))},_endorse:function(){var b=this.update.getViews("recommendation-entity",{ancestor:"recommendation-entity",$context:this.$el,firstBlock:!1})[0],d=this.$el.data("endorse-url"),c=this.$el.data("signature");a.Util.ajax({url:d,data:{csrfToken:a.Util.getCsrfToken(),signature:c},success:function(){a.log("ajax call succeeded")},error:function(){a.log("ajax failed")}});this.model.set("state","endorsed");this.recommendationsEndorse||(this.recommendationsEndorse=
this.update.getViews("recommendations-endorse")[0],this.recommendationsEndorse.incrementEndorsedCount());b.remove()}}})})();
(function(){function l(a,c){var d;"string"!==typeof h&&(h=a.closest(s).data("impression-url"));d=h;c.signatures.length&&(b.Util.ajax({url:d,data:{csrfToken:b.Util.getCsrfToken(),signatures:c.signatures},success:function(){b.log("impression ajax succeeded")},error:function(){b.log("impression ajax failed")}}),0<k&&t(c),k++,b.Util.ajax({type:"GET",url:m,data:{crsfToken:b.Util.getCsrfToken(),pageNumber:k},success:function(a){b.log("module key ajax succeeded");g.attr(u,a)},error:function(){b.log("module key ajax failed")}}))}
function t(a){a=a.entities;var c=a.length,d;for(d=0;d<c;d++)a[d].attr(v,"");g.length&&w.fireImpressionEvents(g)}function n(a){var c={signatures:[],entities:[]};e.each(a,function(a){a=f(a);a.data(p)||(c.signatures.push(a.data("signature")),c.entities.push(a),a.data(p,!0))});return c}var f=LIModules.requires("jquery"),e=LIModules.requires("underscore"),b=LIModules.requires("OzFeed"),x=LIModules.requires("OzFeedUpdate"),w=LIModules.requires("UserActivityTrackingInstance"),q,r=0,k=0,s=".recommendations",
v="data-li-utrk-impr",p="impressioned",u="data-li-utrk-module",h,m,g;x.addView({block:"recommendations-endorse",methods:{init:function(){var a=this.model;this.$list=f(this.$el.children("ul")[0]);this.fetchUrl=this.$el.data("fetch-url");this.randomSeed=this.$el.data("random-seed");this.numVisibleRecommendations=3;this.lixEndorsementsRedesign="enabled"===this.$el.data("lix-endorsements-redesign");a.set("recommendationsList",[]);a.set("pendingRecommendations",{});a.set("endorsedCount",0);this._resetList();
a.on("change:recommendationsList",e.debounce(e.bind(this._fireImpressionEvent,this),500));a.on("change:pendingRecommendations",this.render,this)},render:function(){var a=this.model.get("pendingRecommendations");a.endorsements&&a.endorsements.length&&dust.render(this.lixEndorsementsRedesign?"ozfeed-templates/promo/endorsements/endorsements_redesign":"ozfeed-templates/promo/endorsements/endorsements",a,e.bind(function(a,d){if(null===a){var b=f("\x3cdiv/\x3e").html(d).find(".recommendation-entity");
this.$list.append(b);this.update.initView(b.find("button[data-block]").addBack());this._resetBuffer()}},this))},_resetBuffer:function(){this.model.set("pendingRecommendations",{},{silent:!0})},_resetList:function(){this.resetList(!0)},_fireImpressionEvent:function(){var a=this.model.get("recommendationsList").slice(0,3),c=n(a);l(a,c);this._addRecommendations()},_addRecommendations:function(){q=LIModules.requires("addParams");this.fetchUrl&&12>=this.model.get("recommendationsList").length&&b.Util.ajax({url:q(this.fetchUrl,
{offset:r+=20,count:20,randomizationSeed:this.randomSeed}),success:e.bind(function(a){b.log("ajax call to add more endorsement recommendations succeeded");this.model.set("pendingRecommendations",a);this._resetList()},this),error:function(){b.log("ajax to add more endorsement recommendations failed")},complete:e.bind(this._checkEndStateReached,this)})},_checkEndStateReached:function(){this.getList()&&this.getList().length||(this.model.get("endorsedCount")?dust.render("ozfeed-templates/promo/endorsements/endorsements_complete",
{numEndorsed:this.model.get("endorsedCount")},e.bind(function(a,c){if(null===a){var d=this.$el.parent(),b=d.find(".headline"),e=f(c);d.addClass("completed");b.replaceWith(e);this._resetBuffer()}},this)):this.update.dismissSelf())},getList:function(){return this.model.get("recommendationsList")},resetList:function(a){this.model.set("recommendationsList",this.$el.find(".recommendation-entity"),{silent:a})},resetVisibleRecommendations:function(){var a=this.model.get("recommendationsList"),c=this;a.length||
(a=this.$el.find(".recommendation-entity"),this._resetList());3<a.length&&e.each(a.slice(0,3),function(a){c.update.getViews("recommendation-entity",{ancestor:"recommendation-entity",$context:f(a),firstBlock:!1})[0].remove()})},incrementEndorsedCount:function(){var a=this.model;a.set("endorsedCount",a.get("endorsedCount")+1)}}});f(function(){var a=f('[data-block\x3d"recommendations-endorse"]');g=a.closest("[data-block\x3dlego]");m=g.attr("data-module-key-url");a.each(function(){var a=f(this).find(".recommendation-entity").slice(0,
3),b=n(a);l(a,b)})})})();
(function(){var f=LIModules.requires("OzFeedUpdate"),m=LIModules.requires("OzFeed");f.addView({block:"reply",events:{click:function(a){m.log("clicked on reply");this._showReplyBox()}},methods:{_showReplyBox:function(){var a,b;this.commentBox||(this.commentBox=this.update.getCorrespondingUpdateView(this.$el,"comment-box"),a=this.$el.closest(".comment-list"),!this.commentBox&&a.hasClass("nested")&&(b=a.closest(".comment-entity").find(".reply"),this.commentBox=this.update.getCorrespondingUpdateView(b,
"comment-box")));this.commentBox.show();this._insertMention(a);this.commentBox.focus()},_insertMention:function(a){var b=LIModules.requires("ozFeed"),g=this.$el,f=/urn:li:(\w+):(\d+)/g,h=this.commentBox.$el.find(".mentions-container"),e=g.attr("data-comment-id"),g="oz-feed/comment/"+e+"/displayName",e="oz-feed/comment/"+e+"/commenter",c,d,k,l;if(!(0<h.find("textarea").val().length)&&a&&a.hasClass("nested")){try{l=play.getEmbeddedContent(e),d=play.getEmbeddedContent(g)}catch(n){m.log("Error getting attributes to set mention for reply: "+
n)}l&&(a=f.exec(l))&&3<=a.length&&(c=a[1],k=a[2]);d&&(c&&k)&&(b.mentions.setInstance({target:h}),b=b.mentions.getInstance(h),b.lastMatch={match:{caretPosition:0,end:0,start:0,token:"",trigger:"",triggerIncluded:!1}},b.$mentionsInput.val(d),c={id:k,index:0,length:d.length,caretPosition:0,type:c,token:d,isFirstDegree:!0,triggerIncluded:!1},b.addMention(c))}}}})})();
(function(){var b=LIModules.requires("jquery"),h=LIModules.requires("Events"),k=LIModules.requires("OzFeed"),c,l="data-li-lego-trk-status",m="fired";b(function(){function f(){e();h.on(k.OZFEED_NEW_UPDATES_EVENT,e)}function e(){c&&b('[data-block\x3d"lego"]').each(function(f,e){var a=b(e),d=a.closest(".updates.promo"),g=d.next(".updates.feed"),n=c.getTrackingData(a).token;if(a.attr(l)!==m){c.fireImpressionEvent([n]);c.installClickHandler(a);if(d.length)h.on(k.OZFEED_NEW_UPDATES_EVENT,function(b,a){d.find(".switching-filters.overlay").remove();
"top"===a?(d.insertBefore(g),c.fireImpressionEvent([n])):"recent"===a&&(d=d.detach())});a.attr(l,m)}})}var g=b("#ozfeed");c=LIModules.imports("PlayLego");if(g.data("defer-impression-tracking"))b(window).on("load",f);else f()})})();
LI.PlayLego=function(e,n){function p(a){l=g(a,"/tracking/actions");m=g(a,"/tracking/impressions");q=g(a,"/cooloff/widgetToken");r=g(a,"/cooloff/group")}function g(a,b){var c=n.getPageContext();if(c&&a&&1<a.length){var c=e.param({csrfToken:c.csrfToken}),d;d="/"==a.substr(-1)?a.substr(0,a.length-1):a;return d+b+"?"+c}}function s(a){if(a)return a+"\x26sync\x3dtrue"}function f(a){return"[data-"+a+"]"}function h(a,b){var c=JSON.stringify(b);e.ajax({type:"POST",contentType:"application/json; charset\x3dutf-8",
url:a,data:c,dataType:"json"})}var l,m,q,r;p(n.getPageContext().contextPath);return{init:function(a){a=a||{};a.baseUrl&&p(a.baseUrl)},getTrackingData:function(a){var b,c,d,k,t,e;b=a.closest(f("li-lego-trk-token"));b.length&&(c=b.data("li-lego-trk-token"));a=a.closest(f("li-lego-action"));a.length&&(d=a.data("li-lego-action"),k=a.data("li-lego-action-name"),t=a.data("li-lego-action-count"),e=a.data("li-lego-sync"));return{token:c,actionCategory:d,actionName:k,actionCount:t,sync:e}},setTrackingData:function(a,
b){var c;b.token&&(c=a.closest(f("li-lego-trk-token")),c.length&&c.data("li-lego-trk-token",b.token));if(b.actionCategory||b.actionName||b.actionCount)c=a.closest(f("li-lego-action")),c.length&&(c.data("li-lego-action",b.actionCategory),c.data("li-lego-action-name",b.actionName),c.data("li-lego-action-count",b.actionCount),c.data("li-lego-sync",b.sync))},installClickHandler:function(a){var b=this,c=a.closest(f("li-lego-trk-token")).data("li-lego-trk-token");a.on("click contextmenu",function(a){a=
e(a.target);a=b.getTrackingData(a);b.fireActionEvent(c,a.actionCategory,a.actionName,a.actionCount,a.sync)})},fireActionEvent:function(a,b,c,d,k){var e=l;l&&(a&&b)&&(a={trackingToken:a,actionCategory:b,actionName:c||"default",actionCount:d||1},!0===k&&(e=s(e)),h(e,a))},fireImpressionEvent:function(a,b){var c=m,d;d=e.grep(a,function(a,b){return a});m&&d.length&&(d=e.map(d,function(a,b){return{trackingToken:a,visibility:"SHOW"}}),d={widgetsImpressionInfo:d},!0===b&&(c=s(c)),h(c,d))},coolOffWidget:function(a,
b){h(q,{trackingToken:a,cooloffPeriod:b})},coolOffWidgetForever:function(a){this.coolOffWidget(a,"time\x3e\x3d999y")},coolOffGroup:function(a,b,c,d,e){h(r,{pageId:a,layoutId:b,slotId:c,groupId:d,cooloffPeriod:e})}}}(window.jQuery||window.Zepto,window.play);
(function(){var a=LIModules.requires("jquery");a(function(){a(".star-update").addClass("seen")})})();
/* Auto generated, hash = 4wp9nl3d1uwucbyqbh7ghaufa */
(function(a){var b=a.requires("jquery"),k=a.requires("underscore"),l=a.requires("Events"),m=a.requires("OzFeed"),d,f,c,g,h=function(a){f=this;this._$el=a;this.counts=this.counts||[];this.widths=this.widths||[];c=this._$el.find(".meter");g=c.find(".highlighter");this.initialize=function(){this.createCounts();this.createWidths();this.applyProgressInMeter()};this.createCounts=function(){c.each(function(){f.counts.push(b(this).data("count"))})};this.createWidths=function(){var a=k.max(f.counts),b=parseInt(100*
a/84,10),d=this.counts.length,c,e;for(e=0;e<d;e++)c=this.counts[e]===a?399:parseInt(475*(this.counts[e]/b),10),this.widths.push(c)};this.applyProgressInMeter=function(){g.each(function(a){b(this).css("width",f.widths[a])})};this.initialize()};d=function(){b(".bar-chart-container").each(function(){a.exports("OzFeedCharts",new h(b(this)))})};b(function(){d();l.on(m.OZFEED_NEW_UPDATES_EVENT,d)});a.exports("OzFeedCharts",h)})(window.LIModules);
(function(){var a=LIModules.requires("ModalDialogBox");LIModules.requires("jquery");a=a.extend(function(a){return{setDialogBodyContent:function(){this._$dialog.attr("data-li-utrk-ref",this._config.trkRef);this._$dialog.find(".dialog-close").attr("data-li-auto-click-utrki","u\x3dDismissCTA\x26n\x3ddismissLikers\x26y\x3dDISMISS");a.setDialogBodyContent.apply(this,arguments);LIModules.requires("LikersModalActions").init()}}});LIModules.exports("LikersModalDialogBox",a)})();(function(){LIModules.requires("jquery")(function(){var c=LIModules.requires("Events"),f=LIModules.requires("LikersModalDialogBox"),d=LIModules.requires("t8");c.on("click-show-likes",function(a){var b=a.$el.closest("button");a=b.data("likersDialog");b.data("href")&&!a&&(a=new d.Resources(dust.i18n,dust),a.get("show_likes_likers_dialog","likers-modal-templates/likers_modal",{},function(a,c){if(a)throw a;var d={title:c,decorators:["scripts/shared/Dialog/AjaxDustLoading"],customClassName:"likers-modal",
top:75,centerVertically:!0,dustContentTemplate:"likers-modal-templates/likers_modal",trkRef:"[data-update-id\x3d"+b.closest("[data-update-id]").data("update-id")+"]"},e=new f(b,d);e.isReady.done(function(){e.open()});b.data("likersDialog",e)}))})})})();(function(){var d=LIModules.requires("jquery"),t=LIModules.requires("underscore"),m=LIModules.requires("parseQueryString"),u=LIModules.requires("addParams"),b,v=45,n,k,p,w="loader",x="hide",f="href",y="likers-modal-templates/likers_list",c,z="offset",q,r,g,e,l=function(){function l(a){a&&(b&&k)&&(a=g-e.scrollTop()-q,a<=v&&g>=r&&A())}function A(){var a=c.attr(f);a&&b&&(b=!1,h(),d.ajax({type:"GET",url:a,beforeSend:function(a){a.setRequestHeader("X-IsAJAXForm",1)},success:function(a,c){a.likers.length?
dust.render(y,a,function(a,c){a||(d(c).insertBefore(d(".show-more-container")),s(),b=!0);h()}):(b=!0,k=!1,h())},failure:function(a){b=!0;h()}}))}function h(){c.toggleClass(w);c.toggleClass(x)}function s(){var a=c.attr(f),b;a&&(b=m(c.attr(f)),b=parseInt(b[z],10)+p,a=u(a,{offset:b},!1),c.attr(f,a))}return{init:function(){var a;k=b=!0;n=d("#all-likers-list");a=d(".dialog-body");e=a.length?a:d("#likers-dialog");c=n.find("#show-more-likers");g=e.prop("scrollHeight");r=parseInt(e.outerHeight(!0),10)||g;
q=e.height();e.on("scroll",t.throttle(l,50));c.length&&(a=m(c.attr(f)),p=parseInt(a.count,10),s())}}}();LIModules.exports("LikersModalActions",l)})();(function(){var d=LIModules.requires("jquery"),b=LIModules.requires("PlayLego");d(function(){var e=LIModules.requires("addParams"),a=d("#hp-promo-abk-social-form-container"),c;a.length&&(c=a.attr("data-url"),(a=a.data("abi-nux"))&&b&&(c=e(c,{initCallback:"abkFetchFormCallback"},!1),window.abkFetchFormCallback=function(a){a.addSubscribers({importerSuccess:function(){b.coolOffGroup("uno-takeover","default","main","abook-group","time\x3e\x3d30d")}})}),fs.embedXHR("hp-promo-abk-social-form-container",
{url:c,container:"hp-promo-abk-social-form-container"}),fs.after("hp-promo-abk-social-form-container",function(a,c){var b=d("#resolve-btn");b.prop("disabled",!0);b.attr({"data-li-lego-action":"PRIMARY_ACTION","data-li-lego-action-name":"continue","data-trk":"promo-abook-continue","data-li-lego-sync":"true"})}))})})();(function(){function t(){var a=this.currentUnit.find(this.connectionSelector);a.on("submit",a.find("form"),function(a){a.preventDefault()}).on("click",this.submitSelector,b.bind(u,this)).on("focus",this.emailInputSelector,b.bind(v,this)).on("click",this.cancelButtonSelector,b.bind(w,this));new x(a.find(this.infoButtonSelector),this.toolTipConfig)}function y(a,d){dust.render(this.template,a,b.bind(function(a,b){var e=g(b);this.currentUnit.append(e).addClass(this.unitMarkerClass);d.call(this,e)},this))}
function h(){var a=this.currentUnit,b=a.find(this.connectionSelector),c=a.find(this.previousContentSelector);a.toggleClass(this.displayClass);m.fire(z+this.eventNamespace,a.is(this.displayClass)?b:c)}function w(a){this.currentUnit=g(a.target).parents(this.unitSelector);h.call(this);this.reset()}function v(a){this.currentUnit=g(a.target).parents(this.unitSelector);this.reset()}function u(a){var d=g(a.target),c,f,e;a.preventDefault();this.currentUnit=d.parents(this.unitSelector);c=this.currentUnit.find(this.submitSelector);
f=this.currentUnit.find(this.connectionSelector+" "+this.titleWrapSelector);a=this.currentUnit.find(this.emailInputSelector);e=a.val();this.reset();A.email.test(e)?(d.addClass(n).attr(k,k),p.ajax({url:c.data("connect-url")+"\x26email\x3d"+encodeURIComponent(e),type:"POST",success:b.bind(function(a){"success"===a.status?m.fire(B+this.eventNamespace,c):(this.reset(),f.addClass(l))},this),error:b.bind(function(){this.reset();f.addClass(l)},this)})):(f.addClass(q),a.addClass(r))}var g=LIModules.requires("jquery"),
b=LIModules.requires("underscore"),m=LIModules.requires("Events"),x=LIModules.requires("OzTooltip"),A=LIModules.requires("patterns"),p,C={template:"common-templates/authenticate-connect",eventNamespace:"props",unitSelector:".card",connectionSelector:".authenticate-connect",submitSelector:".authenticate-connect-connect",previousContentSelector:".front",emailInputSelector:"input.email",cancelButtonSelector:".authenticate-connect-cancel",infoButtonSelector:".info",titleWrapSelector:".titlewrap",unitMarkerClass:"requires-email-authentication",
displayClass:"show-authenticate-connect",toolTipConfig:{direction:"left",type:"hovercard",tooltipContentID:"authenticate-connect-tooltip"}},k="disabled",r="error",q="show-email-error",l="show-generic-error",n="submitting",D=l+" "+q,B="authenticate-connect-success.",z="authenticate-connect-toggle.",s=function(a){p=LIModules.requires("OzHelpers");b.extend(this,C,a);this.eventNamespace=this.eventNamespace.replace(/^\./,"")};s.prototype={reset:function(){var a=this.currentUnit.find(this.connectionSelector);
a.find(this.titleWrapSelector).removeClass(D);a.find(this.submitSelector).removeClass(n).removeAttr(k);a.find(this.emailInputSelector).removeClass(r)},show:function(a,d){function c(){t.call(this);b.defer(b.bind(h,this))}this.currentUnit=a.parents(this.unitSelector);this.currentUnit.find(this.connectionSelector).length?h.call(this):y.call(this,d,c)}};LIModules.exports("AuthenticateConnect",s)})();(function(){var f=LIModules.requires("jquery"),b=LIModules.requires("underscore"),c=LIModules.requires("Events"),q=LIModules.requires("AuthenticateConnect"),l=LIModules.requires("readCookie"),m=LIModules.requires("createCookie"),h,n=200,p=function(a){h=LIModules.requires("OzHelpers");this.$el=a;this.stateCookieName="oz_props_fetch_size1_"+a.data("member-id");this.authenticateConnect=new q;this._initializeStateCookie();this._bindEvents()};p.prototype={_bindEvents:function(){this.$el.on("click","button.comment",
b.bind(function(a){this.handleCommentClicked(f(a.target))},this)).on("click","button.message",b.bind(function(a){this.handleMessageClicked(f(a.target))},this)).on("click","button.like",b.bind(function(a){this.handleLikeClicked(f(a.target))},this)).on("click","button.skip",b.bind(function(a){this.handleSkipClicked(f(a.target))},this)).on("click","button.peek",b.bind(this.handlePeekClicked,this)).on("click",".front button.connect",b.bind(function(a){this.handleConnectClicked(f(a.target))},this)).on("mouseup",
"button",b.bind(function(a){this.handleButtonMouseup(f(a.target))},this));c.on("authenticate-connect-toggle.props",b.bind(this.handleAuthenticateToggle,this)).on("authenticate-connect-success.props",b.bind(this.handleAuthenticateSuccess,this))},_bindCommentEvents:function(a){a.on("click","button.cancel",b.bind(this.handleCommentCancelClicked,this)).on("click","button.comment-submit",b.bind(this.handleCommentSubmitClicked,this))},_bindMessageEvents:function(a){a.on("keyup","[name\x3dmessage]",b.bind(this.handleMessageInput,
this)).on("click","button.cancel",b.bind(this.handleMessageCancelClicked,this)).on("click","button.message-submit",b.bind(this.handleMessageSubmitClicked,this))},_setTabIndexTo:function(a){this.$el.find(".card.current").find("button, a").attr("tabindex","-1");a.find("button, a").removeAttr("tabindex")},_showToast:function(a,k){dust.render("props-templates/shifted/overlays/"+k+"-toast",{},function(k,b){var e=f(b);a.closest(".card").append(e);setTimeout(function(){e.addClass("show")},20)})},_initializeStateCookie:function(){null===
l(this.stateCookieName)&&m(this.stateCookieName,this.$el.data("count"),0.125)},_decrementStateCookie:function(){m(this.stateCookieName,(parseInt(l(this.stateCookieName),10)||1)-1,0.125)},handleAuthenticateToggle:function(a){this._setTabIndexTo(a)},handleAuthenticateSuccess:function(a){this.handleConnectSuccess(a)},handleButtonMouseup:function(a){a.blur()},handleCommentCancelClicked:function(a){a.preventDefault();f(a.target).parents(".card").removeClass("show-comment-box");this._setTabIndexTo(this.$el.find(".card.current"))},
handleCommentClicked:function(a){function k(){setTimeout(function(){c.find("textarea").focus().get(0).setSelectionRange(g,g)},2*n)}var d=a.data("comment"),g=d.length,e=a.closest(".card"),c=e.find(".comment-box");c.length?(e.addClass("show-comment-box"),k()):dust.render("props-templates/shifted/overlays/comment-box",{comment:d,url:a.data("url"),params:a.data("params"),clickTrks:a.data("comment-overlay-trks"),isMentionsEnabled:this.$el.data("props-mentions")},b.bind(function(a,b){c=f(b);e.append(c);
this._bindCommentEvents(c);this._setTabIndexTo(c);setTimeout(function(){e.addClass("show-comment-box")},20);k()},this))},handleCommentSubmitClicked:function(a){var b=f(a.target).parents(".comment-box"),d=b.data("params");a.preventDefault();d.message=b.find("[name\x3dcomment]").val();h.ajax({url:b.data("url"),data:d});setTimeout(function(){c.fire("next.props")},900);this._showToast(b,"commented");this._decrementStateCookie();return!1},handleMessageCancelClicked:function(a){a.preventDefault();f(a.target).parents(".card").removeClass("show-message-box");
this._setTabIndexTo(this.$el.find(".card.current"))},handleMessageInput:function(a){a=f(a.target);this.$el.find("button.message-submit").prop("disabled",!a.val())},handleMessageClicked:function(a){function c(){setTimeout(function(){g.find("textarea").focus()},2*n)}var d=a.closest(".card"),g=d.find(".message-box"),e;g.length?(e=d.find(".message-textarea"),d.addClass("show-message-box"),e.val()||e.val(e.data("convo-starter")).trigger("keyup"),c()):dust.render("props-templates/shifted/overlays/message-box",
{url:a.data("url"),params:a.data("params"),clickTrks:a.data("message-overlay-trks"),propType:a.data("prop-type")},b.bind(function(a,b){g=f(b);d.append(g);e=g.find(".message-textarea");e.prop("selectionStart",e.val().length);this._bindMessageEvents(g);this._setTabIndexTo(g);setTimeout(function(){d.addClass("show-message-box")},20);c()},this))},handleMessageSubmitClicked:function(a){var b=f(a.target).parents(".message-box"),d=(b.data("params")||{}).actorId,g=b.find("[name\x3dmessage]").val(),e={};a.preventDefault();
g&&(e={messages:[{type:"MEBC",recipients:[{id:d}],body:g}],participants:[{id:d}]},h.ajax({url:b.data("url"),data:JSON.stringify(e),contentType:"application/json; charset\x3dutf-8",dataType:"json"}),setTimeout(function(){c.fire("next.props")},900),this._showToast(b,"messaged"),this._decrementStateCookie())},handleConnectClicked:function(a){var c=a.parents(".card"),d={name:a.data("first-name"),url:a.data("connect-url")};c.find(".authenticate-connect").length?this.authenticateConnect.show(a,d):(a.addClass("submitting").attr("disabled",
"disabled"),h.ajax({url:d.url,type:"POST",success:b.bind(function(b){"success"===b.status?this.handleConnectSuccess(a):this.authenticateConnect.show(a,d)},this),complete:function(){a.removeClass("submitting").removeAttr("disabled")}}))},handleConnectSuccess:function(a){this._showToast(a,"invitation-sent");c.fire("pymk-request.props",a.data("fetch-url"));setTimeout(function(){c.fire("next.props")},900)},handleLikeClicked:function(a){this._showToast(a,"liked");h.ajax({url:a.data("like-url")});setTimeout(function(){c.fire("next.props")},
900);this._decrementStateCookie()},handlePeekClicked:function(){var a=this.$el.find(".card.current");a.hasClass("pymk")&&c.fire("pymk-request.props",a.find("button.skip").data("skip-url"));c.fire("next.props")},handleSkipClicked:function(a){a.closest(".pymk").length?c.fire("pymk-request.props",a.data("skip-url")):(h.ajax({type:"POST",url:a.data("skip-url")}),this._decrementStateCookie());c.fire("next.props")}};LIModules.exports("PropsCard",p)})();(function(){var c=LIModules.requires("jquery"),e=LIModules.requires("underscore"),g=LIModules.requires("Events"),n=LIModules.requires("Mentions"),p=LIModules.requires("PropsCard"),f=LIModules.imports("TrackFailure"),l=LIModules.imports("ViewportTracking"),q=LIModules.requires("MultilineTruncation"),m,h,k=function(a){this.$el=a;this.allCaughtUpTimeout;this.pymkQueryOffset=0;this.pymkUrl="";this.pymkRequestQueue=[];this.pymkPeopleRemain=!0;this.pymkDustPath=a.data("pymk-connect-inline")?"props-templates/shifted/cards/pymk-connect-inline":
"props-templates/shifted/cards/pymk";this._setTabIndex();this._bindEvents();this._truncate(a.find(".card.current"));this.$el.data("props-mentions")&&this._bindMentions(this.$el);new p(a)};k.prototype={handleNext:function(){var a=this.$el.find(".card.current"),b=this.$el.find(".card:not(.current):not(.dismissed):first");a.addClass("dismissed");setTimeout(e.bind(function(){this._truncate(b);a.removeClass("current").hide()},this),200);b.length?(b.addClass("current"),setTimeout(function(){b.attr("data-li-utrk-impr",
"");m.fireImpressionEvents();l&&l.trackPropsImpressions({fullRefresh:!0})},200),g.fire("update-impression.props")):this._tryDismiss();this._setTabIndex();clearTimeout(this.allCaughtUpTimeout);b.hasClass("all-caught-up")&&(this.initializePymk(),this.allCaughtUpTimeout=setTimeout(e.bind(function(){this.handleNext()},this),1500))},initializePymk:function(){this.$el.attr("data-li-utrk-module",this.$el.attr("data-li-utrk-pymk-module"));h.ajax({url:this.$el.data("pymk-url"),success:e.bind(function(a){this.pymkQueryOffset=
a.nextQueryOffset;this.pymkUrl=a.url.contactsPymkTitle;this.pymkPeopleToCards(a.people)},this),error:e.bind(function(a,b,d){f&&("timeout"===b?f.logError("propsModulePymkInitialTimeout","Props module PYMK AJAX request timed out for initial fetch."):"error"===b&&f.logError("propsModulePymkInitialException","Props module PYMK AJAX error for initial fetch. Status code: "+a.status+" "+a.statusText+". Error message: "+d+"."));this.pymkPeopleRemain=!1;this._tryDismiss()},this)})},pymkRequestQueuePush:function(a){this.pymkRequestQueue.push(a);
1===this.pymkRequestQueue.length&&this.pymkRequestQueuePop()},pymkRequestQueuePop:function(){var a=this.pymkRequestQueue[0];a&&h.ajax({url:a+"\x26offset\x3d"+this.pymkQueryOffset,success:e.bind(function(a){this.pymkQueryOffset=a.nextQueryOffset;this.pymkPeopleToCards(a.people);this.pymkRequestQueue.shift();this.pymkRequestQueuePop()},this),error:e.bind(function(a,d,c){f&&("timeout"===d?f.logError("propsModulePymkSecondaryTimeout","Props module PYMK AJAX request timed out for secondary fetch."):"error"===
d&&f.logError("propsModulePymkSecondaryException","Props module PYMK AJAX error for secondary fetch. Status code: "+a.status+" "+a.statusText+". Error message: "+c+"."));this.pymkPeopleRemain=!1;this._tryDismiss()},this)})},pymkPeopleToCards:function(a){a.length?this.pymkPeopleRemain=!0:(this.pymkPeopleRemain=!1,this._tryDismiss());for(var b=0;b<a.length;b++)a[b].url.contactsPymkTitle=this.pymkUrl,dust.render(this.pymkDustPath,a[b],e.bind(function(a,b){this.addCard(b)},this))},addCard:function(a){var b=
this.$el.find(".card.current"),d=c(a);b.length?(d.addClass("hidden"),setTimeout(function(){d.removeClass("hidden")},10)):d.addClass("current");this.$el.append(d);this._setTabIndex()},_setTabIndex:function(){this.$el.find("a, button").attr("tabindex","-1");this.$el.find(".card.current").find("a, button:not(.peek)").removeAttr("tabindex");this.$el.find(".card:not(.current):not(.dismissed):first").find(".peek").removeAttr("tabindex")},_tryDismiss:function(){this.$el.find(".card:not(.dismissed)").length||
this.pymkPeopleRemain||this.$el.addClass("dismissed")},_bindEvents:function(){g.on("next.props",e.bind(this.handleNext,this));g.on("pymk-request.props",e.bind(function(a){this.pymkRequestQueuePush(a)},this))},_bindMentions:function(a){var b=c("#ozfeed").data("oon-mentions"),d=c("#ozfeed").data("isb-entitlement")?"/hp/influencer-entitlement":"/nhome/influencer-entitlement";this.mentions=new n.Delegator(a,{oonMentions:b,mentionsTL:"common-templates/mentions-play",entitlementUrl:d})},_truncate:function(a){a.find(".four-lines, .two-lines").filter(function(){return!c(this).find(".four-lines, .two-lines").length}).each(function(){q.truncate(this,
this.getAttribute("data-multiline-truncation-overflow-string")||"")})}};c(function(){m=LIModules.requires("UserActivityTrackingInstance");h=LIModules.requires("OzHelpers");new k(c("#props"))});(function(){c(window).on("load",function(){c("img[data-delayed-url]").each(function(){var a=c(this);a.attr("src",a.attr("data-delayed-url"));a.removeAttr("data-delayed-url")})})})();LIModules.exports("Props",k)})();(function(){var a=LIModules.requires("jquery");a(function(){var h=LIModules.requires("ModalDialogBox"),b=LIModules.requires("Dropdown"),e=LIModules.requires("UserActivityTrackingInstance"),c=a("#footer-feedback"),f=a("#privacy-nav"),g;a("#footer").remove();c.on("click",function(a){a.preventDefault();c.data("dialog")||(g=new t8.Resources(dust.i18n,dust),g.get("i18n_send_feedback","footer-templates/footer",{},function(a,b){var d=new h(c,{decorators:["scripts/shared/Dialog/AjaxLoading"],title:b,width:500,
fitToWindow:!1});d.isReady.done(function(){d.open()});c.data("dialog",d)}))});new b(f,{eventType:"hover",triggerSelector:".subnav-trigger"});f.on(b.EVENTS.OPEN,function(){e.triggerClickTracking("u\x3dprivacyTermsLink\x26n\x3dexpandPrivacyTerms\x26y\x3dEXPAND",e.getImpressionElement(a(this)))})})})();(function(){LIModules.exports("OzScriptLoader",function(b,c){return $.when.apply({},$.map(b,function(b){var c=document.getElementsByTagName("head")[0],a=document.createElement("script"),d=new $.Deferred;a.type="text/javascript";a.async=!0;a.src=play.assetUrl(b);a.addEventListener("load",function(a){d.resolve(a)},!1);c.appendChild(a);return d.promise()})).done(c)})})();(function(){var a=LIModules.requires("jquery");a(function(){a("#internal-feedback").length&&LIModules.requires("OzScriptLoader")(["footer-js/html2canvas.js","footer-js/internalFeedback.js"],function(){LIModules.requires("InternalFeedback").init()})})})();